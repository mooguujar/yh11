{
  "resolvedId": "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Mine/bind_email.vue?vue&type=script&setup=true&lang.ts",
  "transforms": [
    {
      "name": "vite:vue",
      "result": "import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9f1d3ee5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: /*#__PURE__*/_normalizeClass(`rmb w-100 bg-white`)\n}\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" }\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n}\nconst _hoisted_5 = { class: \"relative flex_s\" }\n\nimport { uploadImgApi } from '@/apis/common'\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from '@/apis/user'\nimport info from '@/assets/images/common/info.png'\nimport success from '@/assets/images/common/success.png'\nimport { useAuthStore } from '@/store'\nimport { showToast } from 'vant'\nimport { onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport mitt from '@/utils/mitt'\nimport { computed } from 'vue'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'bind_email',\n  setup(__props) {\n\nconst checked = ref(false)\nconst setSwitch = ref(false)\nconst router = useRouter()\nconst authStore = useAuthStore()\n\nconst showInfoToast = (title: string) => {\n  return showToast({\n    message: title,\n    icon: info\n  })\n}\n\nconst switchChange = () => {\n  if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n    pay_pass.value = ''\n    // valid_code.value = ''\n    return showInfoToast('请输入6位支付密码')\n  } else {\n    setSwitch.value = false\n  }\n  // if (checked.value && !!!valid_code.value) {\n  //   valid_code.value = ''\n  //   return showInfoToast('请输入邮箱验证码')\n  // } else {\n  //   setSwitch.value = false\n  // }\n  // console.log('checked.value', checked.value)\n  let parm = {\n    email: account_email.value, //email\n    // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n    pass: pay_pass.value, //支付密码\n    type: 2, //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n    status: checked.value ? 2 : 1\n  }\n  // console.log('parm', parm)\n  emailSwitch(parm).then(data => {\n    // console.log('data', data.code)\n    if (data.code) return (pay_pass.value = '')\n    checked.value = !checked.value\n    pay_pass.value = ''\n    showToast({\n      message: '修改成功',\n      icon: info\n    })\n  })\n}\nconst showSuceedToast = (title: string) => {\n  return showToast({\n    message: title,\n    icon: success\n  })\n}\n\nconst isConfirmDialog = ref(false)\nconst pay_pass = ref('')\nconst isLoading = ref(false)\nconst regPayPass = /^[0-9]{6}$/\n\nconst showKeyboard = ref(false)\n\nconst isCountDown = ref(false)\nconst countDownSec = ref(60)\n\nconst isUpdatingEmail = ref(false)\nconst hasBindEmail = computed(() => !!authStore?.userInfo?.email)\nconst isShowSendCodeButton = computed(\n  () => !authStore?.userInfo?.email || (!!authStore?.userInfo?.email && isUpdatingEmail.value)\n)\nconst is_email_sellbuy = computed(() => {\n  // console.log('authStore?.userInfo?.is_email_sellbuy', authStore?.userInfo?.is_email_sellbuy)\n  return authStore?.userInfo?.is_email_sellbuy || 1\n})\nwatch(\n  is_email_sellbuy,\n  n => {\n    // console.log('n', n)\n    checked.value = n == 1 ? true : false\n  },\n  {\n    immediate: true\n  }\n)\nconst account_email = ref(authStore?.userInfo?.email)\n\nconst valid_code = ref('')\n\nconst sendCodeToEmail = async () => {\n  try {\n    if (isLoading.value) {\n      return\n    }\n    if (!account_email.value) {\n      return showInfoToast('请输入邮箱地址')\n    }\n    isLoading.value = true\n    const res = await sendCodeToEmailAPI({\n      email: account_email.value,\n      type: 5,\n      uuid: authStore?.userInfo?.uuid\n    })\n    console.log(res, 'res')\n    if (!res.code) {\n      showSuceedToast('验证码发送成功')\n      countDownSec.value = res.nexttime\n      isCountDown.value = true\n      let timer: any = setInterval(() => {\n        if (countDownSec.value > 0) {\n          countDownSec.value = countDownSec.value - 1\n        } else {\n          isCountDown.value = false\n          countDownSec.value = 0\n          clearInterval(timer)\n        }\n      }, 1000)\n    }\n  } catch (e) {\n    console.log(e)\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst startUpdate = () => {\n  account_email.value = ''\n  isUpdatingEmail.value = true\n}\n\nconst handleConfirmDialog = (open: boolean) => {\n  if (authStore?.userInfo?.verified_status !== 1) {\n    return showInfoToast('请先完成实名认证')\n  }\n\n  if (!account_email.value) {\n    return showInfoToast('请输入邮箱地址')\n  }\n\n  if (!account_email.value.includes('@')) {\n    return showInfoToast('请输入正确的邮箱格式')\n  }\n\n  // if (!valid_code.value) {\n  //   return showInfoToast('请输入验证码')\n  // }\n\n  isConfirmDialog.value = open\n  // if (!bind_bank.value.coin_address) {\n  //   if (!coin_address.value || !regBankCode.test(coin_address.value))\n  //     return showInfoToast('请输入16位-19位数字钱包编号')\n  //   isConfirmDialog.value = open\n  // } else {\n  //   isConfirmDialog.value = open\n  // }\n}\n\nconst bindEmail = async () => {\n  // if (isLoading.value) return\n  if (authStore?.userInfo?.verified_status !== 1) {\n    return showInfoToast('请先完成实名认证')\n  }\n  if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n    pay_pass.value = ''\n    return showInfoToast('请输入6位支付密码')\n  }\n  try {\n    const res = await bindEmailAPI({\n      email: account_email.value,\n      emailcode: valid_code.value,\n      pass: pay_pass.value\n    })\n    if (!res.code) {\n      showSuceedToast('绑定成功')\n      setTimeout(() => {\n        router.back()\n      }, 1000)\n    }\n  } catch (e) {\n    console.log(e)\n  } finally {\n    isLoading.value = false\n    isConfirmDialog.value = false\n    pay_pass.value = ''\n  }\n}\n\nconst editEmail = async () => {\n  if (isLoading.value) return\n  if (authStore?.userInfo?.verified_status !== 1) {\n    return showInfoToast('请先完成实名认证')\n  }\n  if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n    pay_pass.value = ''\n    return showInfoToast('请输入6位支付密码')\n  }\n  try {\n    const res = await updateEmailAPI({\n      newemail: account_email.value,\n      newemailcode: valid_code.value,\n      email: authStore?.userInfo?.email,\n      pass: pay_pass.value\n    })\n    if (!res.code) {\n      showSuceedToast('编辑成功')\n      setTimeout(() => {\n        router.back()\n      }, 1000)\n    }\n  } catch (e) {\n    console.log(e)\n  } finally {\n    isLoading.value = false\n    isConfirmDialog.value = false\n    pay_pass.value = ''\n  }\n}\n\nconst templateText = computed(() => ({\n  page_title: hasBindEmail.value ? '修改邮箱' : '邮箱绑定',\n  button_text: hasBindEmail.value ? (isUpdatingEmail.value ? '保存' : '修改邮箱') : '确认'\n  // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n}))\n\n// const bindEmail = async () => {\n//   try {\n//     if (isLoading.value) {\n//       return\n//     }\n//     isLoading.value = true\n//     if (!account_email.value) {\n//       isLoading.value = false\n//       return showInfoToast('请输入信箱')\n//     }\n//     if (!valid_code.value) {\n//       isLoading.value = false\n//       return showInfoToast('请输入验证码')\n//     }\n//     const res = await sendCodeToEmailAPI({\n//       email: account_email.value,\n//       type: 5,\n//       uuid: authStore?.userInfo?.uuid,\n//     })\n//     console.log(res, 'res')\n//     if (!res.code) {\n//       showSuceedToast('验证码发送成功')\n//       isCountDown.value = true\n//       let timer: any = setInterval(() => {\n//         if (countDownSec.value > 0) {\n//           countDownSec.value = countDownSec.value - 1\n//         } else {\n//           countDownSec.value = 0\n//           clearInterval(timer)\n//         }\n//       }, 1000)\n//     }\n\n//   } catch (e) {\n//     console.log(e)\n//   } finally {\n//     isLoading.value = false\n//     isConfirmDialog.value = false\n//   }\n// }\n\n// const bind_bank = ref({})\n// const getWallets = async () => {\n//   await getWithdrawddresslist({})\n//   const bind_list = coin.withdrawddresslist.filter(address => address.coin_protocol === 'SZRMB')\n//   console.log(bind_list, 'bind_list')\n//   if (bind_list.length > 0) {\n//     bind_bank.value = bind_list[0]\n//     img.value = bind_bank.value?.code_imgurl\n//   } else {\n//     bind_bank.value = {}\n//     img.value = ''\n//   }\n// }\nonMounted(async () => {\n  // await getWallets()\n  await authStore.getUserInfo()\n  mitt.emit('number-keyboard-show')\n})\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_nav_bar = _resolveComponent(\"nav-bar\")!\n  const _component_van_field = _resolveComponent(\"van-field\")!\n  const _component_van_switch = _resolveComponent(\"van-switch\")!\n  const _component_van_cell = _resolveComponent(\"van-cell\")!\n  const _component_van_button = _resolveComponent(\"van-button\")!\n  const _component_van_dialog = _resolveComponent(\"van-dialog\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_nav_bar, {\n      title: templateText.value.page_title,\n      mode: `transparent`\n    }, null, 8 /* PROPS */, [\"title\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_van_field, {\n          modelValue: account_email.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((account_email).value = $event)),\n          placeholder: \"请输入邮箱地址\",\n          disabled: hasBindEmail.value && !isUpdatingEmail.value\n        }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"]),\n        (!hasBindEmail.value || (isUpdatingEmail.value && hasBindEmail.value))\n          ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((valid_code).value = $event)),\n              placeholder: \"请输入邮箱验证码\"\n            }, _createSlots({ _: 2 /* DYNAMIC */ }, [\n              (isShowSendCodeButton.value)\n                ? {\n                    name: \"button\",\n                    fn: _withCtx(() => [\n                      (!isCountDown.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                            onClick: sendCodeToEmail\n                          }, _toDisplayString('发送验证码')))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" 已发送验证码 \" + _toDisplayString(countDownSec.value) + \"s \", 1 /* TEXT */))\n                    ]),\n                    key: \"0\"\n                  }\n                : undefined\n            ]), 1032 /* PROPS, DYNAMIC_SLOTS */, [\"modelValue\"]))\n          : _createCommentVNode(\"v-if\", true),\n        (hasBindEmail.value)\n          ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"是否接收买卖币邮箱通知\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(\" inactive-color=\\\"#fff\\\" \"),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((checked).value = $event)),\n                    onChange: _cache[3] || (_cache[3] = ($event: any) => {;(checked.value = !checked.value), (isConfirmDialog.value = true), (setSwitch.value = true)}),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8 /* PROPS */, [\"modelValue\"]),\n                  _createElementVNode(\"span\", {\n                    class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? '' : '!text-[#ccc] !left-[45px] ']),\n                    onClick: _cache[4] || (_cache[4] = ($event: any) => {;(isConfirmDialog.value = true), (setSwitch.value = true)})\n                  }, _toDisplayString(checked.value ? '开启' : '关闭'), 3 /* TEXT, CLASS */)\n                ])\n              ]),\n              _: 1 /* STABLE */\n            }))\n          : _createCommentVNode(\"v-if\", true),\n        _createVNode(_component_van_button, {\n          size: \"large\",\n          class: \"!fixed bottom-[60px] !w-[650px]\",\n          color: \"var(--van-button-primary-background)\",\n          onClick: _cache[5] || (_cache[5] = \n            () =>\n              hasBindEmail.value\n                ? isUpdatingEmail.value\n                  ? handleConfirmDialog(true)\n                  : startUpdate()\n                : handleConfirmDialog(true)\n          )\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(templateText.value.button_text), 1 /* TEXT */)\n          ]),\n          _: 1 /* STABLE */\n        })\n      ]),\n      _createVNode(_component_van_dialog, {\n        show: isConfirmDialog.value,\n        \"onUpdate:show\": _cache[10] || (_cache[10] = ($event: any) => ((isConfirmDialog).value = $event)),\n        title: \"身份验证\",\n        confirmButtonText: \"提交\",\n        theme: \"round-button\",\n        className: \"dialog-bulletin\",\n        onConfirm: _cache[11] || (_cache[11] = () => (setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail()))\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"i\", {\n            class: \"icon-close close-dark block\",\n            onClick: _cache[6] || (_cache[6] = ($event: any) => (handleConfirmDialog(false), (setSwitch.value = false)))\n          }),\n          _createElementVNode(\"div\", null, [\n            _createVNode(_component_van_field, {\n              modelValue: pay_pass.value,\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((pay_pass).value = $event)),\n              placeholder: \"请输入支付密码\",\n              type: \"number\",\n              maxlength: 6,\n              clickable: \"\",\n              onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event: any) => (showKeyboard.value = true), [\"stop\"])),\n              onFocus: _cache[9] || (_cache[9] = ($event: any) => (showKeyboard.value = true))\n            }, null, 8 /* PROPS */, [\"modelValue\"]),\n            _createCommentVNode(\" <van-field\\n            v-if=\\\"checked && setSwitch\\\"\\n            v-model=\\\"valid_code\\\"\\n            placeholder=\\\"请输入邮箱验证码\\\"\\n          >\\n            <template #button>\\n              <div\\n                v-if=\\\"!isCountDown\\\"\\n                class=\\\"text-[var(--van-button-primary-background)] cursor-pointer\\\"\\n                @click=\\\"sendCodeToEmail\\\"\\n              >\\n                {{ '发送验证码' }}\\n              </div>\\n              <div\\n                v-else\\n                class=\\\"text-[#787f8c]\\\"\\n              >\\n                已发送验证码 {{ countDownSec }}s\\n              </div>\\n            </template>\\n          </van-field> \")\n          ])\n        ]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"show\"]),\n      _createCommentVNode(\" <van-number-keyboard\\n        v-model=\\\"pay_pass\\\"\\n        :show=\\\"showKeyboard\\\"\\n        :maxlength=\\\"6\\\"\\n        @blur=\\\"showKeyboard = false\\\"\\n        class=\\\"!z-[3000]\\\"\\n      /> \"),\n      _createCommentVNode(\" <van-dialog v-model:show=\\\"dialogContent.show\\\" :title=\\\"dialogContent.title\\\" theme=\\\"round-button\\\"\\n        :className=\\\"['dialog-deal']\\\" :confirmButtonText=\\\"dialogContent.confirmButtonText\\\" @confirm=\\\"onConfirm\\\">\\n        <i class=\\\"icon-close block close-dark\\\" @click=\\\"onClose\\\"></i>\\n        <div class=\\\"flex flex-col items-center justify-between\\\">\\n          <img :src=\\\"dialogContent.img\\\" :class=\\\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\\\" />\\n          <div class=\\\"content text-center\\\">{{ dialogContent.content }}</div>\\n        </div>\\n      </van-dialog> \")\n    ])\n  ]))\n}\n}\n\n})",
      "start": 1714699769877,
      "end": 1714699769877
    },
    {
      "name": "vite:css",
      "start": 1714699769877,
      "end": 1714699769877,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "result": "import { defineComponent as _defineComponent } from \"vue\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-9f1d3ee5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: /* @__PURE__ */ _normalizeClass(`rmb w-100 bg-white`)\n};\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" };\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" };\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n};\nconst _hoisted_5 = { class: \"relative flex_s\" };\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from \"@/apis/user\";\nimport info from \"@/assets/images/common/info.png\";\nimport success from \"@/assets/images/common/success.png\";\nimport { useAuthStore } from \"@/store\";\nimport { showToast } from \"vant\";\nimport { onMounted, ref, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport mitt from \"@/utils/mitt\";\nimport { computed } from \"vue\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"bind_email\",\n  setup(__props) {\n    const checked = ref(false);\n    const setSwitch = ref(false);\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const showInfoToast = (title) => {\n      return showToast({\n        message: title,\n        icon: info\n      });\n    };\n    const switchChange = () => {\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"请输入6位支付密码\");\n      } else {\n        setSwitch.value = false;\n      }\n      let parm = {\n        email: account_email.value,\n        //email\n        // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n        pass: pay_pass.value,\n        //支付密码\n        type: 2,\n        //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n        status: checked.value ? 2 : 1\n      };\n      emailSwitch(parm).then((data) => {\n        if (data.code)\n          return pay_pass.value = \"\";\n        checked.value = !checked.value;\n        pay_pass.value = \"\";\n        showToast({\n          message: \"修改成功\",\n          icon: info\n        });\n      });\n    };\n    const showSuceedToast = (title) => {\n      return showToast({\n        message: title,\n        icon: success\n      });\n    };\n    const isConfirmDialog = ref(false);\n    const pay_pass = ref(\"\");\n    const isLoading = ref(false);\n    const regPayPass = /^[0-9]{6}$/;\n    const showKeyboard = ref(false);\n    const isCountDown = ref(false);\n    const countDownSec = ref(60);\n    const isUpdatingEmail = ref(false);\n    const hasBindEmail = computed(() => !!authStore?.userInfo?.email);\n    const isShowSendCodeButton = computed(\n      () => !authStore?.userInfo?.email || !!authStore?.userInfo?.email && isUpdatingEmail.value\n    );\n    const is_email_sellbuy = computed(() => {\n      return authStore?.userInfo?.is_email_sellbuy || 1;\n    });\n    watch(\n      is_email_sellbuy,\n      (n) => {\n        checked.value = n == 1 ? true : false;\n      },\n      {\n        immediate: true\n      }\n    );\n    const account_email = ref(authStore?.userInfo?.email);\n    const valid_code = ref(\"\");\n    const sendCodeToEmail = async () => {\n      try {\n        if (isLoading.value) {\n          return;\n        }\n        if (!account_email.value) {\n          return showInfoToast(\"请输入邮箱地址\");\n        }\n        isLoading.value = true;\n        const res = await sendCodeToEmailAPI({\n          email: account_email.value,\n          type: 5,\n          uuid: authStore?.userInfo?.uuid\n        });\n        console.log(res, \"res\");\n        if (!res.code) {\n          showSuceedToast(\"验证码发送成功\");\n          countDownSec.value = res.nexttime;\n          isCountDown.value = true;\n          let timer = setInterval(() => {\n            if (countDownSec.value > 0) {\n              countDownSec.value = countDownSec.value - 1;\n            } else {\n              isCountDown.value = false;\n              countDownSec.value = 0;\n              clearInterval(timer);\n            }\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const startUpdate = () => {\n      account_email.value = \"\";\n      isUpdatingEmail.value = true;\n    };\n    const handleConfirmDialog = (open) => {\n      if (authStore?.userInfo?.verified_status !== 1) {\n        return showInfoToast(\"请先完成实名认证\");\n      }\n      if (!account_email.value) {\n        return showInfoToast(\"请输入邮箱地址\");\n      }\n      if (!account_email.value.includes(\"@\")) {\n        return showInfoToast(\"请输入正确的邮箱格式\");\n      }\n      isConfirmDialog.value = open;\n    };\n    const bindEmail = async () => {\n      if (authStore?.userInfo?.verified_status !== 1) {\n        return showInfoToast(\"请先完成实名认证\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"请输入6位支付密码\");\n      }\n      try {\n        const res = await bindEmailAPI({\n          email: account_email.value,\n          emailcode: valid_code.value,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"绑定成功\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const editEmail = async () => {\n      if (isLoading.value)\n        return;\n      if (authStore?.userInfo?.verified_status !== 1) {\n        return showInfoToast(\"请先完成实名认证\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"请输入6位支付密码\");\n      }\n      try {\n        const res = await updateEmailAPI({\n          newemail: account_email.value,\n          newemailcode: valid_code.value,\n          email: authStore?.userInfo?.email,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"编辑成功\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const templateText = computed(() => ({\n      page_title: hasBindEmail.value ? \"修改邮箱\" : \"邮箱绑定\",\n      button_text: hasBindEmail.value ? isUpdatingEmail.value ? \"保存\" : \"修改邮箱\" : \"确认\"\n      // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n    }));\n    onMounted(async () => {\n      await authStore.getUserInfo();\n      mitt.emit(\"number-keyboard-show\");\n    });\n    return (_ctx, _cache) => {\n      const _component_nav_bar = _resolveComponent(\"nav-bar\");\n      const _component_van_field = _resolveComponent(\"van-field\");\n      const _component_van_switch = _resolveComponent(\"van-switch\");\n      const _component_van_cell = _resolveComponent(\"van-cell\");\n      const _component_van_button = _resolveComponent(\"van-button\");\n      const _component_van_dialog = _resolveComponent(\"van-dialog\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_nav_bar, {\n          title: templateText.value.page_title,\n          mode: `transparent`\n        }, null, 8, [\"title\"]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_van_field, {\n              modelValue: account_email.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => account_email.value = $event),\n              placeholder: \"请输入邮箱地址\",\n              disabled: hasBindEmail.value && !isUpdatingEmail.value\n            }, null, 8, [\"modelValue\", \"disabled\"]),\n            !hasBindEmail.value || isUpdatingEmail.value && hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => valid_code.value = $event),\n              placeholder: \"请输入邮箱验证码\"\n            }, _createSlots({\n              _: 2\n              /* DYNAMIC */\n            }, [\n              isShowSendCodeButton.value ? {\n                name: \"button\",\n                fn: _withCtx(() => [\n                  !isCountDown.value ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                    onClick: sendCodeToEmail\n                  }, _toDisplayString(\"发送验证码\"))) : (_openBlock(), _createElementBlock(\n                    \"div\",\n                    _hoisted_4,\n                    \" 已发送验证码 \" + _toDisplayString(countDownSec.value) + \"s \",\n                    1\n                    /* TEXT */\n                  ))\n                ]),\n                key: \"0\"\n              } : void 0\n            ]), 1032, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true),\n            hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"是否接收买卖币邮箱通知\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(' inactive-color=\"#fff\" '),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => checked.value = $event),\n                    onChange: _cache[3] || (_cache[3] = ($event) => {\n                      ;\n                      checked.value = !checked.value, isConfirmDialog.value = true, setSwitch.value = true;\n                    }),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8, [\"modelValue\"]),\n                  _createElementVNode(\n                    \"span\",\n                    {\n                      class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? \"\" : \"!text-[#ccc] !left-[45px] \"]),\n                      onClick: _cache[4] || (_cache[4] = ($event) => {\n                        ;\n                        isConfirmDialog.value = true, setSwitch.value = true;\n                      })\n                    },\n                    _toDisplayString(checked.value ? \"开启\" : \"关闭\"),\n                    3\n                    /* TEXT, CLASS */\n                  )\n                ])\n              ]),\n              _: 1\n              /* STABLE */\n            })) : _createCommentVNode(\"v-if\", true),\n            _createVNode(_component_van_button, {\n              size: \"large\",\n              class: \"!fixed bottom-[60px] !w-[650px]\",\n              color: \"var(--van-button-primary-background)\",\n              onClick: _cache[5] || (_cache[5] = () => hasBindEmail.value ? isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate() : handleConfirmDialog(true))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\n                  _toDisplayString(templateText.value.button_text),\n                  1\n                  /* TEXT */\n                )\n              ]),\n              _: 1\n              /* STABLE */\n            })\n          ]),\n          _createVNode(_component_van_dialog, {\n            show: isConfirmDialog.value,\n            \"onUpdate:show\": _cache[10] || (_cache[10] = ($event) => isConfirmDialog.value = $event),\n            title: \"身份验证\",\n            confirmButtonText: \"提交\",\n            theme: \"round-button\",\n            className: \"dialog-bulletin\",\n            onConfirm: _cache[11] || (_cache[11] = () => setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail())\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"i\", {\n                class: \"icon-close close-dark block\",\n                onClick: _cache[6] || (_cache[6] = ($event) => (handleConfirmDialog(false), setSwitch.value = false))\n              }),\n              _createElementVNode(\"div\", null, [\n                _createVNode(_component_van_field, {\n                  modelValue: pay_pass.value,\n                  \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => pay_pass.value = $event),\n                  placeholder: \"请输入支付密码\",\n                  type: \"number\",\n                  maxlength: 6,\n                  clickable: \"\",\n                  onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event) => showKeyboard.value = true, [\"stop\"])),\n                  onFocus: _cache[9] || (_cache[9] = ($event) => showKeyboard.value = true)\n                }, null, 8, [\"modelValue\"]),\n                _createCommentVNode(` <van-field\n            v-if=\"checked && setSwitch\"\n            v-model=\"valid_code\"\n            placeholder=\"请输入邮箱验证码\"\n          >\n            <template #button>\n              <div\n                v-if=\"!isCountDown\"\n                class=\"text-[var(--van-button-primary-background)] cursor-pointer\"\n                @click=\"sendCodeToEmail\"\n              >\n                {{ '发送验证码' }}\n              </div>\n              <div\n                v-else\n                class=\"text-[#787f8c]\"\n              >\n                已发送验证码 {{ countDownSec }}s\n              </div>\n            </template>\n          </van-field> `)\n              ])\n            ]),\n            _: 1\n            /* STABLE */\n          }, 8, [\"show\"]),\n          _createCommentVNode(' <van-number-keyboard\\n        v-model=\"pay_pass\"\\n        :show=\"showKeyboard\"\\n        :maxlength=\"6\"\\n        @blur=\"showKeyboard = false\"\\n        class=\"!z-[3000]\"\\n      /> '),\n          _createCommentVNode(` <van-dialog v-model:show=\"dialogContent.show\" :title=\"dialogContent.title\" theme=\"round-button\"\n        :className=\"['dialog-deal']\" :confirmButtonText=\"dialogContent.confirmButtonText\" @confirm=\"onConfirm\">\n        <i class=\"icon-close block close-dark\" @click=\"onClose\"></i>\n        <div class=\"flex flex-col items-center justify-between\">\n          <img :src=\"dialogContent.img\" :class=\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\" />\n          <div class=\"content text-center\">{{ dialogContent.content }}</div>\n        </div>\n      </van-dialog> `)\n        ])\n      ]);\n    };\n  }\n});\n",
      "start": 1714699769878,
      "end": 1714699770686,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Mine/bind_email.vue?vue&type=script&setup=true&lang.ts"
        ],
        "sourcesContent": [
          "import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-9f1d3ee5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: /*#__PURE__*/_normalizeClass(`rmb w-100 bg-white`)\n}\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" }\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n}\nconst _hoisted_5 = { class: \"relative flex_s\" }\n\nimport { uploadImgApi } from '@/apis/common'\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from '@/apis/user'\nimport info from '@/assets/images/common/info.png'\nimport success from '@/assets/images/common/success.png'\nimport { useAuthStore } from '@/store'\nimport { showToast } from 'vant'\nimport { onMounted, ref, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport mitt from '@/utils/mitt'\nimport { computed } from 'vue'\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'bind_email',\n  setup(__props) {\n\nconst checked = ref(false)\nconst setSwitch = ref(false)\nconst router = useRouter()\nconst authStore = useAuthStore()\n\nconst showInfoToast = (title: string) => {\n  return showToast({\n    message: title,\n    icon: info\n  })\n}\n\nconst switchChange = () => {\n  if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n    pay_pass.value = ''\n    // valid_code.value = ''\n    return showInfoToast('请输入6位支付密码')\n  } else {\n    setSwitch.value = false\n  }\n  // if (checked.value && !!!valid_code.value) {\n  //   valid_code.value = ''\n  //   return showInfoToast('请输入邮箱验证码')\n  // } else {\n  //   setSwitch.value = false\n  // }\n  // console.log('checked.value', checked.value)\n  let parm = {\n    email: account_email.value, //email\n    // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n    pass: pay_pass.value, //支付密码\n    type: 2, //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n    status: checked.value ? 2 : 1\n  }\n  // console.log('parm', parm)\n  emailSwitch(parm).then(data => {\n    // console.log('data', data.code)\n    if (data.code) return (pay_pass.value = '')\n    checked.value = !checked.value\n    pay_pass.value = ''\n    showToast({\n      message: '修改成功',\n      icon: info\n    })\n  })\n}\nconst showSuceedToast = (title: string) => {\n  return showToast({\n    message: title,\n    icon: success\n  })\n}\n\nconst isConfirmDialog = ref(false)\nconst pay_pass = ref('')\nconst isLoading = ref(false)\nconst regPayPass = /^[0-9]{6}$/\n\nconst showKeyboard = ref(false)\n\nconst isCountDown = ref(false)\nconst countDownSec = ref(60)\n\nconst isUpdatingEmail = ref(false)\nconst hasBindEmail = computed(() => !!authStore?.userInfo?.email)\nconst isShowSendCodeButton = computed(\n  () => !authStore?.userInfo?.email || (!!authStore?.userInfo?.email && isUpdatingEmail.value)\n)\nconst is_email_sellbuy = computed(() => {\n  // console.log('authStore?.userInfo?.is_email_sellbuy', authStore?.userInfo?.is_email_sellbuy)\n  return authStore?.userInfo?.is_email_sellbuy || 1\n})\nwatch(\n  is_email_sellbuy,\n  n => {\n    // console.log('n', n)\n    checked.value = n == 1 ? true : false\n  },\n  {\n    immediate: true\n  }\n)\nconst account_email = ref(authStore?.userInfo?.email)\n\nconst valid_code = ref('')\n\nconst sendCodeToEmail = async () => {\n  try {\n    if (isLoading.value) {\n      return\n    }\n    if (!account_email.value) {\n      return showInfoToast('请输入邮箱地址')\n    }\n    isLoading.value = true\n    const res = await sendCodeToEmailAPI({\n      email: account_email.value,\n      type: 5,\n      uuid: authStore?.userInfo?.uuid\n    })\n    console.log(res, 'res')\n    if (!res.code) {\n      showSuceedToast('验证码发送成功')\n      countDownSec.value = res.nexttime\n      isCountDown.value = true\n      let timer: any = setInterval(() => {\n        if (countDownSec.value > 0) {\n          countDownSec.value = countDownSec.value - 1\n        } else {\n          isCountDown.value = false\n          countDownSec.value = 0\n          clearInterval(timer)\n        }\n      }, 1000)\n    }\n  } catch (e) {\n    console.log(e)\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst startUpdate = () => {\n  account_email.value = ''\n  isUpdatingEmail.value = true\n}\n\nconst handleConfirmDialog = (open: boolean) => {\n  if (authStore?.userInfo?.verified_status !== 1) {\n    return showInfoToast('请先完成实名认证')\n  }\n\n  if (!account_email.value) {\n    return showInfoToast('请输入邮箱地址')\n  }\n\n  if (!account_email.value.includes('@')) {\n    return showInfoToast('请输入正确的邮箱格式')\n  }\n\n  // if (!valid_code.value) {\n  //   return showInfoToast('请输入验证码')\n  // }\n\n  isConfirmDialog.value = open\n  // if (!bind_bank.value.coin_address) {\n  //   if (!coin_address.value || !regBankCode.test(coin_address.value))\n  //     return showInfoToast('请输入16位-19位数字钱包编号')\n  //   isConfirmDialog.value = open\n  // } else {\n  //   isConfirmDialog.value = open\n  // }\n}\n\nconst bindEmail = async () => {\n  // if (isLoading.value) return\n  if (authStore?.userInfo?.verified_status !== 1) {\n    return showInfoToast('请先完成实名认证')\n  }\n  if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n    pay_pass.value = ''\n    return showInfoToast('请输入6位支付密码')\n  }\n  try {\n    const res = await bindEmailAPI({\n      email: account_email.value,\n      emailcode: valid_code.value,\n      pass: pay_pass.value\n    })\n    if (!res.code) {\n      showSuceedToast('绑定成功')\n      setTimeout(() => {\n        router.back()\n      }, 1000)\n    }\n  } catch (e) {\n    console.log(e)\n  } finally {\n    isLoading.value = false\n    isConfirmDialog.value = false\n    pay_pass.value = ''\n  }\n}\n\nconst editEmail = async () => {\n  if (isLoading.value) return\n  if (authStore?.userInfo?.verified_status !== 1) {\n    return showInfoToast('请先完成实名认证')\n  }\n  if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n    pay_pass.value = ''\n    return showInfoToast('请输入6位支付密码')\n  }\n  try {\n    const res = await updateEmailAPI({\n      newemail: account_email.value,\n      newemailcode: valid_code.value,\n      email: authStore?.userInfo?.email,\n      pass: pay_pass.value\n    })\n    if (!res.code) {\n      showSuceedToast('编辑成功')\n      setTimeout(() => {\n        router.back()\n      }, 1000)\n    }\n  } catch (e) {\n    console.log(e)\n  } finally {\n    isLoading.value = false\n    isConfirmDialog.value = false\n    pay_pass.value = ''\n  }\n}\n\nconst templateText = computed(() => ({\n  page_title: hasBindEmail.value ? '修改邮箱' : '邮箱绑定',\n  button_text: hasBindEmail.value ? (isUpdatingEmail.value ? '保存' : '修改邮箱') : '确认'\n  // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n}))\n\n// const bindEmail = async () => {\n//   try {\n//     if (isLoading.value) {\n//       return\n//     }\n//     isLoading.value = true\n//     if (!account_email.value) {\n//       isLoading.value = false\n//       return showInfoToast('请输入信箱')\n//     }\n//     if (!valid_code.value) {\n//       isLoading.value = false\n//       return showInfoToast('请输入验证码')\n//     }\n//     const res = await sendCodeToEmailAPI({\n//       email: account_email.value,\n//       type: 5,\n//       uuid: authStore?.userInfo?.uuid,\n//     })\n//     console.log(res, 'res')\n//     if (!res.code) {\n//       showSuceedToast('验证码发送成功')\n//       isCountDown.value = true\n//       let timer: any = setInterval(() => {\n//         if (countDownSec.value > 0) {\n//           countDownSec.value = countDownSec.value - 1\n//         } else {\n//           countDownSec.value = 0\n//           clearInterval(timer)\n//         }\n//       }, 1000)\n//     }\n\n//   } catch (e) {\n//     console.log(e)\n//   } finally {\n//     isLoading.value = false\n//     isConfirmDialog.value = false\n//   }\n// }\n\n// const bind_bank = ref({})\n// const getWallets = async () => {\n//   await getWithdrawddresslist({})\n//   const bind_list = coin.withdrawddresslist.filter(address => address.coin_protocol === 'SZRMB')\n//   console.log(bind_list, 'bind_list')\n//   if (bind_list.length > 0) {\n//     bind_bank.value = bind_list[0]\n//     img.value = bind_bank.value?.code_imgurl\n//   } else {\n//     bind_bank.value = {}\n//     img.value = ''\n//   }\n// }\nonMounted(async () => {\n  // await getWallets()\n  await authStore.getUserInfo()\n  mitt.emit('number-keyboard-show')\n})\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_nav_bar = _resolveComponent(\"nav-bar\")!\n  const _component_van_field = _resolveComponent(\"van-field\")!\n  const _component_van_switch = _resolveComponent(\"van-switch\")!\n  const _component_van_cell = _resolveComponent(\"van-cell\")!\n  const _component_van_button = _resolveComponent(\"van-button\")!\n  const _component_van_dialog = _resolveComponent(\"van-dialog\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_nav_bar, {\n      title: templateText.value.page_title,\n      mode: `transparent`\n    }, null, 8 /* PROPS */, [\"title\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_van_field, {\n          modelValue: account_email.value,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((account_email).value = $event)),\n          placeholder: \"请输入邮箱地址\",\n          disabled: hasBindEmail.value && !isUpdatingEmail.value\n        }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"]),\n        (!hasBindEmail.value || (isUpdatingEmail.value && hasBindEmail.value))\n          ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((valid_code).value = $event)),\n              placeholder: \"请输入邮箱验证码\"\n            }, _createSlots({ _: 2 /* DYNAMIC */ }, [\n              (isShowSendCodeButton.value)\n                ? {\n                    name: \"button\",\n                    fn: _withCtx(() => [\n                      (!isCountDown.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                            onClick: sendCodeToEmail\n                          }, _toDisplayString('发送验证码')))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" 已发送验证码 \" + _toDisplayString(countDownSec.value) + \"s \", 1 /* TEXT */))\n                    ]),\n                    key: \"0\"\n                  }\n                : undefined\n            ]), 1032 /* PROPS, DYNAMIC_SLOTS */, [\"modelValue\"]))\n          : _createCommentVNode(\"v-if\", true),\n        (hasBindEmail.value)\n          ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"是否接收买卖币邮箱通知\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(\" inactive-color=\\\"#fff\\\" \"),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((checked).value = $event)),\n                    onChange: _cache[3] || (_cache[3] = ($event: any) => {;(checked.value = !checked.value), (isConfirmDialog.value = true), (setSwitch.value = true)}),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8 /* PROPS */, [\"modelValue\"]),\n                  _createElementVNode(\"span\", {\n                    class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? '' : '!text-[#ccc] !left-[45px] ']),\n                    onClick: _cache[4] || (_cache[4] = ($event: any) => {;(isConfirmDialog.value = true), (setSwitch.value = true)})\n                  }, _toDisplayString(checked.value ? '开启' : '关闭'), 3 /* TEXT, CLASS */)\n                ])\n              ]),\n              _: 1 /* STABLE */\n            }))\n          : _createCommentVNode(\"v-if\", true),\n        _createVNode(_component_van_button, {\n          size: \"large\",\n          class: \"!fixed bottom-[60px] !w-[650px]\",\n          color: \"var(--van-button-primary-background)\",\n          onClick: _cache[5] || (_cache[5] = \n            () =>\n              hasBindEmail.value\n                ? isUpdatingEmail.value\n                  ? handleConfirmDialog(true)\n                  : startUpdate()\n                : handleConfirmDialog(true)\n          )\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(templateText.value.button_text), 1 /* TEXT */)\n          ]),\n          _: 1 /* STABLE */\n        })\n      ]),\n      _createVNode(_component_van_dialog, {\n        show: isConfirmDialog.value,\n        \"onUpdate:show\": _cache[10] || (_cache[10] = ($event: any) => ((isConfirmDialog).value = $event)),\n        title: \"身份验证\",\n        confirmButtonText: \"提交\",\n        theme: \"round-button\",\n        className: \"dialog-bulletin\",\n        onConfirm: _cache[11] || (_cache[11] = () => (setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail()))\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"i\", {\n            class: \"icon-close close-dark block\",\n            onClick: _cache[6] || (_cache[6] = ($event: any) => (handleConfirmDialog(false), (setSwitch.value = false)))\n          }),\n          _createElementVNode(\"div\", null, [\n            _createVNode(_component_van_field, {\n              modelValue: pay_pass.value,\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((pay_pass).value = $event)),\n              placeholder: \"请输入支付密码\",\n              type: \"number\",\n              maxlength: 6,\n              clickable: \"\",\n              onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event: any) => (showKeyboard.value = true), [\"stop\"])),\n              onFocus: _cache[9] || (_cache[9] = ($event: any) => (showKeyboard.value = true))\n            }, null, 8 /* PROPS */, [\"modelValue\"]),\n            _createCommentVNode(\" <van-field\\n            v-if=\\\"checked && setSwitch\\\"\\n            v-model=\\\"valid_code\\\"\\n            placeholder=\\\"请输入邮箱验证码\\\"\\n          >\\n            <template #button>\\n              <div\\n                v-if=\\\"!isCountDown\\\"\\n                class=\\\"text-[var(--van-button-primary-background)] cursor-pointer\\\"\\n                @click=\\\"sendCodeToEmail\\\"\\n              >\\n                {{ '发送验证码' }}\\n              </div>\\n              <div\\n                v-else\\n                class=\\\"text-[#787f8c]\\\"\\n              >\\n                已发送验证码 {{ countDownSec }}s\\n              </div>\\n            </template>\\n          </van-field> \")\n          ])\n        ]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"show\"]),\n      _createCommentVNode(\" <van-number-keyboard\\n        v-model=\\\"pay_pass\\\"\\n        :show=\\\"showKeyboard\\\"\\n        :maxlength=\\\"6\\\"\\n        @blur=\\\"showKeyboard = false\\\"\\n        class=\\\"!z-[3000]\\\"\\n      /> \"),\n      _createCommentVNode(\" <van-dialog v-model:show=\\\"dialogContent.show\\\" :title=\\\"dialogContent.title\\\" theme=\\\"round-button\\\"\\n        :className=\\\"['dialog-deal']\\\" :confirmButtonText=\\\"dialogContent.confirmButtonText\\\" @confirm=\\\"onConfirm\\\">\\n        <i class=\\\"icon-close block close-dark\\\" @click=\\\"onClose\\\"></i>\\n        <div class=\\\"flex flex-col items-center justify-between\\\">\\n          <img :src=\\\"dialogContent.img\\\" :class=\\\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\\\" />\\n          <div class=\\\"content text-center\\\">{{ dialogContent.content }}</div>\\n        </div>\\n      </van-dialog> \")\n    ])\n  ]))\n}\n}\n\n})"
        ],
        "mappings": "AAAA,SAAS,mBAAmB,wBAAwB;AACpD,SAAS,oBAAoB,mBAAmB,eAAe,cAAc,mBAAmB,kBAAkB,aAAa,YAAY,sBAAsB,qBAAqB,sBAAsB,qBAAqB,WAAW,UAAU,eAAe,cAAc,eAAe,cAAc,kBAAkB,iBAAiB,sBAAsB,qBAAqB,mBAAmB,kBAAkB,iBAAiB,gBAAgB,eAAe,cAAc,cAAc,mBAAmB;AAElgB,MAAM,eAAe,QAAM,aAAa,iBAAiB,GAAE,IAAE,EAAE,GAAE,YAAY,GAAE;AAC/E,MAAM,aAAa;AAAA,EACjB,OAAoB,gCAAgB,oBAAoB;AAC1D;AACA,MAAM,aAAa,EAAE,OAAO,gEAAgE;AAC5F,MAAM,aAAa,EAAE,OAAO,uDAAuD;AACnF,MAAM,aAAa;AAAA,EACjB,KAAK;AAAA,EACL,OAAO;AACT;AACA,MAAM,aAAa,EAAE,OAAO,kBAAkB;AAG9C,SAAS,oBAAoB,cAAc,gBAAgB,mBAAmB;AAC9E,OAAO,UAAU;AACjB,OAAO,aAAa;AACpB,SAAS,oBAAoB;AAC7B,SAAS,iBAAiB;AAC1B,SAAS,WAAW,KAAK,aAAa;AACtC,SAAS,iBAAiB;AAC1B,OAAO,UAAU;AACjB,SAAS,gBAAgB;AAEzB,eAA4B,iCAAiB;AAAA,EAC3C,QAAQ;AAAA,EACR,MAAM,SAAS;AAEjB,UAAM,UAAU,IAAI,KAAK;AACzB,UAAM,YAAY,IAAI,KAAK;AAC3B,UAAM,SAAS,UAAU;AACzB,UAAM,YAAY,aAAa;AAE/B,UAAM,gBAAgB,CAAC,UAAkB;AACvC,aAAO,UAAU;AAAA,QACf,SAAS;AAAA,QACT,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzB,UAAI,CAAC,SAAS,SAAS,CAAC,WAAW,KAAK,SAAS,KAAK,GAAG;AACvD,iBAAS,QAAQ;AAEjB,eAAO,cAAc,WAAW;AAAA,MAClC,OAAO;AACL,kBAAU,QAAQ;AAAA,MACpB;AAQA,UAAI,OAAO;AAAA,QACT,OAAO,cAAc;AAAA;AAAA;AAAA,QAErB,MAAM,SAAS;AAAA;AAAA,QACf,MAAM;AAAA;AAAA,QACN,QAAQ,QAAQ,QAAQ,IAAI;AAAA,MAC9B;AAEA,kBAAY,IAAI,EAAE,KAAK,UAAQ;AAE7B,YAAI,KAAK;AAAM,iBAAQ,SAAS,QAAQ;AACxC,gBAAQ,QAAQ,CAAC,QAAQ;AACzB,iBAAS,QAAQ;AACjB,kBAAU;AAAA,UACR,SAAS;AAAA,UACT,MAAM;AAAA,QACR,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AACA,UAAM,kBAAkB,CAAC,UAAkB;AACzC,aAAO,UAAU;AAAA,QACf,SAAS;AAAA,QACT,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAEA,UAAM,kBAAkB,IAAI,KAAK;AACjC,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,YAAY,IAAI,KAAK;AAC3B,UAAM,aAAa;AAEnB,UAAM,eAAe,IAAI,KAAK;AAE9B,UAAM,cAAc,IAAI,KAAK;AAC7B,UAAM,eAAe,IAAI,EAAE;AAE3B,UAAM,kBAAkB,IAAI,KAAK;AACjC,UAAM,eAAe,SAAS,MAAM,CAAC,CAAC,WAAW,UAAU,KAAK;AAChE,UAAM,uBAAuB;AAAA,MAC3B,MAAM,CAAC,WAAW,UAAU,SAAU,CAAC,CAAC,WAAW,UAAU,SAAS,gBAAgB;AAAA,IACxF;AACA,UAAM,mBAAmB,SAAS,MAAM;AAEtC,aAAO,WAAW,UAAU,oBAAoB;AAAA,IAClD,CAAC;AACD;AAAA,MACE;AAAA,MACA,OAAK;AAEH,gBAAQ,QAAQ,KAAK,IAAI,OAAO;AAAA,MAClC;AAAA,MACA;AAAA,QACE,WAAW;AAAA,MACb;AAAA,IACF;AACA,UAAM,gBAAgB,IAAI,WAAW,UAAU,KAAK;AAEpD,UAAM,aAAa,IAAI,EAAE;AAEzB,UAAM,kBAAkB,YAAY;AAClC,UAAI;AACF,YAAI,UAAU,OAAO;AACnB;AAAA,QACF;AACA,YAAI,CAAC,cAAc,OAAO;AACxB,iBAAO,cAAc,SAAS;AAAA,QAChC;AACA,kBAAU,QAAQ;AAClB,cAAM,MAAM,MAAM,mBAAmB;AAAA,UACnC,OAAO,cAAc;AAAA,UACrB,MAAM;AAAA,UACN,MAAM,WAAW,UAAU;AAAA,QAC7B,CAAC;AACD,gBAAQ,IAAI,KAAK,KAAK;AACtB,YAAI,CAAC,IAAI,MAAM;AACb,0BAAgB,SAAS;AACzB,uBAAa,QAAQ,IAAI;AACzB,sBAAY,QAAQ;AACpB,cAAI,QAAa,YAAY,MAAM;AACjC,gBAAI,aAAa,QAAQ,GAAG;AAC1B,2BAAa,QAAQ,aAAa,QAAQ;AAAA,YAC5C,OAAO;AACL,0BAAY,QAAQ;AACpB,2BAAa,QAAQ;AACrB,4BAAc,KAAK;AAAA,YACrB;AAAA,UACF,GAAG,GAAI;AAAA,QACT;AAAA,MACF,SAAS,GAAG;AACV,gBAAQ,IAAI,CAAC;AAAA,MACf,UAAE;AACA,kBAAU,QAAQ;AAAA,MACpB;AAAA,IACF;AAEA,UAAM,cAAc,MAAM;AACxB,oBAAc,QAAQ;AACtB,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,UAAM,sBAAsB,CAAC,SAAkB;AAC7C,UAAI,WAAW,UAAU,oBAAoB,GAAG;AAC9C,eAAO,cAAc,UAAU;AAAA,MACjC;AAEA,UAAI,CAAC,cAAc,OAAO;AACxB,eAAO,cAAc,SAAS;AAAA,MAChC;AAEA,UAAI,CAAC,cAAc,MAAM,SAAS,GAAG,GAAG;AACtC,eAAO,cAAc,YAAY;AAAA,MACnC;AAMA,sBAAgB,QAAQ;AAAA,IAQ1B;AAEA,UAAM,YAAY,YAAY;AAE5B,UAAI,WAAW,UAAU,oBAAoB,GAAG;AAC9C,eAAO,cAAc,UAAU;AAAA,MACjC;AACA,UAAI,CAAC,SAAS,SAAS,CAAC,WAAW,KAAK,SAAS,KAAK,GAAG;AACvD,iBAAS,QAAQ;AACjB,eAAO,cAAc,WAAW;AAAA,MAClC;AACA,UAAI;AACF,cAAM,MAAM,MAAM,aAAa;AAAA,UAC7B,OAAO,cAAc;AAAA,UACrB,WAAW,WAAW;AAAA,UACtB,MAAM,SAAS;AAAA,QACjB,CAAC;AACD,YAAI,CAAC,IAAI,MAAM;AACb,0BAAgB,MAAM;AACtB,qBAAW,MAAM;AACf,mBAAO,KAAK;AAAA,UACd,GAAG,GAAI;AAAA,QACT;AAAA,MACF,SAAS,GAAG;AACV,gBAAQ,IAAI,CAAC;AAAA,MACf,UAAE;AACA,kBAAU,QAAQ;AAClB,wBAAgB,QAAQ;AACxB,iBAAS,QAAQ;AAAA,MACnB;AAAA,IACF;AAEA,UAAM,YAAY,YAAY;AAC5B,UAAI,UAAU;AAAO;AACrB,UAAI,WAAW,UAAU,oBAAoB,GAAG;AAC9C,eAAO,cAAc,UAAU;AAAA,MACjC;AACA,UAAI,CAAC,SAAS,SAAS,CAAC,WAAW,KAAK,SAAS,KAAK,GAAG;AACvD,iBAAS,QAAQ;AACjB,eAAO,cAAc,WAAW;AAAA,MAClC;AACA,UAAI;AACF,cAAM,MAAM,MAAM,eAAe;AAAA,UAC/B,UAAU,cAAc;AAAA,UACxB,cAAc,WAAW;AAAA,UACzB,OAAO,WAAW,UAAU;AAAA,UAC5B,MAAM,SAAS;AAAA,QACjB,CAAC;AACD,YAAI,CAAC,IAAI,MAAM;AACb,0BAAgB,MAAM;AACtB,qBAAW,MAAM;AACf,mBAAO,KAAK;AAAA,UACd,GAAG,GAAI;AAAA,QACT;AAAA,MACF,SAAS,GAAG;AACV,gBAAQ,IAAI,CAAC;AAAA,MACf,UAAE;AACA,kBAAU,QAAQ;AAClB,wBAAgB,QAAQ;AACxB,iBAAS,QAAQ;AAAA,MACnB;AAAA,IACF;AAEA,UAAM,eAAe,SAAS,OAAO;AAAA,MACnC,YAAY,aAAa,QAAQ,SAAS;AAAA,MAC1C,aAAa,aAAa,QAAS,gBAAgB,QAAQ,OAAO,SAAU;AAAA;AAAA,IAE9E,EAAE;AAwDF,cAAU,YAAY;AAEpB,YAAM,UAAU,YAAY;AAC5B,WAAK,KAAK,sBAAsB;AAAA,IAClC,CAAC;AAED,WAAO,CAAC,MAAU,WAAgB;AAChC,YAAM,qBAAqB,kBAAkB,SAAS;AACtD,YAAM,uBAAuB,kBAAkB,WAAW;AAC1D,YAAM,wBAAwB,kBAAkB,YAAY;AAC5D,YAAM,sBAAsB,kBAAkB,UAAU;AACxD,YAAM,wBAAwB,kBAAkB,YAAY;AAC5D,YAAM,wBAAwB,kBAAkB,YAAY;AAE5D,aAAQ,WAAW,GAAG,oBAAoB,OAAO,YAAY;AAAA,QAC3D,aAAa,oBAAoB;AAAA,UAC/B,OAAO,aAAa,MAAM;AAAA,UAC1B,MAAM;AAAA,QACR,GAAG,MAAM,GAAe,CAAC,OAAO,CAAC;AAAA,QACjC,oBAAoB,OAAO,YAAY;AAAA,UACrC,oBAAoB,OAAO,YAAY;AAAA,YACrC,aAAa,sBAAsB;AAAA,cACjC,YAAY,cAAc;AAAA,cAC1B,uBAAuB,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAkB,cAAe,QAAQ;AAAA,cAC3F,aAAa;AAAA,cACb,UAAU,aAAa,SAAS,CAAC,gBAAgB;AAAA,YACnD,GAAG,MAAM,GAAe,CAAC,cAAc,UAAU,CAAC;AAAA,YACjD,CAAC,aAAa,SAAU,gBAAgB,SAAS,aAAa,SAC1D,WAAW,GAAG,aAAa,sBAAsB;AAAA,cAChD,KAAK;AAAA,cACL,YAAY,WAAW;AAAA,cACvB,uBAAuB,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAkB,WAAY,QAAQ;AAAA,cACxF,aAAa;AAAA,YACf,GAAG,aAAa;AAAA,cAAE,GAAG;AAAA;AAAA,YAAgB,GAAG;AAAA,cACrC,qBAAqB,QAClB;AAAA,gBACE,MAAM;AAAA,gBACN,IAAI,SAAS,MAAM;AAAA,kBAChB,CAAC,YAAY,SACT,WAAW,GAAG,oBAAoB,OAAO;AAAA,oBACxC,KAAK;AAAA,oBACL,OAAO;AAAA,oBACP,SAAS;AAAA,kBACX,GAAG,iBAAiB,OAAO,CAAC,MAC3B,WAAW,GAAG;AAAA,oBAAoB;AAAA,oBAAO;AAAA,oBAAY,aAAa,iBAAiB,aAAa,KAAK,IAAI;AAAA,oBAAM;AAAA;AAAA,kBAAY;AAAA,gBAClI,CAAC;AAAA,gBACD,KAAK;AAAA,cACP,IACA;AAAA,YACN,CAAC,GAAG,MAAiC,CAAC,YAAY,CAAC,KACnD,oBAAoB,QAAQ,IAAI;AAAA,YACnC,aAAa,SACT,WAAW,GAAG,aAAa,qBAAqB;AAAA,cAC/C,KAAK;AAAA,cACL,OAAO;AAAA,cACP,QAAQ;AAAA,cACR,OAAO;AAAA,YACT,GAAG;AAAA,cACD,cAAc,SAAS,MAAM;AAAA,gBAC3B,oBAAoB,OAAO,YAAY;AAAA,kBACrC,oBAAoB,yBAA2B;AAAA,kBAC/C,aAAa,uBAAuB;AAAA,oBAClC,YAAY,QAAQ;AAAA,oBACpB,uBAAuB,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAkB,QAAS,QAAQ;AAAA,oBACrF,UAAU,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAgB;AAAC;AAAC,sBAAC,QAAQ,QAAQ,CAAC,QAAQ,OAAS,gBAAgB,QAAQ,MAAQ,UAAU,QAAQ;AAAA,oBAAK;AAAA,oBACjJ,gBAAgB;AAAA,kBAClB,GAAG,MAAM,GAAe,CAAC,YAAY,CAAC;AAAA,kBACtC;AAAA,oBAAoB;AAAA,oBAAQ;AAAA,sBAC1B,OAAO,gBAAgB,CAAC,2BAA2B,QAAQ,QAAQ,KAAK,4BAA4B,CAAC;AAAA,sBACrG,SAAS,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAgB;AAAC;AAAC,wBAAC,gBAAgB,QAAQ,MAAQ,UAAU,QAAQ;AAAA,sBAAK;AAAA,oBAChH;AAAA,oBAAG,iBAAiB,QAAQ,QAAQ,OAAO,IAAI;AAAA,oBAAG;AAAA;AAAA,kBAAmB;AAAA,gBACvE,CAAC;AAAA,cACH,CAAC;AAAA,cACD,GAAG;AAAA;AAAA,YACL,CAAC,KACD,oBAAoB,QAAQ,IAAI;AAAA,YACpC,aAAa,uBAAuB;AAAA,cAClC,MAAM;AAAA,cACN,OAAO;AAAA,cACP,OAAO;AAAA,cACP,SAAS,OAAO,CAAC,MAAM,OAAO,CAAC,IAC7B,MACE,aAAa,QACT,gBAAgB,QACd,oBAAoB,IAAI,IACxB,YAAY,IACd,oBAAoB,IAAI;AAAA,YAElC,GAAG;AAAA,cACD,SAAS,SAAS,MAAM;AAAA,gBACtB;AAAA,kBAAiB,iBAAiB,aAAa,MAAM,WAAW;AAAA,kBAAG;AAAA;AAAA,gBAAY;AAAA,cACjF,CAAC;AAAA,cACD,GAAG;AAAA;AAAA,YACL,CAAC;AAAA,UACH,CAAC;AAAA,UACD,aAAa,uBAAuB;AAAA,YAClC,MAAM,gBAAgB;AAAA,YACtB,iBAAiB,OAAO,EAAE,MAAM,OAAO,EAAE,IAAI,CAAC,WAAkB,gBAAiB,QAAQ;AAAA,YACzF,OAAO;AAAA,YACP,mBAAmB;AAAA,YACnB,OAAO;AAAA,YACP,WAAW;AAAA,YACX,WAAW,OAAO,EAAE,MAAM,OAAO,EAAE,IAAI,MAAO,UAAU,QAAQ,aAAa,IAAI,CAAC,aAAa,QAAQ,UAAU,IAAI,UAAU;AAAA,UACjI,GAAG;AAAA,YACD,SAAS,SAAS,MAAM;AAAA,cACtB,oBAAoB,KAAK;AAAA,gBACvB,OAAO;AAAA,gBACP,SAAS,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,YAAiB,oBAAoB,KAAK,GAAI,UAAU,QAAQ;AAAA,cACtG,CAAC;AAAA,cACD,oBAAoB,OAAO,MAAM;AAAA,gBAC/B,aAAa,sBAAsB;AAAA,kBACjC,YAAY,SAAS;AAAA,kBACrB,uBAAuB,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAkB,SAAU,QAAQ;AAAA,kBACtF,aAAa;AAAA,kBACb,MAAM;AAAA,kBACN,WAAW;AAAA,kBACX,WAAW;AAAA,kBACX,cAAc,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,eAAe,CAAC,WAAiB,aAAa,QAAQ,MAAO,CAAC,MAAM,CAAC;AAAA,kBAC7G,SAAS,OAAO,CAAC,MAAM,OAAO,CAAC,IAAI,CAAC,WAAiB,aAAa,QAAQ;AAAA,gBAC5E,GAAG,MAAM,GAAe,CAAC,YAAY,CAAC;AAAA,gBACtC,oBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA6oB;AAAA,cACnqB,CAAC;AAAA,YACH,CAAC;AAAA,YACD,GAAG;AAAA;AAAA,UACL,GAAG,GAAe,CAAC,MAAM,CAAC;AAAA,UAC1B,oBAAoB,qLAA+L;AAAA,UACnN,oBAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA4lB;AAAA,QAClnB,CAAC;AAAA,MACH,CAAC;AAAA,IACH;AAAA,EACA;AAEA,CAAC;",
        "names": []
      }
    },
    {
      "name": "vite:json",
      "start": 1714699770686,
      "end": 1714699770686,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1714699770686,
      "end": 1714699770686,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "start": 1714699770686,
      "end": 1714699770686,
      "order": "normal"
    },
    {
      "name": "vite:vue-jsx",
      "start": 1714699770686,
      "end": 1714699770686,
      "order": "normal"
    },
    {
      "name": "vite-plugin-vconsole",
      "result": "import { defineComponent as _defineComponent } from \"vue\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-9f1d3ee5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: /* @__PURE__ */ _normalizeClass(`rmb w-100 bg-white`)\n};\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" };\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" };\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n};\nconst _hoisted_5 = { class: \"relative flex_s\" };\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from \"@/apis/user\";\nimport info from \"@/assets/images/common/info.png\";\nimport success from \"@/assets/images/common/success.png\";\nimport { useAuthStore } from \"@/store\";\nimport { showToast } from \"vant\";\nimport { onMounted, ref, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport mitt from \"@/utils/mitt\";\nimport { computed } from \"vue\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"bind_email\",\n  setup(__props) {\n    const checked = ref(false);\n    const setSwitch = ref(false);\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const showInfoToast = (title) => {\n      return showToast({\n        message: title,\n        icon: info\n      });\n    };\n    const switchChange = () => {\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"请输入6位支付密码\");\n      } else {\n        setSwitch.value = false;\n      }\n      let parm = {\n        email: account_email.value,\n        //email\n        // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n        pass: pay_pass.value,\n        //支付密码\n        type: 2,\n        //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n        status: checked.value ? 2 : 1\n      };\n      emailSwitch(parm).then((data) => {\n        if (data.code)\n          return pay_pass.value = \"\";\n        checked.value = !checked.value;\n        pay_pass.value = \"\";\n        showToast({\n          message: \"修改成功\",\n          icon: info\n        });\n      });\n    };\n    const showSuceedToast = (title) => {\n      return showToast({\n        message: title,\n        icon: success\n      });\n    };\n    const isConfirmDialog = ref(false);\n    const pay_pass = ref(\"\");\n    const isLoading = ref(false);\n    const regPayPass = /^[0-9]{6}$/;\n    const showKeyboard = ref(false);\n    const isCountDown = ref(false);\n    const countDownSec = ref(60);\n    const isUpdatingEmail = ref(false);\n    const hasBindEmail = computed(() => !!authStore?.userInfo?.email);\n    const isShowSendCodeButton = computed(\n      () => !authStore?.userInfo?.email || !!authStore?.userInfo?.email && isUpdatingEmail.value\n    );\n    const is_email_sellbuy = computed(() => {\n      return authStore?.userInfo?.is_email_sellbuy || 1;\n    });\n    watch(\n      is_email_sellbuy,\n      (n) => {\n        checked.value = n == 1 ? true : false;\n      },\n      {\n        immediate: true\n      }\n    );\n    const account_email = ref(authStore?.userInfo?.email);\n    const valid_code = ref(\"\");\n    const sendCodeToEmail = async () => {\n      try {\n        if (isLoading.value) {\n          return;\n        }\n        if (!account_email.value) {\n          return showInfoToast(\"请输入邮箱地址\");\n        }\n        isLoading.value = true;\n        const res = await sendCodeToEmailAPI({\n          email: account_email.value,\n          type: 5,\n          uuid: authStore?.userInfo?.uuid\n        });\n        console.log(res, \"res\");\n        if (!res.code) {\n          showSuceedToast(\"验证码发送成功\");\n          countDownSec.value = res.nexttime;\n          isCountDown.value = true;\n          let timer = setInterval(() => {\n            if (countDownSec.value > 0) {\n              countDownSec.value = countDownSec.value - 1;\n            } else {\n              isCountDown.value = false;\n              countDownSec.value = 0;\n              clearInterval(timer);\n            }\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const startUpdate = () => {\n      account_email.value = \"\";\n      isUpdatingEmail.value = true;\n    };\n    const handleConfirmDialog = (open) => {\n      if (authStore?.userInfo?.verified_status !== 1) {\n        return showInfoToast(\"请先完成实名认证\");\n      }\n      if (!account_email.value) {\n        return showInfoToast(\"请输入邮箱地址\");\n      }\n      if (!account_email.value.includes(\"@\")) {\n        return showInfoToast(\"请输入正确的邮箱格式\");\n      }\n      isConfirmDialog.value = open;\n    };\n    const bindEmail = async () => {\n      if (authStore?.userInfo?.verified_status !== 1) {\n        return showInfoToast(\"请先完成实名认证\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"请输入6位支付密码\");\n      }\n      try {\n        const res = await bindEmailAPI({\n          email: account_email.value,\n          emailcode: valid_code.value,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"绑定成功\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const editEmail = async () => {\n      if (isLoading.value)\n        return;\n      if (authStore?.userInfo?.verified_status !== 1) {\n        return showInfoToast(\"请先完成实名认证\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"请输入6位支付密码\");\n      }\n      try {\n        const res = await updateEmailAPI({\n          newemail: account_email.value,\n          newemailcode: valid_code.value,\n          email: authStore?.userInfo?.email,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"编辑成功\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const templateText = computed(() => ({\n      page_title: hasBindEmail.value ? \"修改邮箱\" : \"邮箱绑定\",\n      button_text: hasBindEmail.value ? isUpdatingEmail.value ? \"保存\" : \"修改邮箱\" : \"确认\"\n      // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n    }));\n    onMounted(async () => {\n      await authStore.getUserInfo();\n      mitt.emit(\"number-keyboard-show\");\n    });\n    return (_ctx, _cache) => {\n      const _component_nav_bar = _resolveComponent(\"nav-bar\");\n      const _component_van_field = _resolveComponent(\"van-field\");\n      const _component_van_switch = _resolveComponent(\"van-switch\");\n      const _component_van_cell = _resolveComponent(\"van-cell\");\n      const _component_van_button = _resolveComponent(\"van-button\");\n      const _component_van_dialog = _resolveComponent(\"van-dialog\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_nav_bar, {\n          title: templateText.value.page_title,\n          mode: `transparent`\n        }, null, 8, [\"title\"]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_van_field, {\n              modelValue: account_email.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => account_email.value = $event),\n              placeholder: \"请输入邮箱地址\",\n              disabled: hasBindEmail.value && !isUpdatingEmail.value\n            }, null, 8, [\"modelValue\", \"disabled\"]),\n            !hasBindEmail.value || isUpdatingEmail.value && hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => valid_code.value = $event),\n              placeholder: \"请输入邮箱验证码\"\n            }, _createSlots({\n              _: 2\n              /* DYNAMIC */\n            }, [\n              isShowSendCodeButton.value ? {\n                name: \"button\",\n                fn: _withCtx(() => [\n                  !isCountDown.value ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                    onClick: sendCodeToEmail\n                  }, _toDisplayString(\"发送验证码\"))) : (_openBlock(), _createElementBlock(\n                    \"div\",\n                    _hoisted_4,\n                    \" 已发送验证码 \" + _toDisplayString(countDownSec.value) + \"s \",\n                    1\n                    /* TEXT */\n                  ))\n                ]),\n                key: \"0\"\n              } : void 0\n            ]), 1032, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true),\n            hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"是否接收买卖币邮箱通知\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(' inactive-color=\"#fff\" '),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => checked.value = $event),\n                    onChange: _cache[3] || (_cache[3] = ($event) => {\n                      ;\n                      checked.value = !checked.value, isConfirmDialog.value = true, setSwitch.value = true;\n                    }),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8, [\"modelValue\"]),\n                  _createElementVNode(\n                    \"span\",\n                    {\n                      class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? \"\" : \"!text-[#ccc] !left-[45px] \"]),\n                      onClick: _cache[4] || (_cache[4] = ($event) => {\n                        ;\n                        isConfirmDialog.value = true, setSwitch.value = true;\n                      })\n                    },\n                    _toDisplayString(checked.value ? \"开启\" : \"关闭\"),\n                    3\n                    /* TEXT, CLASS */\n                  )\n                ])\n              ]),\n              _: 1\n              /* STABLE */\n            })) : _createCommentVNode(\"v-if\", true),\n            _createVNode(_component_van_button, {\n              size: \"large\",\n              class: \"!fixed bottom-[60px] !w-[650px]\",\n              color: \"var(--van-button-primary-background)\",\n              onClick: _cache[5] || (_cache[5] = () => hasBindEmail.value ? isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate() : handleConfirmDialog(true))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\n                  _toDisplayString(templateText.value.button_text),\n                  1\n                  /* TEXT */\n                )\n              ]),\n              _: 1\n              /* STABLE */\n            })\n          ]),\n          _createVNode(_component_van_dialog, {\n            show: isConfirmDialog.value,\n            \"onUpdate:show\": _cache[10] || (_cache[10] = ($event) => isConfirmDialog.value = $event),\n            title: \"身份验证\",\n            confirmButtonText: \"提交\",\n            theme: \"round-button\",\n            className: \"dialog-bulletin\",\n            onConfirm: _cache[11] || (_cache[11] = () => setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail())\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"i\", {\n                class: \"icon-close close-dark block\",\n                onClick: _cache[6] || (_cache[6] = ($event) => (handleConfirmDialog(false), setSwitch.value = false))\n              }),\n              _createElementVNode(\"div\", null, [\n                _createVNode(_component_van_field, {\n                  modelValue: pay_pass.value,\n                  \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => pay_pass.value = $event),\n                  placeholder: \"请输入支付密码\",\n                  type: \"number\",\n                  maxlength: 6,\n                  clickable: \"\",\n                  onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event) => showKeyboard.value = true, [\"stop\"])),\n                  onFocus: _cache[9] || (_cache[9] = ($event) => showKeyboard.value = true)\n                }, null, 8, [\"modelValue\"]),\n                _createCommentVNode(` <van-field\n            v-if=\"checked && setSwitch\"\n            v-model=\"valid_code\"\n            placeholder=\"请输入邮箱验证码\"\n          >\n            <template #button>\n              <div\n                v-if=\"!isCountDown\"\n                class=\"text-[var(--van-button-primary-background)] cursor-pointer\"\n                @click=\"sendCodeToEmail\"\n              >\n                {{ '发送验证码' }}\n              </div>\n              <div\n                v-else\n                class=\"text-[#787f8c]\"\n              >\n                已发送验证码 {{ countDownSec }}s\n              </div>\n            </template>\n          </van-field> `)\n              ])\n            ]),\n            _: 1\n            /* STABLE */\n          }, 8, [\"show\"]),\n          _createCommentVNode(' <van-number-keyboard\\n        v-model=\"pay_pass\"\\n        :show=\"showKeyboard\"\\n        :maxlength=\"6\"\\n        @blur=\"showKeyboard = false\"\\n        class=\"!z-[3000]\"\\n      /> '),\n          _createCommentVNode(` <van-dialog v-model:show=\"dialogContent.show\" :title=\"dialogContent.title\" theme=\"round-button\"\n        :className=\"['dialog-deal']\" :confirmButtonText=\"dialogContent.confirmButtonText\" @confirm=\"onConfirm\">\n        <i class=\"icon-close block close-dark\" @click=\"onClose\"></i>\n        <div class=\"flex flex-col items-center justify-between\">\n          <img :src=\"dialogContent.img\" :class=\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\" />\n          <div class=\"content text-center\">{{ dialogContent.content }}</div>\n        </div>\n      </van-dialog> `)\n        ])\n      ]);\n    };\n  }\n});\n",
      "start": 1714699770686,
      "end": 1714699770686,
      "order": "normal",
      "sourcemaps": null
    },
    {
      "name": "esbuild",
      "result": "\"use strict\";\nimport { defineComponent as _defineComponent } from \"vue\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-9f1d3ee5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: /* @__PURE__ */ _normalizeClass(`rmb w-100 bg-white`)\n};\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" };\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" };\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n};\nconst _hoisted_5 = { class: \"relative flex_s\" };\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from \"@/apis/user\";\nimport info from \"@/assets/images/common/info.png\";\nimport success from \"@/assets/images/common/success.png\";\nimport { useAuthStore } from \"@/store\";\nimport { showToast } from \"vant\";\nimport { onMounted, ref, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport mitt from \"@/utils/mitt\";\nimport { computed } from \"vue\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"bind_email\",\n  setup(__props) {\n    var _a;\n    const checked = ref(false);\n    const setSwitch = ref(false);\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const showInfoToast = (title) => {\n      return showToast({\n        message: title,\n        icon: info\n      });\n    };\n    const switchChange = () => {\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      } else {\n        setSwitch.value = false;\n      }\n      let parm = {\n        email: account_email.value,\n        //email\n        // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n        pass: pay_pass.value,\n        //支付密码\n        type: 2,\n        //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n        status: checked.value ? 2 : 1\n      };\n      emailSwitch(parm).then((data) => {\n        if (data.code)\n          return pay_pass.value = \"\";\n        checked.value = !checked.value;\n        pay_pass.value = \"\";\n        showToast({\n          message: \"\\u4FEE\\u6539\\u6210\\u529F\",\n          icon: info\n        });\n      });\n    };\n    const showSuceedToast = (title) => {\n      return showToast({\n        message: title,\n        icon: success\n      });\n    };\n    const isConfirmDialog = ref(false);\n    const pay_pass = ref(\"\");\n    const isLoading = ref(false);\n    const regPayPass = /^[0-9]{6}$/;\n    const showKeyboard = ref(false);\n    const isCountDown = ref(false);\n    const countDownSec = ref(60);\n    const isUpdatingEmail = ref(false);\n    const hasBindEmail = computed(() => {\n      var _a2;\n      return !!((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.email);\n    });\n    const isShowSendCodeButton = computed(\n      () => {\n        var _a2, _b;\n        return !((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.email) || !!((_b = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _b.email) && isUpdatingEmail.value;\n      }\n    );\n    const is_email_sellbuy = computed(() => {\n      var _a2;\n      return ((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.is_email_sellbuy) || 1;\n    });\n    watch(\n      is_email_sellbuy,\n      (n) => {\n        checked.value = n == 1 ? true : false;\n      },\n      {\n        immediate: true\n      }\n    );\n    const account_email = ref((_a = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a.email);\n    const valid_code = ref(\"\");\n    const sendCodeToEmail = async () => {\n      var _a2;\n      try {\n        if (isLoading.value) {\n          return;\n        }\n        if (!account_email.value) {\n          return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\");\n        }\n        isLoading.value = true;\n        const res = await sendCodeToEmailAPI({\n          email: account_email.value,\n          type: 5,\n          uuid: (_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.uuid\n        });\n        console.log(res, \"res\");\n        if (!res.code) {\n          showSuceedToast(\"\\u9A8C\\u8BC1\\u7801\\u53D1\\u9001\\u6210\\u529F\");\n          countDownSec.value = res.nexttime;\n          isCountDown.value = true;\n          let timer = setInterval(() => {\n            if (countDownSec.value > 0) {\n              countDownSec.value = countDownSec.value - 1;\n            } else {\n              isCountDown.value = false;\n              countDownSec.value = 0;\n              clearInterval(timer);\n            }\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const startUpdate = () => {\n      account_email.value = \"\";\n      isUpdatingEmail.value = true;\n    };\n    const handleConfirmDialog = (open) => {\n      var _a2;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!account_email.value) {\n        return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\");\n      }\n      if (!account_email.value.includes(\"@\")) {\n        return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u90AE\\u7BB1\\u683C\\u5F0F\");\n      }\n      isConfirmDialog.value = open;\n    };\n    const bindEmail = async () => {\n      var _a2;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      }\n      try {\n        const res = await bindEmailAPI({\n          email: account_email.value,\n          emailcode: valid_code.value,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"\\u7ED1\\u5B9A\\u6210\\u529F\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const editEmail = async () => {\n      var _a2, _b;\n      if (isLoading.value)\n        return;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      }\n      try {\n        const res = await updateEmailAPI({\n          newemail: account_email.value,\n          newemailcode: valid_code.value,\n          email: (_b = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _b.email,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"\\u7F16\\u8F91\\u6210\\u529F\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const templateText = computed(() => ({\n      page_title: hasBindEmail.value ? \"\\u4FEE\\u6539\\u90AE\\u7BB1\" : \"\\u90AE\\u7BB1\\u7ED1\\u5B9A\",\n      button_text: hasBindEmail.value ? isUpdatingEmail.value ? \"\\u4FDD\\u5B58\" : \"\\u4FEE\\u6539\\u90AE\\u7BB1\" : \"\\u786E\\u8BA4\"\n      // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n    }));\n    onMounted(async () => {\n      await authStore.getUserInfo();\n      mitt.emit(\"number-keyboard-show\");\n    });\n    return (_ctx, _cache) => {\n      const _component_nav_bar = _resolveComponent(\"nav-bar\");\n      const _component_van_field = _resolveComponent(\"van-field\");\n      const _component_van_switch = _resolveComponent(\"van-switch\");\n      const _component_van_cell = _resolveComponent(\"van-cell\");\n      const _component_van_button = _resolveComponent(\"van-button\");\n      const _component_van_dialog = _resolveComponent(\"van-dialog\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_nav_bar, {\n          title: templateText.value.page_title,\n          mode: `transparent`\n        }, null, 8, [\"title\"]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_van_field, {\n              modelValue: account_email.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => account_email.value = $event),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",\n              disabled: hasBindEmail.value && !isUpdatingEmail.value\n            }, null, 8, [\"modelValue\", \"disabled\"]),\n            !hasBindEmail.value || isUpdatingEmail.value && hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => valid_code.value = $event),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\"\n            }, _createSlots({\n              _: 2\n              /* DYNAMIC */\n            }, [\n              isShowSendCodeButton.value ? {\n                name: \"button\",\n                fn: _withCtx(() => [\n                  !isCountDown.value ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                    onClick: sendCodeToEmail\n                  }, _toDisplayString(\"\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801\"))) : (_openBlock(), _createElementBlock(\n                    \"div\",\n                    _hoisted_4,\n                    \" \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 \" + _toDisplayString(countDownSec.value) + \"s \",\n                    1\n                    /* TEXT */\n                  ))\n                ]),\n                key: \"0\"\n              } : void 0\n            ]), 1032, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true),\n            hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"\\u662F\\u5426\\u63A5\\u6536\\u4E70\\u5356\\u5E01\\u90AE\\u7BB1\\u901A\\u77E5\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(' inactive-color=\"#fff\" '),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => checked.value = $event),\n                    onChange: _cache[3] || (_cache[3] = ($event) => {\n                      ;\n                      checked.value = !checked.value, isConfirmDialog.value = true, setSwitch.value = true;\n                    }),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8, [\"modelValue\"]),\n                  _createElementVNode(\n                    \"span\",\n                    {\n                      class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? \"\" : \"!text-[#ccc] !left-[45px] \"]),\n                      onClick: _cache[4] || (_cache[4] = ($event) => {\n                        ;\n                        isConfirmDialog.value = true, setSwitch.value = true;\n                      })\n                    },\n                    _toDisplayString(checked.value ? \"\\u5F00\\u542F\" : \"\\u5173\\u95ED\"),\n                    3\n                    /* TEXT, CLASS */\n                  )\n                ])\n              ]),\n              _: 1\n              /* STABLE */\n            })) : _createCommentVNode(\"v-if\", true),\n            _createVNode(_component_van_button, {\n              size: \"large\",\n              class: \"!fixed bottom-[60px] !w-[650px]\",\n              color: \"var(--van-button-primary-background)\",\n              onClick: _cache[5] || (_cache[5] = () => hasBindEmail.value ? isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate() : handleConfirmDialog(true))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\n                  _toDisplayString(templateText.value.button_text),\n                  1\n                  /* TEXT */\n                )\n              ]),\n              _: 1\n              /* STABLE */\n            })\n          ]),\n          _createVNode(_component_van_dialog, {\n            show: isConfirmDialog.value,\n            \"onUpdate:show\": _cache[10] || (_cache[10] = ($event) => isConfirmDialog.value = $event),\n            title: \"\\u8EAB\\u4EFD\\u9A8C\\u8BC1\",\n            confirmButtonText: \"\\u63D0\\u4EA4\",\n            theme: \"round-button\",\n            className: \"dialog-bulletin\",\n            onConfirm: _cache[11] || (_cache[11] = () => setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail())\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"i\", {\n                class: \"icon-close close-dark block\",\n                onClick: _cache[6] || (_cache[6] = ($event) => (handleConfirmDialog(false), setSwitch.value = false))\n              }),\n              _createElementVNode(\"div\", null, [\n                _createVNode(_component_van_field, {\n                  modelValue: pay_pass.value,\n                  \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => pay_pass.value = $event),\n                  placeholder: \"\\u8BF7\\u8F93\\u5165\\u652F\\u4ED8\\u5BC6\\u7801\",\n                  type: \"number\",\n                  maxlength: 6,\n                  clickable: \"\",\n                  onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event) => showKeyboard.value = true, [\"stop\"])),\n                  onFocus: _cache[9] || (_cache[9] = ($event) => showKeyboard.value = true)\n                }, null, 8, [\"modelValue\"]),\n                _createCommentVNode(` <van-field\n            v-if=\"checked && setSwitch\"\n            v-model=\"valid_code\"\n            placeholder=\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\"\n          >\n            <template #button>\n              <div\n                v-if=\"!isCountDown\"\n                class=\"text-[var(--van-button-primary-background)] cursor-pointer\"\n                @click=\"sendCodeToEmail\"\n              >\n                {{ '\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801' }}\n              </div>\n              <div\n                v-else\n                class=\"text-[#787f8c]\"\n              >\n                \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 {{ countDownSec }}s\n              </div>\n            </template>\n          </van-field> `)\n              ])\n            ]),\n            _: 1\n            /* STABLE */\n          }, 8, [\"show\"]),\n          _createCommentVNode(' <van-number-keyboard\\n        v-model=\"pay_pass\"\\n        :show=\"showKeyboard\"\\n        :maxlength=\"6\"\\n        @blur=\"showKeyboard = false\"\\n        class=\"!z-[3000]\"\\n      /> '),\n          _createCommentVNode(` <van-dialog v-model:show=\"dialogContent.show\" :title=\"dialogContent.title\" theme=\"round-button\"\n        :className=\"['dialog-deal']\" :confirmButtonText=\"dialogContent.confirmButtonText\" @confirm=\"onConfirm\">\n        <i class=\"icon-close block close-dark\" @click=\"onClose\"></i>\n        <div class=\"flex flex-col items-center justify-between\">\n          <img :src=\"dialogContent.img\" :class=\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\" />\n          <div class=\"content text-center\">{{ dialogContent.content }}</div>\n        </div>\n      </van-dialog> `)\n        ])\n      ]);\n    };\n  }\n});\n",
      "start": 1714699770686,
      "end": 1714699771044,
      "order": "normal",
      "sourcemaps": "{\n  \"version\": 3,\n  \"sources\": [\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Mine/bind_email.vue?vue&type=script&setup=true&lang.ts\"],\n  \"sourcesContent\": [\"import { defineComponent as _defineComponent } from \\\"vue\\\";\\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \\\"vue\\\";\\nconst _withScopeId = (n) => (_pushScopeId(\\\"data-v-9f1d3ee5\\\"), n = n(), _popScopeId(), n);\\nconst _hoisted_1 = {\\n  class: /* @__PURE__ */ _normalizeClass(`rmb w-100 bg-white`)\\n};\\nconst _hoisted_2 = { class: \\\"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\\\" };\\nconst _hoisted_3 = { class: \\\"bg-[#fff] flex items-center flex-wrap justify-center\\\" };\\nconst _hoisted_4 = {\\n  key: 1,\\n  class: \\\"text-[#787f8c]\\\"\\n};\\nconst _hoisted_5 = { class: \\\"relative flex_s\\\" };\\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from \\\"@/apis/user\\\";\\nimport info from \\\"@/assets/images/common/info.png\\\";\\nimport success from \\\"@/assets/images/common/success.png\\\";\\nimport { useAuthStore } from \\\"@/store\\\";\\nimport { showToast } from \\\"vant\\\";\\nimport { onMounted, ref, watch } from \\\"vue\\\";\\nimport { useRouter } from \\\"vue-router\\\";\\nimport mitt from \\\"@/utils/mitt\\\";\\nimport { computed } from \\\"vue\\\";\\nexport default /* @__PURE__ */ _defineComponent({\\n  __name: \\\"bind_email\\\",\\n  setup(__props) {\\n    const checked = ref(false);\\n    const setSwitch = ref(false);\\n    const router = useRouter();\\n    const authStore = useAuthStore();\\n    const showInfoToast = (title) => {\\n      return showToast({\\n        message: title,\\n        icon: info\\n      });\\n    };\\n    const switchChange = () => {\\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\\n        pay_pass.value = \\\"\\\";\\n        return showInfoToast(\\\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\\\");\\n      } else {\\n        setSwitch.value = false;\\n      }\\n      let parm = {\\n        email: account_email.value,\\n        //email\\n        // emailcode: valid_code.value, //\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801[\\u53D1\\u9001type=6]\\n        pass: pay_pass.value,\\n        //\\u652F\\u4ED8\\u5BC6\\u7801\\n        type: 2,\\n        //\\t\\u5F00\\u5173\\u7C7B\\u578B\\uFF1A 1\\u5B89\\u5168\\u9A8C\\u8BC1\\u5F00\\u51732\\u4E70\\u5356\\u5E01\\u4EA4\\u6613\\u901A\\u77E5\\u90AE\\u4EF6\\u5F00\\u5173\\n        status: checked.value ? 2 : 1\\n      };\\n      emailSwitch(parm).then((data) => {\\n        if (data.code)\\n          return pay_pass.value = \\\"\\\";\\n        checked.value = !checked.value;\\n        pay_pass.value = \\\"\\\";\\n        showToast({\\n          message: \\\"\\u4FEE\\u6539\\u6210\\u529F\\\",\\n          icon: info\\n        });\\n      });\\n    };\\n    const showSuceedToast = (title) => {\\n      return showToast({\\n        message: title,\\n        icon: success\\n      });\\n    };\\n    const isConfirmDialog = ref(false);\\n    const pay_pass = ref(\\\"\\\");\\n    const isLoading = ref(false);\\n    const regPayPass = /^[0-9]{6}$/;\\n    const showKeyboard = ref(false);\\n    const isCountDown = ref(false);\\n    const countDownSec = ref(60);\\n    const isUpdatingEmail = ref(false);\\n    const hasBindEmail = computed(() => !!authStore?.userInfo?.email);\\n    const isShowSendCodeButton = computed(\\n      () => !authStore?.userInfo?.email || !!authStore?.userInfo?.email && isUpdatingEmail.value\\n    );\\n    const is_email_sellbuy = computed(() => {\\n      return authStore?.userInfo?.is_email_sellbuy || 1;\\n    });\\n    watch(\\n      is_email_sellbuy,\\n      (n) => {\\n        checked.value = n == 1 ? true : false;\\n      },\\n      {\\n        immediate: true\\n      }\\n    );\\n    const account_email = ref(authStore?.userInfo?.email);\\n    const valid_code = ref(\\\"\\\");\\n    const sendCodeToEmail = async () => {\\n      try {\\n        if (isLoading.value) {\\n          return;\\n        }\\n        if (!account_email.value) {\\n          return showInfoToast(\\\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\\\");\\n        }\\n        isLoading.value = true;\\n        const res = await sendCodeToEmailAPI({\\n          email: account_email.value,\\n          type: 5,\\n          uuid: authStore?.userInfo?.uuid\\n        });\\n        console.log(res, \\\"res\\\");\\n        if (!res.code) {\\n          showSuceedToast(\\\"\\u9A8C\\u8BC1\\u7801\\u53D1\\u9001\\u6210\\u529F\\\");\\n          countDownSec.value = res.nexttime;\\n          isCountDown.value = true;\\n          let timer = setInterval(() => {\\n            if (countDownSec.value > 0) {\\n              countDownSec.value = countDownSec.value - 1;\\n            } else {\\n              isCountDown.value = false;\\n              countDownSec.value = 0;\\n              clearInterval(timer);\\n            }\\n          }, 1e3);\\n        }\\n      } catch (e) {\\n        console.log(e);\\n      } finally {\\n        isLoading.value = false;\\n      }\\n    };\\n    const startUpdate = () => {\\n      account_email.value = \\\"\\\";\\n      isUpdatingEmail.value = true;\\n    };\\n    const handleConfirmDialog = (open) => {\\n      if (authStore?.userInfo?.verified_status !== 1) {\\n        return showInfoToast(\\\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\\\");\\n      }\\n      if (!account_email.value) {\\n        return showInfoToast(\\\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\\\");\\n      }\\n      if (!account_email.value.includes(\\\"@\\\")) {\\n        return showInfoToast(\\\"\\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u90AE\\u7BB1\\u683C\\u5F0F\\\");\\n      }\\n      isConfirmDialog.value = open;\\n    };\\n    const bindEmail = async () => {\\n      if (authStore?.userInfo?.verified_status !== 1) {\\n        return showInfoToast(\\\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\\\");\\n      }\\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\\n        pay_pass.value = \\\"\\\";\\n        return showInfoToast(\\\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\\\");\\n      }\\n      try {\\n        const res = await bindEmailAPI({\\n          email: account_email.value,\\n          emailcode: valid_code.value,\\n          pass: pay_pass.value\\n        });\\n        if (!res.code) {\\n          showSuceedToast(\\\"\\u7ED1\\u5B9A\\u6210\\u529F\\\");\\n          setTimeout(() => {\\n            router.back();\\n          }, 1e3);\\n        }\\n      } catch (e) {\\n        console.log(e);\\n      } finally {\\n        isLoading.value = false;\\n        isConfirmDialog.value = false;\\n        pay_pass.value = \\\"\\\";\\n      }\\n    };\\n    const editEmail = async () => {\\n      if (isLoading.value)\\n        return;\\n      if (authStore?.userInfo?.verified_status !== 1) {\\n        return showInfoToast(\\\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\\\");\\n      }\\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\\n        pay_pass.value = \\\"\\\";\\n        return showInfoToast(\\\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\\\");\\n      }\\n      try {\\n        const res = await updateEmailAPI({\\n          newemail: account_email.value,\\n          newemailcode: valid_code.value,\\n          email: authStore?.userInfo?.email,\\n          pass: pay_pass.value\\n        });\\n        if (!res.code) {\\n          showSuceedToast(\\\"\\u7F16\\u8F91\\u6210\\u529F\\\");\\n          setTimeout(() => {\\n            router.back();\\n          }, 1e3);\\n        }\\n      } catch (e) {\\n        console.log(e);\\n      } finally {\\n        isLoading.value = false;\\n        isConfirmDialog.value = false;\\n        pay_pass.value = \\\"\\\";\\n      }\\n    };\\n    const templateText = computed(() => ({\\n      page_title: hasBindEmail.value ? \\\"\\u4FEE\\u6539\\u90AE\\u7BB1\\\" : \\\"\\u90AE\\u7BB1\\u7ED1\\u5B9A\\\",\\n      button_text: hasBindEmail.value ? isUpdatingEmail.value ? \\\"\\u4FDD\\u5B58\\\" : \\\"\\u4FEE\\u6539\\u90AE\\u7BB1\\\" : \\\"\\u786E\\u8BA4\\\"\\n      // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\\n    }));\\n    onMounted(async () => {\\n      await authStore.getUserInfo();\\n      mitt.emit(\\\"number-keyboard-show\\\");\\n    });\\n    return (_ctx, _cache) => {\\n      const _component_nav_bar = _resolveComponent(\\\"nav-bar\\\");\\n      const _component_van_field = _resolveComponent(\\\"van-field\\\");\\n      const _component_van_switch = _resolveComponent(\\\"van-switch\\\");\\n      const _component_van_cell = _resolveComponent(\\\"van-cell\\\");\\n      const _component_van_button = _resolveComponent(\\\"van-button\\\");\\n      const _component_van_dialog = _resolveComponent(\\\"van-dialog\\\");\\n      return _openBlock(), _createElementBlock(\\\"div\\\", _hoisted_1, [\\n        _createVNode(_component_nav_bar, {\\n          title: templateText.value.page_title,\\n          mode: `transparent`\\n        }, null, 8, [\\\"title\\\"]),\\n        _createElementVNode(\\\"div\\\", _hoisted_2, [\\n          _createElementVNode(\\\"div\\\", _hoisted_3, [\\n            _createVNode(_component_van_field, {\\n              modelValue: account_email.value,\\n              \\\"onUpdate:modelValue\\\": _cache[0] || (_cache[0] = ($event) => account_email.value = $event),\\n              placeholder: \\\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\\\",\\n              disabled: hasBindEmail.value && !isUpdatingEmail.value\\n            }, null, 8, [\\\"modelValue\\\", \\\"disabled\\\"]),\\n            !hasBindEmail.value || isUpdatingEmail.value && hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_field, {\\n              key: 0,\\n              modelValue: valid_code.value,\\n              \\\"onUpdate:modelValue\\\": _cache[1] || (_cache[1] = ($event) => valid_code.value = $event),\\n              placeholder: \\\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\\\"\\n            }, _createSlots({\\n              _: 2\\n              /* DYNAMIC */\\n            }, [\\n              isShowSendCodeButton.value ? {\\n                name: \\\"button\\\",\\n                fn: _withCtx(() => [\\n                  !isCountDown.value ? (_openBlock(), _createElementBlock(\\\"div\\\", {\\n                    key: 0,\\n                    class: \\\"text-[var(--van-button-primary-background)] cursor-pointer\\\",\\n                    onClick: sendCodeToEmail\\n                  }, _toDisplayString(\\\"\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801\\\"))) : (_openBlock(), _createElementBlock(\\n                    \\\"div\\\",\\n                    _hoisted_4,\\n                    \\\" \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 \\\" + _toDisplayString(countDownSec.value) + \\\"s \\\",\\n                    1\\n                    /* TEXT */\\n                  ))\\n                ]),\\n                key: \\\"0\\\"\\n              } : void 0\\n            ]), 1032, [\\\"modelValue\\\"])) : _createCommentVNode(\\\"v-if\\\", true),\\n            hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_cell, {\\n              key: 1,\\n              class: \\\"mb-[20px]\\\",\\n              center: \\\"\\\",\\n              title: \\\"\\u662F\\u5426\\u63A5\\u6536\\u4E70\\u5356\\u5E01\\u90AE\\u7BB1\\u901A\\u77E5\\\"\\n            }, {\\n              \\\"right-icon\\\": _withCtx(() => [\\n                _createElementVNode(\\\"div\\\", _hoisted_5, [\\n                  _createCommentVNode(' inactive-color=\\\"#fff\\\" '),\\n                  _createVNode(_component_van_switch, {\\n                    modelValue: checked.value,\\n                    \\\"onUpdate:modelValue\\\": _cache[2] || (_cache[2] = ($event) => checked.value = $event),\\n                    onChange: _cache[3] || (_cache[3] = ($event) => {\\n                      ;\\n                      checked.value = !checked.value, isConfirmDialog.value = true, setSwitch.value = true;\\n                    }),\\n                    \\\"active-color\\\": \\\"#49ae74\\\"\\n                  }, null, 8, [\\\"modelValue\\\"]),\\n                  _createElementVNode(\\n                    \\\"span\\\",\\n                    {\\n                      class: _normalizeClass([\\\"text-[#fff] text_switch\\\", checked.value ? \\\"\\\" : \\\"!text-[#ccc] !left-[45px] \\\"]),\\n                      onClick: _cache[4] || (_cache[4] = ($event) => {\\n                        ;\\n                        isConfirmDialog.value = true, setSwitch.value = true;\\n                      })\\n                    },\\n                    _toDisplayString(checked.value ? \\\"\\u5F00\\u542F\\\" : \\\"\\u5173\\u95ED\\\"),\\n                    3\\n                    /* TEXT, CLASS */\\n                  )\\n                ])\\n              ]),\\n              _: 1\\n              /* STABLE */\\n            })) : _createCommentVNode(\\\"v-if\\\", true),\\n            _createVNode(_component_van_button, {\\n              size: \\\"large\\\",\\n              class: \\\"!fixed bottom-[60px] !w-[650px]\\\",\\n              color: \\\"var(--van-button-primary-background)\\\",\\n              onClick: _cache[5] || (_cache[5] = () => hasBindEmail.value ? isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate() : handleConfirmDialog(true))\\n            }, {\\n              default: _withCtx(() => [\\n                _createTextVNode(\\n                  _toDisplayString(templateText.value.button_text),\\n                  1\\n                  /* TEXT */\\n                )\\n              ]),\\n              _: 1\\n              /* STABLE */\\n            })\\n          ]),\\n          _createVNode(_component_van_dialog, {\\n            show: isConfirmDialog.value,\\n            \\\"onUpdate:show\\\": _cache[10] || (_cache[10] = ($event) => isConfirmDialog.value = $event),\\n            title: \\\"\\u8EAB\\u4EFD\\u9A8C\\u8BC1\\\",\\n            confirmButtonText: \\\"\\u63D0\\u4EA4\\\",\\n            theme: \\\"round-button\\\",\\n            className: \\\"dialog-bulletin\\\",\\n            onConfirm: _cache[11] || (_cache[11] = () => setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail())\\n          }, {\\n            default: _withCtx(() => [\\n              _createElementVNode(\\\"i\\\", {\\n                class: \\\"icon-close close-dark block\\\",\\n                onClick: _cache[6] || (_cache[6] = ($event) => (handleConfirmDialog(false), setSwitch.value = false))\\n              }),\\n              _createElementVNode(\\\"div\\\", null, [\\n                _createVNode(_component_van_field, {\\n                  modelValue: pay_pass.value,\\n                  \\\"onUpdate:modelValue\\\": _cache[7] || (_cache[7] = ($event) => pay_pass.value = $event),\\n                  placeholder: \\\"\\u8BF7\\u8F93\\u5165\\u652F\\u4ED8\\u5BC6\\u7801\\\",\\n                  type: \\\"number\\\",\\n                  maxlength: 6,\\n                  clickable: \\\"\\\",\\n                  onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event) => showKeyboard.value = true, [\\\"stop\\\"])),\\n                  onFocus: _cache[9] || (_cache[9] = ($event) => showKeyboard.value = true)\\n                }, null, 8, [\\\"modelValue\\\"]),\\n                _createCommentVNode(` <van-field\\n            v-if=\\\"checked && setSwitch\\\"\\n            v-model=\\\"valid_code\\\"\\n            placeholder=\\\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\\\"\\n          >\\n            <template #button>\\n              <div\\n                v-if=\\\"!isCountDown\\\"\\n                class=\\\"text-[var(--van-button-primary-background)] cursor-pointer\\\"\\n                @click=\\\"sendCodeToEmail\\\"\\n              >\\n                {{ '\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801' }}\\n              </div>\\n              <div\\n                v-else\\n                class=\\\"text-[#787f8c]\\\"\\n              >\\n                \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 {{ countDownSec }}s\\n              </div>\\n            </template>\\n          </van-field> `)\\n              ])\\n            ]),\\n            _: 1\\n            /* STABLE */\\n          }, 8, [\\\"show\\\"]),\\n          _createCommentVNode(' <van-number-keyboard\\\\n        v-model=\\\"pay_pass\\\"\\\\n        :show=\\\"showKeyboard\\\"\\\\n        :maxlength=\\\"6\\\"\\\\n        @blur=\\\"showKeyboard = false\\\"\\\\n        class=\\\"!z-[3000]\\\"\\\\n      /> '),\\n          _createCommentVNode(` <van-dialog v-model:show=\\\"dialogContent.show\\\" :title=\\\"dialogContent.title\\\" theme=\\\"round-button\\\"\\n        :className=\\\"['dialog-deal']\\\" :confirmButtonText=\\\"dialogContent.confirmButtonText\\\" @confirm=\\\"onConfirm\\\">\\n        <i class=\\\"icon-close block close-dark\\\" @click=\\\"onClose\\\"></i>\\n        <div class=\\\"flex flex-col items-center justify-between\\\">\\n          <img :src=\\\"dialogContent.img\\\" :class=\\\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\\\" />\\n          <div class=\\\"content text-center\\\">{{ dialogContent.content }}</div>\\n        </div>\\n      </van-dialog> `)\\n        ])\\n      ]);\\n    };\\n  }\\n});\\n\"],\n  \"mappings\": \"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\",\n  \"names\": [\"_a\"]\n}\n"
    },
    {
      "name": "vite:define",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1714699771044,
      "end": 1714699771044,
      "order": "normal"
    },
    {
      "name": "unplugin-auto-import",
      "start": 1714699771044,
      "end": 1714699771046,
      "order": "post"
    },
    {
      "name": "unplugin-vue-components",
      "result": "/* unplugin-vue-components disabled */import { Dialog as __unplugin_components_5 } from 'vant/es';import 'vant/es/dialog/style/index';\nimport { Button as __unplugin_components_4 } from 'vant/es';import 'vant/es/button/style/index';\nimport { Cell as __unplugin_components_3 } from 'vant/es';import 'vant/es/cell/style/index';\nimport { Switch as __unplugin_components_2 } from 'vant/es';import 'vant/es/switch/style/index';\nimport { Field as __unplugin_components_1 } from 'vant/es';import 'vant/es/field/style/index';\nimport __unplugin_components_0 from '/Users/afeng/Desktop/work/gdpayh5-web/src/components/Common/NavBar.vue';\n\"use strict\";\nimport { defineComponent as _defineComponent } from \"vue\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-9f1d3ee5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: /* @__PURE__ */ _normalizeClass(`rmb w-100 bg-white`)\n};\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" };\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" };\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n};\nconst _hoisted_5 = { class: \"relative flex_s\" };\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from \"@/apis/user\";\nimport info from \"@/assets/images/common/info.png\";\nimport success from \"@/assets/images/common/success.png\";\nimport { useAuthStore } from \"@/store\";\nimport { showToast } from \"vant\";\nimport { onMounted, ref, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport mitt from \"@/utils/mitt\";\nimport { computed } from \"vue\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"bind_email\",\n  setup(__props) {\n    var _a;\n    const checked = ref(false);\n    const setSwitch = ref(false);\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const showInfoToast = (title) => {\n      return showToast({\n        message: title,\n        icon: info\n      });\n    };\n    const switchChange = () => {\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      } else {\n        setSwitch.value = false;\n      }\n      let parm = {\n        email: account_email.value,\n        //email\n        // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n        pass: pay_pass.value,\n        //支付密码\n        type: 2,\n        //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n        status: checked.value ? 2 : 1\n      };\n      emailSwitch(parm).then((data) => {\n        if (data.code)\n          return pay_pass.value = \"\";\n        checked.value = !checked.value;\n        pay_pass.value = \"\";\n        showToast({\n          message: \"\\u4FEE\\u6539\\u6210\\u529F\",\n          icon: info\n        });\n      });\n    };\n    const showSuceedToast = (title) => {\n      return showToast({\n        message: title,\n        icon: success\n      });\n    };\n    const isConfirmDialog = ref(false);\n    const pay_pass = ref(\"\");\n    const isLoading = ref(false);\n    const regPayPass = /^[0-9]{6}$/;\n    const showKeyboard = ref(false);\n    const isCountDown = ref(false);\n    const countDownSec = ref(60);\n    const isUpdatingEmail = ref(false);\n    const hasBindEmail = computed(() => {\n      var _a2;\n      return !!((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.email);\n    });\n    const isShowSendCodeButton = computed(\n      () => {\n        var _a2, _b;\n        return !((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.email) || !!((_b = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _b.email) && isUpdatingEmail.value;\n      }\n    );\n    const is_email_sellbuy = computed(() => {\n      var _a2;\n      return ((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.is_email_sellbuy) || 1;\n    });\n    watch(\n      is_email_sellbuy,\n      (n) => {\n        checked.value = n == 1 ? true : false;\n      },\n      {\n        immediate: true\n      }\n    );\n    const account_email = ref((_a = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a.email);\n    const valid_code = ref(\"\");\n    const sendCodeToEmail = async () => {\n      var _a2;\n      try {\n        if (isLoading.value) {\n          return;\n        }\n        if (!account_email.value) {\n          return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\");\n        }\n        isLoading.value = true;\n        const res = await sendCodeToEmailAPI({\n          email: account_email.value,\n          type: 5,\n          uuid: (_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.uuid\n        });\n        console.log(res, \"res\");\n        if (!res.code) {\n          showSuceedToast(\"\\u9A8C\\u8BC1\\u7801\\u53D1\\u9001\\u6210\\u529F\");\n          countDownSec.value = res.nexttime;\n          isCountDown.value = true;\n          let timer = setInterval(() => {\n            if (countDownSec.value > 0) {\n              countDownSec.value = countDownSec.value - 1;\n            } else {\n              isCountDown.value = false;\n              countDownSec.value = 0;\n              clearInterval(timer);\n            }\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const startUpdate = () => {\n      account_email.value = \"\";\n      isUpdatingEmail.value = true;\n    };\n    const handleConfirmDialog = (open) => {\n      var _a2;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!account_email.value) {\n        return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\");\n      }\n      if (!account_email.value.includes(\"@\")) {\n        return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u90AE\\u7BB1\\u683C\\u5F0F\");\n      }\n      isConfirmDialog.value = open;\n    };\n    const bindEmail = async () => {\n      var _a2;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      }\n      try {\n        const res = await bindEmailAPI({\n          email: account_email.value,\n          emailcode: valid_code.value,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"\\u7ED1\\u5B9A\\u6210\\u529F\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const editEmail = async () => {\n      var _a2, _b;\n      if (isLoading.value)\n        return;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      }\n      try {\n        const res = await updateEmailAPI({\n          newemail: account_email.value,\n          newemailcode: valid_code.value,\n          email: (_b = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _b.email,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"\\u7F16\\u8F91\\u6210\\u529F\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const templateText = computed(() => ({\n      page_title: hasBindEmail.value ? \"\\u4FEE\\u6539\\u90AE\\u7BB1\" : \"\\u90AE\\u7BB1\\u7ED1\\u5B9A\",\n      button_text: hasBindEmail.value ? isUpdatingEmail.value ? \"\\u4FDD\\u5B58\" : \"\\u4FEE\\u6539\\u90AE\\u7BB1\" : \"\\u786E\\u8BA4\"\n      // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n    }));\n    onMounted(async () => {\n      await authStore.getUserInfo();\n      mitt.emit(\"number-keyboard-show\");\n    });\n    return (_ctx, _cache) => {\n      const _component_nav_bar = __unplugin_components_0;\n      const _component_van_field = __unplugin_components_1;\n      const _component_van_switch = __unplugin_components_2;\n      const _component_van_cell = __unplugin_components_3;\n      const _component_van_button = __unplugin_components_4;\n      const _component_van_dialog = __unplugin_components_5;\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_nav_bar, {\n          title: templateText.value.page_title,\n          mode: `transparent`\n        }, null, 8, [\"title\"]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_van_field, {\n              modelValue: account_email.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => account_email.value = $event),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",\n              disabled: hasBindEmail.value && !isUpdatingEmail.value\n            }, null, 8, [\"modelValue\", \"disabled\"]),\n            !hasBindEmail.value || isUpdatingEmail.value && hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => valid_code.value = $event),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\"\n            }, _createSlots({\n              _: 2\n              /* DYNAMIC */\n            }, [\n              isShowSendCodeButton.value ? {\n                name: \"button\",\n                fn: _withCtx(() => [\n                  !isCountDown.value ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                    onClick: sendCodeToEmail\n                  }, _toDisplayString(\"\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801\"))) : (_openBlock(), _createElementBlock(\n                    \"div\",\n                    _hoisted_4,\n                    \" \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 \" + _toDisplayString(countDownSec.value) + \"s \",\n                    1\n                    /* TEXT */\n                  ))\n                ]),\n                key: \"0\"\n              } : void 0\n            ]), 1032, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true),\n            hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"\\u662F\\u5426\\u63A5\\u6536\\u4E70\\u5356\\u5E01\\u90AE\\u7BB1\\u901A\\u77E5\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(' inactive-color=\"#fff\" '),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => checked.value = $event),\n                    onChange: _cache[3] || (_cache[3] = ($event) => {\n                      ;\n                      checked.value = !checked.value, isConfirmDialog.value = true, setSwitch.value = true;\n                    }),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8, [\"modelValue\"]),\n                  _createElementVNode(\n                    \"span\",\n                    {\n                      class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? \"\" : \"!text-[#ccc] !left-[45px] \"]),\n                      onClick: _cache[4] || (_cache[4] = ($event) => {\n                        ;\n                        isConfirmDialog.value = true, setSwitch.value = true;\n                      })\n                    },\n                    _toDisplayString(checked.value ? \"\\u5F00\\u542F\" : \"\\u5173\\u95ED\"),\n                    3\n                    /* TEXT, CLASS */\n                  )\n                ])\n              ]),\n              _: 1\n              /* STABLE */\n            })) : _createCommentVNode(\"v-if\", true),\n            _createVNode(_component_van_button, {\n              size: \"large\",\n              class: \"!fixed bottom-[60px] !w-[650px]\",\n              color: \"var(--van-button-primary-background)\",\n              onClick: _cache[5] || (_cache[5] = () => hasBindEmail.value ? isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate() : handleConfirmDialog(true))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\n                  _toDisplayString(templateText.value.button_text),\n                  1\n                  /* TEXT */\n                )\n              ]),\n              _: 1\n              /* STABLE */\n            })\n          ]),\n          _createVNode(_component_van_dialog, {\n            show: isConfirmDialog.value,\n            \"onUpdate:show\": _cache[10] || (_cache[10] = ($event) => isConfirmDialog.value = $event),\n            title: \"\\u8EAB\\u4EFD\\u9A8C\\u8BC1\",\n            confirmButtonText: \"\\u63D0\\u4EA4\",\n            theme: \"round-button\",\n            className: \"dialog-bulletin\",\n            onConfirm: _cache[11] || (_cache[11] = () => setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail())\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"i\", {\n                class: \"icon-close close-dark block\",\n                onClick: _cache[6] || (_cache[6] = ($event) => (handleConfirmDialog(false), setSwitch.value = false))\n              }),\n              _createElementVNode(\"div\", null, [\n                _createVNode(_component_van_field, {\n                  modelValue: pay_pass.value,\n                  \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => pay_pass.value = $event),\n                  placeholder: \"\\u8BF7\\u8F93\\u5165\\u652F\\u4ED8\\u5BC6\\u7801\",\n                  type: \"number\",\n                  maxlength: 6,\n                  clickable: \"\",\n                  onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event) => showKeyboard.value = true, [\"stop\"])),\n                  onFocus: _cache[9] || (_cache[9] = ($event) => showKeyboard.value = true)\n                }, null, 8, [\"modelValue\"]),\n                _createCommentVNode(` <van-field\n            v-if=\"checked && setSwitch\"\n            v-model=\"valid_code\"\n            placeholder=\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\"\n          >\n            <template #button>\n              <div\n                v-if=\"!isCountDown\"\n                class=\"text-[var(--van-button-primary-background)] cursor-pointer\"\n                @click=\"sendCodeToEmail\"\n              >\n                {{ '\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801' }}\n              </div>\n              <div\n                v-else\n                class=\"text-[#787f8c]\"\n              >\n                \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 {{ countDownSec }}s\n              </div>\n            </template>\n          </van-field> `)\n              ])\n            ]),\n            _: 1\n            /* STABLE */\n          }, 8, [\"show\"]),\n          _createCommentVNode(' <van-number-keyboard\\n        v-model=\"pay_pass\"\\n        :show=\"showKeyboard\"\\n        :maxlength=\"6\"\\n        @blur=\"showKeyboard = false\"\\n        class=\"!z-[3000]\"\\n      /> '),\n          _createCommentVNode(` <van-dialog v-model:show=\"dialogContent.show\" :title=\"dialogContent.title\" theme=\"round-button\"\n        :className=\"['dialog-deal']\" :confirmButtonText=\"dialogContent.confirmButtonText\" @confirm=\"onConfirm\">\n        <i class=\"icon-close block close-dark\" @click=\"onClose\"></i>\n        <div class=\"flex flex-col items-center justify-between\">\n          <img :src=\"dialogContent.img\" :class=\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\" />\n          <div class=\"content text-center\">{{ dialogContent.content }}</div>\n        </div>\n      </van-dialog> `)\n        ])\n      ]);\n    };\n  }\n});\n",
      "start": 1714699771046,
      "end": 1714699771046,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Mine/bind_email.vue?vue&type=script&setup=true&lang.ts"
        ],
        "sourcesContent": [
          "\"use strict\";\nimport { defineComponent as _defineComponent } from \"vue\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createSlots as _createSlots, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-9f1d3ee5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: /* @__PURE__ */ _normalizeClass(`rmb w-100 bg-white`)\n};\nconst _hoisted_2 = { class: \"order-content overflow-y-auto h-[calc(100vh-100px)] pb-[40px]\" };\nconst _hoisted_3 = { class: \"bg-[#fff] flex items-center flex-wrap justify-center\" };\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-[#787f8c]\"\n};\nconst _hoisted_5 = { class: \"relative flex_s\" };\nimport { sendCodeToEmailAPI, bindEmailAPI, updateEmailAPI, emailSwitch } from \"@/apis/user\";\nimport info from \"@/assets/images/common/info.png\";\nimport success from \"@/assets/images/common/success.png\";\nimport { useAuthStore } from \"@/store\";\nimport { showToast } from \"vant\";\nimport { onMounted, ref, watch } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport mitt from \"@/utils/mitt\";\nimport { computed } from \"vue\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"bind_email\",\n  setup(__props) {\n    var _a;\n    const checked = ref(false);\n    const setSwitch = ref(false);\n    const router = useRouter();\n    const authStore = useAuthStore();\n    const showInfoToast = (title) => {\n      return showToast({\n        message: title,\n        icon: info\n      });\n    };\n    const switchChange = () => {\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      } else {\n        setSwitch.value = false;\n      }\n      let parm = {\n        email: account_email.value,\n        //email\n        // emailcode: valid_code.value, //邮箱验证码[发送type=6]\n        pass: pay_pass.value,\n        //支付密码\n        type: 2,\n        //\t开关类型： 1安全验证开关2买卖币交易通知邮件开关\n        status: checked.value ? 2 : 1\n      };\n      emailSwitch(parm).then((data) => {\n        if (data.code)\n          return pay_pass.value = \"\";\n        checked.value = !checked.value;\n        pay_pass.value = \"\";\n        showToast({\n          message: \"\\u4FEE\\u6539\\u6210\\u529F\",\n          icon: info\n        });\n      });\n    };\n    const showSuceedToast = (title) => {\n      return showToast({\n        message: title,\n        icon: success\n      });\n    };\n    const isConfirmDialog = ref(false);\n    const pay_pass = ref(\"\");\n    const isLoading = ref(false);\n    const regPayPass = /^[0-9]{6}$/;\n    const showKeyboard = ref(false);\n    const isCountDown = ref(false);\n    const countDownSec = ref(60);\n    const isUpdatingEmail = ref(false);\n    const hasBindEmail = computed(() => {\n      var _a2;\n      return !!((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.email);\n    });\n    const isShowSendCodeButton = computed(\n      () => {\n        var _a2, _b;\n        return !((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.email) || !!((_b = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _b.email) && isUpdatingEmail.value;\n      }\n    );\n    const is_email_sellbuy = computed(() => {\n      var _a2;\n      return ((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.is_email_sellbuy) || 1;\n    });\n    watch(\n      is_email_sellbuy,\n      (n) => {\n        checked.value = n == 1 ? true : false;\n      },\n      {\n        immediate: true\n      }\n    );\n    const account_email = ref((_a = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a.email);\n    const valid_code = ref(\"\");\n    const sendCodeToEmail = async () => {\n      var _a2;\n      try {\n        if (isLoading.value) {\n          return;\n        }\n        if (!account_email.value) {\n          return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\");\n        }\n        isLoading.value = true;\n        const res = await sendCodeToEmailAPI({\n          email: account_email.value,\n          type: 5,\n          uuid: (_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.uuid\n        });\n        console.log(res, \"res\");\n        if (!res.code) {\n          showSuceedToast(\"\\u9A8C\\u8BC1\\u7801\\u53D1\\u9001\\u6210\\u529F\");\n          countDownSec.value = res.nexttime;\n          isCountDown.value = true;\n          let timer = setInterval(() => {\n            if (countDownSec.value > 0) {\n              countDownSec.value = countDownSec.value - 1;\n            } else {\n              isCountDown.value = false;\n              countDownSec.value = 0;\n              clearInterval(timer);\n            }\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const startUpdate = () => {\n      account_email.value = \"\";\n      isUpdatingEmail.value = true;\n    };\n    const handleConfirmDialog = (open) => {\n      var _a2;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!account_email.value) {\n        return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\");\n      }\n      if (!account_email.value.includes(\"@\")) {\n        return showInfoToast(\"\\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u90AE\\u7BB1\\u683C\\u5F0F\");\n      }\n      isConfirmDialog.value = open;\n    };\n    const bindEmail = async () => {\n      var _a2;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      }\n      try {\n        const res = await bindEmailAPI({\n          email: account_email.value,\n          emailcode: valid_code.value,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"\\u7ED1\\u5B9A\\u6210\\u529F\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const editEmail = async () => {\n      var _a2, _b;\n      if (isLoading.value)\n        return;\n      if (((_a2 = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _a2.verified_status) !== 1) {\n        return showInfoToast(\"\\u8BF7\\u5148\\u5B8C\\u6210\\u5B9E\\u540D\\u8BA4\\u8BC1\");\n      }\n      if (!pay_pass.value || !regPayPass.test(pay_pass.value)) {\n        pay_pass.value = \"\";\n        return showInfoToast(\"\\u8BF7\\u8F93\\u51656\\u4F4D\\u652F\\u4ED8\\u5BC6\\u7801\");\n      }\n      try {\n        const res = await updateEmailAPI({\n          newemail: account_email.value,\n          newemailcode: valid_code.value,\n          email: (_b = authStore == null ? void 0 : authStore.userInfo) == null ? void 0 : _b.email,\n          pass: pay_pass.value\n        });\n        if (!res.code) {\n          showSuceedToast(\"\\u7F16\\u8F91\\u6210\\u529F\");\n          setTimeout(() => {\n            router.back();\n          }, 1e3);\n        }\n      } catch (e) {\n        console.log(e);\n      } finally {\n        isLoading.value = false;\n        isConfirmDialog.value = false;\n        pay_pass.value = \"\";\n      }\n    };\n    const templateText = computed(() => ({\n      page_title: hasBindEmail.value ? \"\\u4FEE\\u6539\\u90AE\\u7BB1\" : \"\\u90AE\\u7BB1\\u7ED1\\u5B9A\",\n      button_text: hasBindEmail.value ? isUpdatingEmail.value ? \"\\u4FDD\\u5B58\" : \"\\u4FEE\\u6539\\u90AE\\u7BB1\" : \"\\u786E\\u8BA4\"\n      // button_action: hasBindEmail.value ? (isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate()) : handleConfirmDialog(true),\n    }));\n    onMounted(async () => {\n      await authStore.getUserInfo();\n      mitt.emit(\"number-keyboard-show\");\n    });\n    return (_ctx, _cache) => {\n      const _component_nav_bar = _resolveComponent(\"nav-bar\");\n      const _component_van_field = _resolveComponent(\"van-field\");\n      const _component_van_switch = _resolveComponent(\"van-switch\");\n      const _component_van_cell = _resolveComponent(\"van-cell\");\n      const _component_van_button = _resolveComponent(\"van-button\");\n      const _component_van_dialog = _resolveComponent(\"van-dialog\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_nav_bar, {\n          title: templateText.value.page_title,\n          mode: `transparent`\n        }, null, 8, [\"title\"]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_van_field, {\n              modelValue: account_email.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => account_email.value = $event),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u5730\\u5740\",\n              disabled: hasBindEmail.value && !isUpdatingEmail.value\n            }, null, 8, [\"modelValue\", \"disabled\"]),\n            !hasBindEmail.value || isUpdatingEmail.value && hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_field, {\n              key: 0,\n              modelValue: valid_code.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => valid_code.value = $event),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\"\n            }, _createSlots({\n              _: 2\n              /* DYNAMIC */\n            }, [\n              isShowSendCodeButton.value ? {\n                name: \"button\",\n                fn: _withCtx(() => [\n                  !isCountDown.value ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"text-[var(--van-button-primary-background)] cursor-pointer\",\n                    onClick: sendCodeToEmail\n                  }, _toDisplayString(\"\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801\"))) : (_openBlock(), _createElementBlock(\n                    \"div\",\n                    _hoisted_4,\n                    \" \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 \" + _toDisplayString(countDownSec.value) + \"s \",\n                    1\n                    /* TEXT */\n                  ))\n                ]),\n                key: \"0\"\n              } : void 0\n            ]), 1032, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true),\n            hasBindEmail.value ? (_openBlock(), _createBlock(_component_van_cell, {\n              key: 1,\n              class: \"mb-[20px]\",\n              center: \"\",\n              title: \"\\u662F\\u5426\\u63A5\\u6536\\u4E70\\u5356\\u5E01\\u90AE\\u7BB1\\u901A\\u77E5\"\n            }, {\n              \"right-icon\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createCommentVNode(' inactive-color=\"#fff\" '),\n                  _createVNode(_component_van_switch, {\n                    modelValue: checked.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => checked.value = $event),\n                    onChange: _cache[3] || (_cache[3] = ($event) => {\n                      ;\n                      checked.value = !checked.value, isConfirmDialog.value = true, setSwitch.value = true;\n                    }),\n                    \"active-color\": \"#49ae74\"\n                  }, null, 8, [\"modelValue\"]),\n                  _createElementVNode(\n                    \"span\",\n                    {\n                      class: _normalizeClass([\"text-[#fff] text_switch\", checked.value ? \"\" : \"!text-[#ccc] !left-[45px] \"]),\n                      onClick: _cache[4] || (_cache[4] = ($event) => {\n                        ;\n                        isConfirmDialog.value = true, setSwitch.value = true;\n                      })\n                    },\n                    _toDisplayString(checked.value ? \"\\u5F00\\u542F\" : \"\\u5173\\u95ED\"),\n                    3\n                    /* TEXT, CLASS */\n                  )\n                ])\n              ]),\n              _: 1\n              /* STABLE */\n            })) : _createCommentVNode(\"v-if\", true),\n            _createVNode(_component_van_button, {\n              size: \"large\",\n              class: \"!fixed bottom-[60px] !w-[650px]\",\n              color: \"var(--van-button-primary-background)\",\n              onClick: _cache[5] || (_cache[5] = () => hasBindEmail.value ? isUpdatingEmail.value ? handleConfirmDialog(true) : startUpdate() : handleConfirmDialog(true))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\n                  _toDisplayString(templateText.value.button_text),\n                  1\n                  /* TEXT */\n                )\n              ]),\n              _: 1\n              /* STABLE */\n            })\n          ]),\n          _createVNode(_component_van_dialog, {\n            show: isConfirmDialog.value,\n            \"onUpdate:show\": _cache[10] || (_cache[10] = ($event) => isConfirmDialog.value = $event),\n            title: \"\\u8EAB\\u4EFD\\u9A8C\\u8BC1\",\n            confirmButtonText: \"\\u63D0\\u4EA4\",\n            theme: \"round-button\",\n            className: \"dialog-bulletin\",\n            onConfirm: _cache[11] || (_cache[11] = () => setSwitch.value ? switchChange() : !hasBindEmail.value ? bindEmail() : editEmail())\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"i\", {\n                class: \"icon-close close-dark block\",\n                onClick: _cache[6] || (_cache[6] = ($event) => (handleConfirmDialog(false), setSwitch.value = false))\n              }),\n              _createElementVNode(\"div\", null, [\n                _createVNode(_component_van_field, {\n                  modelValue: pay_pass.value,\n                  \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => pay_pass.value = $event),\n                  placeholder: \"\\u8BF7\\u8F93\\u5165\\u652F\\u4ED8\\u5BC6\\u7801\",\n                  type: \"number\",\n                  maxlength: 6,\n                  clickable: \"\",\n                  onTouchstart: _cache[8] || (_cache[8] = _withModifiers(($event) => showKeyboard.value = true, [\"stop\"])),\n                  onFocus: _cache[9] || (_cache[9] = ($event) => showKeyboard.value = true)\n                }, null, 8, [\"modelValue\"]),\n                _createCommentVNode(` <van-field\n            v-if=\"checked && setSwitch\"\n            v-model=\"valid_code\"\n            placeholder=\"\\u8BF7\\u8F93\\u5165\\u90AE\\u7BB1\\u9A8C\\u8BC1\\u7801\"\n          >\n            <template #button>\n              <div\n                v-if=\"!isCountDown\"\n                class=\"text-[var(--van-button-primary-background)] cursor-pointer\"\n                @click=\"sendCodeToEmail\"\n              >\n                {{ '\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801' }}\n              </div>\n              <div\n                v-else\n                class=\"text-[#787f8c]\"\n              >\n                \\u5DF2\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801 {{ countDownSec }}s\n              </div>\n            </template>\n          </van-field> `)\n              ])\n            ]),\n            _: 1\n            /* STABLE */\n          }, 8, [\"show\"]),\n          _createCommentVNode(' <van-number-keyboard\\n        v-model=\"pay_pass\"\\n        :show=\"showKeyboard\"\\n        :maxlength=\"6\"\\n        @blur=\"showKeyboard = false\"\\n        class=\"!z-[3000]\"\\n      /> '),\n          _createCommentVNode(` <van-dialog v-model:show=\"dialogContent.show\" :title=\"dialogContent.title\" theme=\"round-button\"\n        :className=\"['dialog-deal']\" :confirmButtonText=\"dialogContent.confirmButtonText\" @confirm=\"onConfirm\">\n        <i class=\"icon-close block close-dark\" @click=\"onClose\"></i>\n        <div class=\"flex flex-col items-center justify-between\">\n          <img :src=\"dialogContent.img\" :class=\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\" />\n          <div class=\"content text-center\">{{ dialogContent.content }}</div>\n        </div>\n      </van-dialog> `)\n        ])\n      ]);\n    };\n  }\n});\n"
        ],
        "names": [],
        "mappings": ";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAA4B;AAC7D,mCAAmC,uBAA8B;AACjE,oCAAoC,uBAA+B;AACnE,kCAAkC,uBAA6B;AAC/D,oCAAoC,uBAA+B;AACnE,oCAAoC,uBAA+B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;"
      }
    },
    {
      "name": "vite:style-import",
      "start": 1714699771046,
      "end": 1714699771046,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1714699771046,
      "end": 1714699771047,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1714699771047,
      "end": 1714699771047,
      "order": "normal"
    }
  ]
}
