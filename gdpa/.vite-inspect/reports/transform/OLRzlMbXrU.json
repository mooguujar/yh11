{
  "resolvedId": "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "<template>\n  <nav-bar\n    :title=\"moveBrick ? '开始搬砖' : '卖币'\"\n    :mode=\"moveBrick ? 'blue' : 'icons'\"\n  />\n  <div class=\"coinBuy overflow_a !h-[100vh] relative top-[-1px]\">\n    <div class=\"blue\"></div>\n    <div class=\"content clearfix\">\n      <div class=\"amount\">\n        <div v-if=\"!moveBrick\">\n          <p class=\"NumText\">{{ moveBrick ? '矿工币' : '可用余额' }}</p>\n          <h4>\n            {{ moveBrick ? wallets.toTruncFixed(2) : wallets.toTruncFixed(3) }}\n            <span>{{ moveBrick ? '元' : coin_name }}</span>\n          </h4>\n        </div>\n        <div\n          class=\"p-[26.3px] mt-[-100px]\"\n          v-else\n        >\n          <div class=\"m_top clearfix mt-[15px] leading-[62px]\">\n            <div class=\"left flex_s\">\n              <van-image\n                class=\"pic me-[20px] h-[62px] w-[62px]\"\n                :src=\"kgcoin\"\n              />\n              矿工币余额\n              <van-icon\n                name=\"question-o\"\n                class=\"ms-[10px] mt-[5px]\"\n                @click=\"showDIYDialog1()\"\n              />\n            </div>\n            <div class=\"right font-bold text-[33.33px] text-[#333333]\">\n              {{ (wallets && (+wallets).toTruncFixed(2)) || '0.00' }}\n              <span class=\"font-[300] text-[#868d9a] text-[22.33px] mr-[10px]\">元</span>\n            </div>\n          </div>\n          <div\n            class=\"wrap_dow text-[25.33px] text-[#333333] mt-[35px] leading-[45.22px] clearfix flex_z_between text-center\"\n          >\n            <span class=\"text\">\n              搬砖金额\n              <p>\n                {{ (BZCoin.sell_num && (+BZCoin.sell_num).toTruncFixed(2)) || '0.00' }}\n              </p>\n              <div class=\"right_shu\"></div>\n            </span>\n            <span class=\"text\">\n              完成金额\n              <p>{{ !BZCoin.sell_num ? '0.00' : (+BZCoin.selled_num).toTruncFixed(2) }}</p>\n              <div class=\"right_shu\"></div>\n            </span>\n            <span class=\"text\">\n              预计金额\n              <p>{{ !BZCoin.sell_gift ? '0.00' : (+BZCoin.sell_gift).toTruncFixed(2) }}</p>\n              <div class=\"right_shu\"></div>\n            </span>\n            <span class=\"text\">\n              已获奖励\n              <p>{{ !BZCoin.get_sell_gift ? '0.00' : (+BZCoin.get_sell_gift).toTruncFixed(2) }}</p>\n            </span>\n          </div>\n        </div>\n        <div\n          class=\"top_sellNum clearfix\"\n          v-if=\"!moveBrick\"\n        >\n          <div class=\"can_sell left\">可售数量 {{ canSaleAmount }}</div>\n          <div class=\"cant_sell right\">\n            不可售数量 {{ notSaleAmount }}\n            <van-popover\n              v-model:show=\"showPopover\"\n              placement=\"top\"\n              className=\"sell_popover van-popup van-popover van-popover--light\"\n            >\n              不允许挂单出售，仅允许充值到商户\n              <template #reference>\n                <van-icon name=\"question-o\" />\n              </template>\n            </van-popover>\n          </div>\n        </div>\n      </div>\n      <div\n        ref=\"sellNum\"\n        class=\"sellNum !pb-[55px]\"\n      >\n        <p class=\"numTitle\">{{ moveBrick ? '搬砖金额' : '卖币数量' }}</p>\n        <van-field\n          v-model=\"value\"\n          type=\"digit\"\n          :placeholder=\"sell_coin_limit_placeholder\"\n        >\n          <template #button>\n            <span @click=\"value = moveBrick ? KGCoin : canSaleAmount\">全部</span>\n          </template>\n          <template #right-icon>\n            <span>{{ moveBrick ? '矿工币' : coin_name }}</span>\n          </template>\n        </van-field>\n        <p\n          v-if=\"moveBrick\"\n          class=\"caiText\"\n        >\n          预计奖励\n          <span>\n            {{ (+value * findMaxNumber()).toFixed(3) }}\n            CNY\n          </span>\n        </p>\n        <p class=\"caiText\">是否拆分</p>\n        <div class=\"caifen clearfix\">\n          <div\n            class=\"left box w-[328.47px] h-[89.58px]\"\n            :class=\"checked == '1' ? 'active' : ''\"\n            @click=\"checked = '1'\"\n          >\n            可拆分\n          </div>\n          <div\n            class=\"right box w-[328.47px] h-[89.58px]\"\n            :class=\"checked == '2' ? 'active' : ''\"\n            @click=\"checked = '2'\"\n          >\n            不拆分\n          </div>\n        </div>\n        <div v-if=\"checked == '1'\">\n          <p class=\"numTitle\">最低购买</p>\n          <van-field\n            v-model=\"minimum\"\n            placeholder=\"0\"\n            type=\"digit\"\n          ></van-field>\n        </div>\n\n        <p class=\"payText\">收款方式</p>\n        <div className=\"paypic\">\n          <van-row justify=\"space-between\">\n            <van-col\n              span=\"5.5\"\n              class=\"payBox\"\n              :class=\"payMateActive.includes('BANK') ? 'active' : ''\"\n              @click=\"\n                withdrawddresslist.some(e => {\n                  return e.coin_protocol == 'BANK' && e.status === 1\n                })\n                  ? payBoxTap('BANK')\n                  : showDIYDialog('/payment_list?way=bank')\n              \"\n            >\n              <div>\n                <van-image\n                  class=\"Spic credit\"\n                  :src=\"requireImg('common/credit.png')\"\n                />\n                银行卡\n              </div>\n              <div class=\"hotPic flex_s\">\n                <van-image\n                  class=\"icon_huo\"\n                  :src=\"requireImg('common/icon_huo.png')\"\n                />\n                <span class=\"van-ellipsis\">奖励{{ +(gift_fee.BANK * 100).toFixed(2) }}%</span>\n              </div>\n              <div\n                class=\"position_w\"\n                v-if=\"\n                  !withdrawddresslist.some(e => {\n                    return e.coin_protocol == 'BANK' && e.status === 1\n                  })\n                \"\n              >\n                未绑定\n              </div>\n            </van-col>\n            <van-col\n              span=\"5.5\"\n              class=\"payBox\"\n              :class=\"payMateActive.includes('ALIPAY') ? 'active' : ''\"\n              @click=\"\n                withdrawddresslist.some(e => {\n                  return e.coin_protocol == 'ALIPAY' && e.status === 1\n                })\n                  ? payBoxTap('ALIPAY')\n                  : showDIYDialog('/payment_list?way=alipay')\n              \"\n            >\n              <div>\n                <van-image\n                  class=\"Spic alipay\"\n                  :src=\"requireImg('common/ALIPAY.png')\"\n                />\n                支付宝\n              </div>\n              <div class=\"hotPic flex_s\">\n                <van-image\n                  class=\"icon_huo\"\n                  :src=\"requireImg('common/icon_huo.png')\"\n                />\n                <span class=\"van-ellipsis\">奖励{{ +(gift_fee.ALIPAY * 100).toFixed(2) }}%</span>\n              </div>\n              <div\n                class=\"position_w\"\n                v-if=\"\n                  !withdrawddresslist.some(e => {\n                    return e.coin_protocol == 'ALIPAY' && e.status === 1\n                  })\n                \"\n              >\n                未绑定\n              </div>\n            </van-col>\n            <van-col\n              span=\"5.5\"\n              class=\"payBox\"\n              :class=\"payMateActive.includes('WXPAY') ? 'active' : ''\"\n              @click=\"\n                withdrawddresslist.some(e => {\n                  return e.coin_protocol == 'WXPAY' && e.status === 1\n                })\n                  ? payBoxTap('WXPAY')\n                  : showDIYDialog('/payment_list?way=wxpay')\n              \"\n            >\n              <div\n                class=\"position_w\"\n                v-if=\"\n                  !withdrawddresslist.some(e => {\n                    return e.coin_protocol == 'WXPAY' && e.status === 1\n                  })\n                \"\n              >\n                未绑定\n              </div>\n              <div>\n                <van-image\n                  class=\"Spic WeChatPay\"\n                  :src=\"requireImg('common/WeChatPay.png')\"\n                />\n                微信\n              </div>\n              <div class=\"hotPic flex_s\">\n                <van-image\n                  class=\"icon_huo\"\n                  :src=\"requireImg('common/icon_huo.png')\"\n                />\n                <span class=\"van-ellipsis\">奖励{{ +(gift_fee.WXPAY * 100).toFixed(2) }}%</span>\n              </div>\n            </van-col>\n            <van-col\n              span=\"5.5\"\n              class=\"payBox !m-[0]\"\n              :class=\"payMateActive.includes('SZRMB') ? 'active' : ''\"\n              @click=\"\n                withdrawddresslist.some(e => {\n                  return e.coin_protocol == 'SZRMB' && e.status === 1\n                })\n                  ? payBoxTap('SZRMB')\n                  : showDIYDialog('/payment_list?way=szrmb')\n              \"\n            >\n              <div\n                class=\"position_w\"\n                v-if=\"\n                  !withdrawddresslist.some(e => {\n                    return e.coin_protocol == 'SZRMB' && e.status === 1\n                  })\n                \"\n              >\n                未绑定\n              </div>\n              <div>\n                <van-image\n                  class=\"Spic SZRMB\"\n                  :src=\"requireImg('common/SZRMB.png')\"\n                />\n                数字人民币\n              </div>\n              <div class=\"hotPic flex_s\">\n                <van-image\n                  class=\"icon_huo\"\n                  :src=\"requireImg('common/icon_huo.png')\"\n                />\n                <span class=\"van-ellipsis\">奖励{{ +(gift_fee.SZRMB * 100).toFixed(2) }}%</span>\n              </div>\n            </van-col>\n          </van-row>\n        </div>\n        <div class=\"hairline-border my-[15px]\"></div>\n        <van-dropdown-menu\n          v-if=\"downList.length > 0\"\n          class=\"mt-[20px] dropdown_f\"\n          :overlay=\"false\"\n        >\n          <van-dropdown-item\n            class=\"dropdown_item_f jz_f\"\n            v-model=\"value1\"\n            @open=\"onDropdownItemOpen\"\n            @close=\"onDropdownItemClose\"\n            @closed=\"onDropdownItemClosed\"\n            ref=\"itemRef\"\n          >\n            <!-- :options=\"downList\" -->\n            <template #title>\n              <van-image\n                v-if=\"locImgList.includes(downList.find((item: any) => {\n                  return item.id == value1\n                })?.account_bankcode)\"\n                lazy-load\n                @click.stop=\"\n                  ;['ALIPAY', 'WXPAY'].includes(currActiveCard.coin_protocol) &&\n                    showImage(imgserver_url + currActiveCard.code_imgurl)\n                \"\n                class=\"credit left mr-[20px]\"\n                :src=\"['ALIPAY', 'WXPAY'].includes(currActiveCard.coin_protocol)?requireImg(`mine/${currActiveCard.coin_protocol === 'ALIPAY' ? 'zfb_icon' : 'wx_icon'}.png`):requireImg('common/'+downList.find((item: any) => {\n                  return item.id == value1\n                })?.account_bankcode+'.png')\"\n              />\n              <van-image\n                v-else\n                lazy-load\n                class=\"credit left mr-[20px]\"\n                :src=\"imgserver_url+'/static/default/bank/'+downList.find((item: any) => {\n                  return item.id == value1\n                })?.account_bankcode+'.png'\"\n              />\n              <div class=\"flex flex-col justify-between\">\n                <p class=\"text-[24px]\">\n                  {{\n                    downList.find((item: any) => {\n                      return item.id == value1\n                    })?.account_bankname\n                  }}\n                  <span v-if=\"['ALIPAY', 'WXPAY'].includes(currActiveCard.coin_protocol)\">\n                    {{ currActiveCard.coin_address }}\n                  </span>\n                  <span v-if=\"['BANK', 'SZRMB'].includes(currActiveCard.coin_protocol)\">\n                    {{ currActiveCard.coin_address.slice(-4) }}\n                  </span>\n                </p>\n                <p class=\"mt-[4px] text-[24px] text-[#9d9999]\">\n                  {{\n                    downList.find((item: any) => {\n                      return item.id == value1\n                    })?.account_bank_realname\n                  }}\n                </p>\n              </div>\n              <div\n                class=\"switchover text-[#0875f9] text-[24px]\"\n                v-if=\"downList.length > 1\"\n              >\n                更多\n              </div>\n            </template>\n            <div\n              class=\"drop_f_item flex_s\"\n              v-for=\"(item, index) in downList.filter((item: any) => item.id !== value1)\"\n              @click=\"slectMenu(item)\"\n              :key=\"item.id\"\n            >\n              <van-image\n                v-if=\"locImgList.includes(item.account_bankcode)\"\n                lazy-load\n                @click.stop=\"\n                  ;['ALIPAY', 'WXPAY'].includes(currActiveCard.coin_protocol) &&\n                    showImage(imgserver_url + item.code_imgurl)\n                \"\n                class=\"credit left mr-[20px]\"\n                :src=\"\n                  ['ALIPAY', 'WXPAY'].includes(item.coin_protocol)\n                    ? requireImg(\n                        `mine/${\n                          currActiveCard.coin_protocol === 'ALIPAY' ? 'zfb_icon' : 'wx_icon'\n                        }.png`\n                      )\n                    : requireImg('common/' + item.account_bankcode + '.png')\n                \"\n              />\n              <van-image\n                v-else\n                lazy-load\n                class=\"credit left mr-[20px]\"\n                :src=\"imgserver_url + '/static/default/bank/' + item.account_bankcode + '.png'\"\n              />\n              <div class=\"flex flex-col justify-between\">\n                <p class=\"text-[24px]\">\n                  {{ item.account_bankname }}\n                  <span v-if=\"['ALIPAY', 'WXPAY'].includes(item.coin_protocol)\">\n                    {{ item.coin_address }}\n                  </span>\n                  <span v-if=\"['BANK', 'SZRMB'].includes(item.coin_protocol)\">\n                    {{ item.coin_address.slice(-4) }}\n                  </span>\n                </p>\n                <p class=\"mt-[4px] text-[24px] text-[#9d9999]\">{{ item.account_bank_realname }}</p>\n              </div>\n              <van-image\n                v-if=\"item.id == value1\"\n                class=\"rightimg mr-[15px]\"\n                :src=\"requireImg('common/success.png')\"\n              />\n              <van-image\n                v-else\n                class=\"rightimg mr-[15px]\"\n                :src=\"requireImg('common/hui.png')\"\n              />\n            </div>\n            <div\n              v-if=\"downList.length > 1\"\n              class=\"switchover_s text-[#0875f9] text-[24px]\"\n              @click=\"menuSwitch(false)\"\n            >\n              收起\n            </div>\n          </van-dropdown-item>\n        </van-dropdown-menu>\n      </div>\n      <van-button\n        ref=\"sellButton\"\n        type=\"primary\"\n        class=\"sellButton\"\n        @click=\"onConfirm\"\n      >\n        {{ moveBrick ? '开始搬砖' : '确认出售' }}\n      </van-button>\n    </div>\n    <p class=\"text_sell\">\n      <span class=\"title_t\">注意事项</span>\n      <br />\n\n      1.【确认出售】前请核实您的收款方式准确无误\n      <br />\n      2.【确认出售】挂出卖单后请在{{\n        moveBrick ? '【买币】-【搬砖赚钱】' : '【订单】-【卖币】'\n      }}-【挂单中】查询您的挂单\n      <br />\n      3.请时刻关注站内待处理消息弹窗通知\n      <br />\n      4.请勿恶意取消订单，查证属实后将限制账号交易\n      <br />\n      5.如未收到买家打款，切勿放行，请及时提交【交易申诉】，等待人工客服介入处理\n      <br />\n    </p>\n    <van-dialog\n      v-model:show=\"showKeyboard\"\n      class=\"confirm-dialog !top-[508px]\"\n      title=\"请输入支付密码\"\n      theme=\"round-button\"\n      :show-confirm-button=\"false\"\n    >\n      <i\n        class=\"icon-close block close-dark\"\n        @click=\"showKeyboard = false\"\n      ></i>\n\n      <div class=\"confirm-dialog__content\">\n        <h4>\n          {{ confirmAmount }}\n          <span>{{ moveBrick ? 'CNY' : coin_name }}</span>\n        </h4>\n        <van-divider />\n        <form\n          class=\"confirm-dialog__form\"\n          @submit.prevent=\"onSubmit\"\n        >\n          <div class=\"confirm-dialog__form-item\">\n            <label>支付密码</label>\n            <!-- clickable readonly-->\n            <!-- type=\"number\"  -->\n            <van-field\n              style=\"-webkit-text-security: disc\"\n              type=\"number\"\n              ref=\"input_p\"\n              v-model=\"passwdValue\"\n              :focused=\"showKeyboard\"\n              @focus=\"showKeyboard = true\"\n              @touchstart.stop=\"showKeyboard = true\"\n              showKeyboard=\"true\"\n              :maxlength=\"6\"\n            />\n          </div>\n          <van-button\n            type=\"primary\"\n            native-type=\"submit\"\n            block\n            class=\"confirm-dialog__form-btn\"\n          >\n            提交\n          </van-button>\n        </form>\n      </div>\n    </van-dialog>\n    <van-dialog\n      v-model:show=\"dialogContent.show\"\n      :title=\"dialogContent.title\"\n      theme=\"round-button\"\n      :className=\"['dialog-deal']\"\n      :confirmButtonText=\"dialogContent.confirmButtonText\"\n      @confirm=\"router.push('/pay_password')\"\n    >\n      <i\n        class=\"icon-close block close-dark\"\n        @click=\"dialogContent.show = false\"\n      ></i>\n      <div class=\"flex flex-col items-center justify-between\">\n        <img\n          :src=\"dialogContent.img\"\n          :class=\"!authStore?.userInfo.verified_status ? 'verifi-id' : 'add-card'\"\n        />\n        <div class=\"content text-center\">{{ dialogContent.content }}</div>\n      </div>\n    </van-dialog>\n  </div>\n  <van-image-preview\n    v-model:show=\"imageShow\"\n    :images=\"[image_src]\"\n  ></van-image-preview>\n</template>\n\n<script setup lang=\"ts\">\nimport { Sell, buySellCoinInfoApi } from '@/apis/buySellCoin'\nimport { GiftInfo, getUserCoinApi } from '@/apis/user'\nimport infoIcon from '@/assets/images/common/info.png'\nimport passIcon from '@/assets/images/common/key.png'\nimport kgcoin from '@/assets/images/common/kgcoin.png'\nimport { useAppBar } from '@/components/AppBar/useAppBar'\nimport Dialog from '@/components/CommonPopup/Dialog/index'\nimport router from '@/router'\nimport { useAuthStore } from '@/store/modules/auth'\nimport { useCoinBuySellStore } from '@/store/modules/coinBuySell'\nimport { useEntryStore } from '@/store/modules/entry'\nimport { useUserStore } from '@/store/modules/user'\nimport mitt from '@/utils/mitt'\nimport { mergeHrefParams, requireImg } from '@/utils/tools'\nimport { storeToRefs } from 'pinia'\nimport { showFailToast, showToast } from 'vant'\nimport { computed, onMounted, reactive, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\n\nconst search = new URLSearchParams(mergeHrefParams())\nconst hs = search.get('hs') || ''\nconst wideMode = hs === 'h'\nconst targetRoute = wideMode ? 'wideOrderCreate' : 'orderCreate'\n\nconst imgserver_url = computed(() => {\n  // console.log('(imgserver_url',(config.value.Web_Set_DefaultInfo?.imgserver_url as any)?.v);\n  return (config.value.Web_Set_DefaultInfo?.imgserver_url as any)?.v || ''\n})\nconst coin_name = sessionStorage.getItem('coin_name')\nconst route = useRoute()\nuseAppBar({ mode: 'dark' })\n\nconst userStore = useUserStore()\nconst { getUserMessageList } = userStore\nonMounted(() => {\n  authStore.getUserInfo()\n  getUserMessageList({})\n  mitt.emit('number-keyboard-show')\n})\n\nconst locImgList = ref(['SZRMB', 'ZDYYH', 'ALIPAY', 'WXPAY'])\n// 当前选中的卡支付方式\nconst currActiveCard = computed(() => {\n  return (\n    downList.value.find((item: any) => {\n      return item.id == value1.value\n    }) || ({} as Record<string, any>)\n  )\n})\nconst imageShow = ref(false)\nconst image_src = ref('')\nconst showImage = (src: string) => {\n  imageShow.value = true\n  image_src.value = src\n}\n\nconst itemRef = ref()\nconst value1 = ref(0)\nconst downList = ref<any>([])\n\nconst sellNum = ref()\nconst sellButton = ref()\n\n// 下拉列表展开\nconst onDropdownItemOpen = () => {\n  setTimeout(() => {\n    // app视图容器宽度\n    const appWidth = document.querySelector('#app')!.clientWidth\n    // 宽度计算因子\n    const factor = 750 / appWidth\n    // 下拉高度\n    let dropdownEle = document.querySelector('.van-dropdown-item__content')\n    // 更多/收起 按钮高度\n    const toggleBtnHeight = 52 / factor\n    // 更新容器高度\n    sellNum.value.style.height =\n      sellNum.value.clientHeight + dropdownEle!.clientHeight - toggleBtnHeight + 'px'\n  })\n}\n// 下拉列表关闭----动画未结束\nconst onDropdownItemClose = () => {\n  document.querySelector('.van-dropdown-item__content')!.scrollTop = 0\n}\n// 下拉列表关闭----动画结束\nconst onDropdownItemClosed = () => {\n  // sellButton.value.$el.style.marginTop = '0.42667rem'\n  sellNum.value.style.height = 'auto'\n}\nconst menuSwitch = (status?: boolean) => {\n  itemRef.value.toggle(status)\n}\nconst slectMenu = (item: { id: number }) => {\n  withdrawddress_id.value[withdrawddress_id.value.length - 1] = item.id\n  // console.log('withdrawddress_id.value1111', withdrawddress_id.value)\n  // showToast('选择成功')\n  value1.value = item.id\n  downList.value.forEach((e: { id: number; def_card: number }) => {\n    if (e.id == item.id) {\n      e.def_card = 1\n    } else {\n      e.def_card = 0\n    }\n  })\n  itemRef.value.toggle()\n}\nconst authStore = useAuthStore()\nconst { token, getUserMoneyByMType, userInfo } = storeToRefs(authStore)\nconst { getUserCoin } = authStore\ngetUserCoin({})\nconst moveBrick = ref(0)\nconst KGCoin = ref(0)\nconst { query } = route\nmoveBrick.value = +(query.moveBrick as string) == 1 ? 1 : 0\nKGCoin.value = +(query.KGCoin as string)\n\nconst input_p = ref(null)\n// 可售金额\nconst canSaleAmount = computed(() => {\n  const coinCash = +(getUserMoneyByMType.value(1)?.available_coincash ?? 0)\n  const freeSellAmount = +(userInfo.value?.freesell_amount ?? 0)\n\n  if (freeSellAmount > coinCash) return coinCash.toTruncFixed(2)\n  return freeSellAmount.toTruncFixed(2)\n})\nconst msgtext = `您还未绑定该收款方式,是否前往绑定 </br>\n</br>\n</br>\n`\nconst showDIYDialog = (path: any) => {\n  Dialog.confirm({\n    title: '',\n    message: msgtext,\n    allowHtml: true,\n    messageAlign: 'center',\n    className: 'selldialog',\n    confirmButtonText: '确定',\n    cancelButtonText: '取消',\n    action: () => {\n      router.push(path)\n    }\n  })\n}\nconst msgtext2 = `绑定邮箱后，可以在有交易信息的时候及时通知到您！建议您绑定好邮箱地址。 </br>\n</br>\n</br>\n`\n!!!userInfo.value.email &&\n  handleClick() &&\n  Dialog.confirm({\n    title: '',\n    message: msgtext2,\n    allowHtml: true,\n    messageAlign: 'center',\n    className: 'selldialog',\n    confirmButtonText: '去绑定',\n    cancelButtonText: '取消',\n    action: () => {\n      router.push('/bind_email')\n    }\n  })\nfunction handleClick() {\n  let lastClickTime: any = localStorage.getItem('lastClickTime')\n  const currentTime: any = new Date()\n  if (\n    lastClickTime === null ||\n    currentTime - new Date(lastClickTime).getTime() > 2 * 60 * 60 * 1000\n  ) {\n    localStorage.setItem('lastClickTime', currentTime)\n    return true\n  } else {\n    return false\n  }\n}\nconst BZCoin = ref<any>({})\nGiftInfo({}).then(data => {\n  if (!!!data.status) return false\n  BZCoin.value = data\n  // console.log('KGCoin.value', KGCoin.value)\n})\nconst msgtext1 = `矿工币说明 </br>\n</br>\n1.矿工币是搬砖时使用的货币，需要有矿工币才能进行搬砖。</br>\n</br>\n2.在使用矿工币进行搬砖,在完成搬砖订单后会获得额外的矿工市奖励</br>\n</br>\n3.矿工币和人民币锚定1:1</br>\n</br>\n4.矿工币和USDT钱包可相互划转，划转汇率按当时人民币和USDT的汇率计算`\n\nconst showDIYDialog1 = () => {\n  Dialog({\n    title: '矿工币说明',\n    message: msgtext1,\n    allowHtml: true,\n    messageAlign: 'left',\n    className: 'kgdialog',\n    confirmButtonText: '确定'\n  })\n}\n// 不可售金额\nconst notSaleAmount = computed(() => {\n  const coinCash = +(getUserMoneyByMType.value(1)?.available_coincash ?? 0)\n  return (coinCash - Number(canSaleAmount.value)).toTruncFixed(2)\n})\n\nconst confirmAmount = computed(() => {\n  return Number(value.value).toTruncFixed(3)\n})\n\nconst EntryStore = useEntryStore()\nconst { config } = storeToRefs(EntryStore)\nconst gift_fee = computed(() => {\n  // console.log('(conft_fee',(config.value.Web_Transfer_BuySell_Coin_Fee?.Sell_mtype_1_gift as any)?.gift_fee);\n  if (moveBrick.value) {\n    return (config.value.Web_Transfer_BuySell_Coin_Fee?.Sell_mtype_30_gift as any)?.gift_fee\n  }\n  return (config.value.Web_Transfer_BuySell_Coin_Fee?.Sell_mtype_1_gift as any)?.gift_fee\n})\n\nconst splitMin = computed(() => {\n  const sellCoinLimit = (\n    config.value.Web_Transfer_BuySell_Coin_Fee?.Sell_Coin_Limit as any\n  )?.v.split('-')\n  return (sellCoinLimit && Number(sellCoinLimit[0])) || 10\n})\n\nconst splitMax = computed(() => {\n  const sellCoinLimit = (\n    config.value.Web_Transfer_BuySell_Coin_Fee?.Sell_Coin_Limit as any\n  )?.v.split('-')\n  return sellCoinLimit && Number(sellCoinLimit[1])\n})\n\nconst minimum = ref(10)\n\nwatch(\n  splitMin,\n  newV => {\n    minimum.value = +newV.toTruncFixed(2)\n  },\n  { immediate: true }\n)\n\nconst sell_coin_limit_placeholder = computed(() => {\n  const min = splitMin.value.toTruncFixed(2)\n  const max = splitMax.value.toTruncFixed(2)\n  return `限额${min}~${max}`\n})\n\n// socket().start(token.value);\n\nconst coin = useCoinBuySellStore()\nconst { getWithdrawddresslist } = coin\nconst { withdrawddresslist } = storeToRefs(coin)\nconst wallets = ref(0)\n\nconst payMateActive = ref<any>([])\nconst withdrawddress_id = ref<any>([])\nconst payBoxTap = (active: string) => {\n  // console.log('payMateActive.value.includes(active)',delete payMateActive.value[active]);\n  if (payMateActive.value.includes(active)) {\n    active == payMateActive.value[payMateActive.value.length - 1] &&\n      (downList.value =\n        withdrawddresslist.value.filter(\n          item =>\n            item.coin_protocol === payMateActive.value[payMateActive.value.length - 2 || 0] &&\n            item.status == 1\n        ) || [])\n    value1.value =\n      downList.value.find((e: { def_card: number }) => {\n        return e.def_card == 1\n      })?.id || downList.value[0]?.id\n    withdrawddress_id.value.splice(payMateActive.value.indexOf(active), 1)\n    payMateActive.value.splice(payMateActive.value.indexOf(active), 1)\n  } else {\n    payMateActive.value.push(active)\n    downList.value = withdrawddresslist.value.filter(\n      item => item.coin_protocol === active && item.status == 1\n    )\n    value1.value =\n      downList.value.find((e: { def_card: number }) => {\n        return e.def_card == 1\n      })?.id || downList.value[0]?.id\n    withdrawddress_id.value.push(value1.value)\n    // console.log('withdrawddress_id', withdrawddress_id.value)\n    // console.log('downList.value111 ', downList.value[0].id)\n  }\n  // console.log('withdrawddress_id', withdrawddress_id.value)\n  // console.log('active', payMateActive.value)\n}\n\nconst active = ref(0)\nconst onClickLeft = () => history.go(-1)\nconst value = ref<number | string>('')\nconst checked = ref('1')\n\nconst passwdValue = ref('')\nconst showKeyboard = ref(false)\nconst showPopover = ref(false)\nconst errorInfo = ref('')\n\nconst goSell = async () => {\n  return new Promise((res, rej) => {\n    const SellParm = {\n      mtype: moveBrick.value ? 30 : 1,\n      // mtype\t是\tstring\t兑换发起类型\n      // 1 系统账户\n      // 2、USDT账户\n      // 3.以太坊账户\n      // 4.比特币账户 ..\n      coin_protocol: payMateActive.value.join(','), //付款卡协议 多选用逗号隔开\n      // BANK\n      // ALIPAY\n      // WXPAY\n      num: value.value, //数量\n      is_split: Number(checked.value), //int\t是否拆分 1,是 2否\n      split_min: Number(checked.value) == 1 ? minimum.value : null, //数量\n      withdrawddress_id: withdrawddress_id.value.join(','), //指定收款卡信息ID\n      passwd: passwdValue.value\n    }\n    // console.log('SellParm', SellParm);\n\n    Sell(SellParm).then(({ order_id }) => {\n      console.log('order_id', order_id)\n      if (order_id) {\n        res(order_id)\n      }\n      rej(false)\n    })\n    // @ts-expect-error\n    sell_(SellParm)\n  })\n}\n\ngetWithdrawddresslist({}).then(() => {\n  // console.log('withdrawddresslist1222', withdrawddresslist.value);\n  // payMateActive.value = withdrawddresslist.value;\n  // payMateActive.value = [\n  //   (withdrawddresslist.value.filter(e => {\n  //     return e.status === 1\n  //   })[0].coin_protocol as never) || ('BANK' as never)\n  // ]\n  // console.log('payMateActive.value', payMateActive.value)\n})\n\nconst goBuySellCoinInfoApi = () => {\n  buySellCoinInfoApi({}).then(data => {\n    wallets.value = data.wallets['1'].available_num\n    // console.log('wallets', wallets.value);\n  })\n}\nif (moveBrick.value) {\n  if (!!!KGCoin.value) {\n    getUserCoinApi({}).then(data => {\n      if (!!!data.length) return false\n      let datas = data.find(item => item.mtype === 30) || { coincash: 0 }\n      wallets.value = +(+datas.coincash).toTruncFixed(2)\n    })\n  } else {\n    wallets.value = KGCoin.value\n  }\n} else {\n  goBuySellCoinInfoApi()\n}\n\nconst findMaxNumber = (arr: any[] = payMateActive.value) => {\n  if (arr.length === 0) {\n    return 0\n  }\n  let max = +gift_fee.value[arr[0]]\n  arr.forEach((item: string, i) => {\n    if (+gift_fee.value[item] > +max) {\n      max = +gift_fee.value[item]\n    }\n  })\n  return max\n}\n\nconst onConfirm = () => {\n  if (!canBindPayment()) {\n    return false\n  }\n  if (!authStore.userInfo.is_set_paypassword) {\n    return showToast({ message: '请先设置好支付密码', icon: infoIcon })\n  }\n  if (!value.value || value.value == 0) {\n    return showToast({ message: '请输入卖币数量', icon: infoIcon })\n  }\n  if (Number(value.value) < splitMin.value || Number(value.value) > splitMax.value) {\n    return showToast({\n      message: `卖币限额\\n${splitMin.value.toTruncFixed(2)}~${splitMax.value.toTruncFixed(2)}`,\n      icon: infoIcon\n    })\n  }\n  if (checked.value === '1') {\n    if (Number(minimum.value) < splitMin.value) {\n      return showToast({\n        message: `最低买入不能设置低于${splitMin.value.toTruncFixed(2)}`,\n        icon: infoIcon\n      })\n    }\n    if (Number(minimum.value) > Number(value.value)) {\n      return showToast({ message: `最低买入不能高于卖币数量`, icon: infoIcon })\n    }\n  }\n  if (Number(value.value) > Number(wallets.value)) {\n    return showToast({ message: `卖出数量不能高于现有额度`, icon: infoIcon })\n  }\n  if (!payMateActive.value || payMateActive.value.length === 0) {\n    return showToast({ message: '请选择收款方式', icon: infoIcon })\n  }\n  showKeyboard.value = true\n  setTimeout(() => {\n    ;(input_p.value as any).focus()\n  }, 500)\n}\n\nconst onSubmit = async () => {\n  if (passwdValue.value.length == 6) {\n    // console.log('passwdValue.value', passwdValue.value);\n    await goSell()\n      .then(order_id => {\n        // console.log('data',order_id);\n        passwdValue.value = ''\n        showKeyboard.value = false\n        router.push(\n          `/${targetRoute}?order_id=` +\n            order_id +\n            '&sell=true&payMateActive=' +\n            payMateActive.value.join(',') +\n            '&moveBrick=' +\n            moveBrick.value\n        )\n        getUserCoin({})\n        // goBuySellCoinInfoApi();\n        setTimeout(() => {\n          location.reload()\n        }, 800)\n      })\n      .catch(err => {\n        passwdValue.value = ''\n        // showFailToast('密码错误')\n      })\n  } else {\n    showFailToast('请输入6位密码')\n  }\n}\n\nconst dialogContent = reactive({\n  show: false,\n  title: '',\n  img: '',\n  content: '',\n  confirmButtonText: ''\n})\n\nconst canBindPayment = () => {\n  if (authStore.userInfo.is_set_paypassword === 2) {\n    const dialogInfo = {\n      show: true,\n      title: '设置支付密码',\n      img: passIcon,\n      content: '请先设置支付密码',\n      confirmButtonText: '立即设置'\n    }\n    Object.assign(dialogContent, dialogInfo)\n    return false\n  }\n\n  return true\n}\n</script>\n\n<style lang=\"scss\" src=\"./sell.scss\" scoped />\n<style lang=\"scss\">\n.sell_popover {\n  transform: translate(-20px, -20px);\n  .van-popover__content {\n    padding: 20px;\n    font-family: MicrosoftYaHei;\n    font-size: 26.6px;\n    font-weight: normal;\n    font-stretch: normal;\n    letter-spacing: 0px;\n    color: #0875f9;\n  }\n}\n</style>\n",
      "start": 1714699769098,
      "end": 1714699769177,
      "sourcemaps": null
    },
    {
      "name": "vite:css",
      "start": 1714699769177,
      "end": 1714699769177,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "start": 1714699769177,
      "end": 1714699769177,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1714699769177,
      "end": 1714699769177,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1714699769177,
      "end": 1714699769177,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": "import _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./sell.scss?vue&type=style&index=0&src=2275ff6a&scoped=2275ff6a&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-2275ff6a\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\"]]);\n",
      "start": 1714699769177,
      "end": 1714699769524,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1714699769524,
      "end": 1714699769524,
      "order": "normal"
    },
    {
      "name": "vite-plugin-vconsole",
      "result": "import _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./sell.scss?vue&type=style&index=0&src=2275ff6a&scoped=2275ff6a&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-2275ff6a\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\"]]);\n",
      "start": 1714699769524,
      "end": 1714699769524,
      "order": "normal",
      "sourcemaps": null
    },
    {
      "name": "esbuild",
      "result": "\"use strict\";\nimport _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./sell.scss?vue&type=style&index=0&src=2275ff6a&scoped=2275ff6a&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-2275ff6a\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\"]]);\n",
      "start": 1714699769525,
      "end": 1714699769608,
      "order": "normal",
      "sourcemaps": "{\n  \"version\": 3,\n  \"sources\": [\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\"],\n  \"sourcesContent\": [\"import _sfc_main from \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\\\";\\nexport * from \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\\\";\\nimport \\\"./sell.scss?vue&type=style&index=0&src=2275ff6a&scoped=2275ff6a&lang.scss\\\";\\nimport \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=style&index=1&lang.scss\\\";\\nimport _export_sfc from \\\"\\\\0plugin-vue:export-helper\\\";\\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\\\"__scopeId\\\", \\\"data-v-2275ff6a\\\"], [\\\"__file\\\", \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\\\"]]);\\n\"],\n  \"mappings\": \";AAAA,OAAO,eAAe;AACtB,cAAc;AACd,OAAO;AACP,OAAO;AACP,OAAO,iBAAiB;AACxB,eAA+B,4BAAY,WAAW,CAAC,CAAC,aAAa,iBAAiB,GAAG,CAAC,UAAU,iEAAiE,CAAC,CAAC;\",\n  \"names\": []\n}\n"
    },
    {
      "name": "vite:define",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1714699769608,
      "end": 1714699769608,
      "order": "normal"
    },
    {
      "name": "unplugin-auto-import",
      "start": 1714699769608,
      "end": 1714699769609,
      "order": "post"
    },
    {
      "name": "unplugin-vue-components",
      "result": "/* unplugin-vue-components disabled */\"use strict\";\nimport _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./sell.scss?vue&type=style&index=0&src=2275ff6a&scoped=2275ff6a&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-2275ff6a\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\"]]);\n",
      "start": 1714699769609,
      "end": 1714699769609,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue"
        ],
        "sourcesContent": [
          "\"use strict\";\nimport _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./sell.scss?vue&type=style&index=0&src=2275ff6a&scoped=2275ff6a&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-2275ff6a\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/sell.vue\"]]);\n"
        ],
        "names": [],
        "mappings": "sCAAA;AACA;AACA;AACA;AACA;AACA;AACA;"
      }
    },
    {
      "name": "vite:style-import",
      "start": 1714699769609,
      "end": 1714699769609,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1714699769609,
      "end": 1714699769609,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1714699769609,
      "end": 1714699769609,
      "order": "normal"
    }
  ]
}
