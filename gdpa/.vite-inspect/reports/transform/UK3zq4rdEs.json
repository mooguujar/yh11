{
  "resolvedId": "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "<template>\n  <div\n    class=\"coinBuy\"\n    :class=\"{ 'coin-buy-recommend': showRecommendOrders, 'h-[100%]': Tutorial }\"\n    ref=\"coinBuy\"\n  >\n    <div className=\"container !max-w-[100%]\">\n      <p\n        v-if=\"gd_buy_fixmomey != 1\"\n        className=\"buytext\"\n      >\n        买币金额\n      </p>\n      <van-cell-group\n        inset\n        v-if=\"gd_buy_fixmomey != 1\"\n      >\n        <van-field\n          v-model=\"num\"\n          class=\"buy_input_f\"\n          type=\"digit\"\n          :disabled=\"sellData.is_split == 2\"\n          :class=\"sellData.is_split == 2 ? 'is_split_2' : ''\"\n          :placeholder=\"\n            sellData.split_min || sellData.split_min === 0\n              ? '限额最低' +\n                (sellData.split_min == 0 ? 10.0 : (+sellData.split_min).toTruncFixed(2))\n              : '限额最低10.00'\n          \"\n        >\n          <!-- '~' +\n                (+sellData.remaining_num).toTruncFixed(2) -->\n          <template #button>\n            <span\n              v-if=\"sellData.is_split == 1 && sellData.remaining_num\"\n              @click=\"num = sellData.remaining_num\"\n            >\n              全部\n            </span>\n          </template>\n        </van-field>\n      </van-cell-group>\n      <div\n        class=\"split-min\"\n        v-if=\"gd_buy_fixmomey != 1 && sellData?.is_split === 1\"\n      >\n        推荐购买\n        <span class=\"red_f\">\n          {{\n            sellData.rec_buy_amount_interval[0] == sellData.rec_buy_amount_interval[1]\n              ? sellData.rec_buy_amount_interval[0]\n              : sellData.rec_buy_amount_interval[0] + '~' + sellData.rec_buy_amount_interval[1]\n          }}\n        </span>\n        {{ sellData.rec_buy_amount_interval[0] == sellData.rec_buy_amount_interval[1] ? '' : '或' }}\n        <span\n          v-if=\"!(sellData.rec_buy_amount_interval[0] == sellData.rec_buy_amount_interval[1])\"\n          class=\"red_f\"\n        >\n          全部\n        </span>\n      </div>\n      <div\n        class=\"amount_num_t\"\n        v-if=\"gd_buy_fixmomey == 1\"\n      >\n        <p class=\"text-[29px] mb-[15px]\">订单金额</p>\n        <p class=\"leading-[56px]\">\n          <span class=\"text-[red] font-[400] text-[55px]\">{{ money.toFixed(2) }}</span>\n          <span class=\"text-[26px] ml-[15px] text-[#a6a6a6]\">CNY</span>\n        </p>\n      </div>\n      <p className=\"paytext\">\n        付款方式\n        <span\n          v-if=\"gd_buy_fixmomey == 1 && !gd_buyfix_count1age\"\n          class=\"right text-[#0fa3e9]\"\n          @click=\"router.go(-1)\"\n        >\n          更多付款方式\n        </span>\n      </p>\n      <div className=\"paypic\">\n        <van-row>\n          <template v-for=\"(item, i) in paylist\">\n            <van-col\n              span=\"7.5\"\n              class=\"payBox\"\n              :key=\"item\"\n              v-if=\"item != 'USDT_TRC20'\"\n              :class=\"\n                coin_protocol == item\n                  ? i == 3\n                    ? 'active !m-[0]'\n                    : 'active'\n                  : i == 3\n                  ? '!m-[0]'\n                  : ''\n              \"\n              @click=\"onlineCharge ? ((coin_protocol = item), updateCardList()) : payBoxTap(item)\"\n            >\n              <div>\n                <van-image\n                  :class=\"\n                    item == 'BANK'\n                      ? 'credit'\n                      : item == 'ALIPAY'\n                      ? 'alipay'\n                      : item == 'WXPAY'\n                      ? 'WeChatPay'\n                      : item == 'SZRMB'\n                      ? 'alipay SZRMB'\n                      : '无'\n                  \"\n                  lazy-load\n                  :src=\"\n                    requireImg(\n                      'common/' +\n                        (item == 'BANK'\n                          ? 'credit'\n                          : item == 'ALIPAY'\n                          ? 'ALIPAY'\n                          : item == 'WXPAY'\n                          ? 'WeChatPay'\n                          : item == 'SZRMB'\n                          ? 'SZRMB'\n                          : '无') +\n                        '.png'\n                    )\n                  \"\n                />\n                {{\n                  item == 'BANK'\n                    ? '银行卡'\n                    : item == 'ALIPAY'\n                    ? '支付宝'\n                    : item == 'WXPAY'\n                    ? '微信'\n                    : item == 'SZRMB'\n                    ? '数字人民币'\n                    : '无'\n                }}\n              </div>\n\n              <template v-if=\"isUnBind(item) && !onlineCharge\">\n                <div class=\"unbind-mask\"></div>\n                <div class=\"unbind-text\">未绑定</div>\n              </template>\n            </van-col>\n          </template>\n          <!-- <van-col span=\"7.5\" class=\"payBox\"\n            v-if=\"sellData.coin_protocol ? sellData.coin_protocol.includes('BANK') : withdrawddresslist.some((e) => { return e.coin_protocol == 'BANK' && e.status === 1 })\"\n            :class=\"coin_protocol == 'BANK' ? 'active' : ''\" @click=\"payBoxTap('BANK')\">\n            <div>\n              <van-image class=\"credit\" lazy-load :src=\"requireImg('common/credit.png')\" />\n              银行卡\n            </div>\n          </van-col> -->\n        </van-row>\n      </div>\n\n      <van-dropdown-menu\n        v-if=\"downList.length > 0 && !onlineCharge\"\n        class=\"mt-[20px] dropdown_f\"\n        :overlay=\"false\"\n      >\n        <van-dropdown-item\n          class=\"dropdown_item_f jz_f\"\n          :class=\"{ 'quick-coin': $route.query.active === '1' }\"\n          v-model=\"value1\"\n          @open=\"onDropdownItemOpen(sellData.order_id)\"\n          @close=\"onDropdownItemClose\"\n          @closed=\"onDropdownItemClosed\"\n          ref=\"itemRef\"\n        >\n          <template #title>\n            <van-image\n              v-if=\"\n                locImgList.includes(\n                  downList.find(item => {\n                    return item.id == value1\n                  })?.account_bankcode as string\n                )\n              \"\n              lazy-load\n              class=\"credit left mr-[20px]\"\n              :src=\"['ALIPAY', 'WXPAY'].includes(currActiveCard.coin_protocol)?requireImg(`mine/${currActiveCard.coin_protocol === 'ALIPAY' ? 'zfb_icon' : 'wx_icon'}.png`):requireImg('common/'+downList.find((item: any) => {\n                  return item.id == value1\n                })?.account_bankcode+'.png')\"\n            />\n            <van-image\n              v-else\n              lazy-load\n              class=\"credit left mr-[20px]\"\n              :src=\"imgserver_url+'/static/default/bank/'+downList.find((item: any) => {\n                  return item.id == value1\n                })?.account_bankcode+'.png'\"\n            />\n            <div class=\"flex flex-col justify-between\">\n              <p class=\"text-[24px]\">\n                {{\n                  downList.find((item: any) => {\n                    return item.id == value1\n                  })?.account_bankname\n                }}\n                <span v-if=\"['ALIPAY', 'WXPAY'].includes(currActiveCard.coin_protocol)\">\n                  {{ currActiveCard.coin_address }}\n                </span>\n                <span v-if=\"['BANK', 'SZRMB'].includes(currActiveCard.coin_protocol)\">\n                  {{ currActiveCard.coin_address.slice(-4) }}\n                </span>\n              </p>\n              <p class=\"mt-[4px] text-[24px] text-[#9d9999]\">\n                {{\n                  downList.find((item: any) => {\n                    return item.id == value1\n                  })?.account_bank_realname\n                }}\n              </p>\n            </div>\n            <div\n              class=\"switchover text-[#0875f9] text-[24px]\"\n              v-if=\"downList.length > 1\"\n            >\n              更多\n            </div>\n          </template>\n          <div\n            class=\"drop_f_item flex_s\"\n            v-for=\"(item, index) in downList.filter((item: any) => item.id !== value1 && item.status === 1)\"\n            @click=\"slectMenu(item)\"\n            :key=\"item.id\"\n          >\n            <van-image\n              v-if=\"locImgList.includes(item.account_bankcode)\"\n              lazy-load\n              class=\"credit left mr-[20px]\"\n              :src=\"\n                ['ALIPAY', 'WXPAY'].includes(item.coin_protocol)\n                  ? requireImg(\n                      `mine/${\n                        currActiveCard.coin_protocol === 'ALIPAY' ? 'zfb_icon' : 'wx_icon'\n                      }.png`\n                    )\n                  : requireImg('common/' + item.account_bankcode + '.png')\n              \"\n            />\n            <van-image\n              v-else\n              lazy-load\n              class=\"credit left mr-[20px]\"\n              :src=\"imgserver_url + '/static/default/bank/' + item.account_bankcode + '.png'\"\n            />\n            <div class=\"flex flex-col justify-between\">\n              <p class=\"text-[24px]\">\n                {{ item.account_bankname }}\n                <span v-if=\"['ALIPAY', 'WXPAY'].includes(item.coin_protocol)\">\n                  {{ item.coin_address }}\n                </span>\n                <span v-if=\"['BANK', 'SZRMB'].includes(item.coin_protocol)\">\n                  {{ item.coin_address.slice(-4) }}\n                </span>\n              </p>\n              <p class=\"mt-[4px] text-[24px] text-[#9d9999]\">{{ item.account_bank_realname }}</p>\n            </div>\n            <van-image\n              v-if=\"item.id == value1\"\n              class=\"rightimg mr-[15px]\"\n              :src=\"requireImg('common/success.png')\"\n            />\n            <van-image\n              v-else\n              class=\"rightimg mr-[15px]\"\n              :src=\"requireImg('common/hui.png')\"\n            />\n          </div>\n          <div\n            v-if=\"downList.length > 1\"\n            class=\"switchover_s text-[#0875f9] text-[24px]\"\n            @click=\"menuSwitch(false)\"\n          >\n            收起\n          </div>\n        </van-dropdown-item>\n      </van-dropdown-menu>\n      <!-- <p\n        v-if=\"gd_buy_fixmomey == 1\"\n        class=\"text-[#000] font-[400] text-[29px] mt-[50px]\"\n      >\n        温馨提示：\n      </p> -->\n      <!-- <div\n        v-if=\"gd_buy_fixmomey == 1\"\n        class=\"text_tips text-[#a6a8a9] text-[25px] mt-[10px] mb-[-20px] leading-[46px]\"\n      >\n        <p>1 下单后请在15分钟内完成付款,并主动上传付款凭证</p>\n        <p>2 无法付款请主动取消订单,避免影响后续充值权益</p>\n        <p>3 请按照下单金额进行付款,修改金额造成的损失由您承担</p>\n        <p>4 超过15分钟订单将自动撤销,造成损害自行承担！</p>\n      </div> -->\n      <van-button\n        ref=\"buyButton\"\n        type=\"primary\"\n        class=\"buyButton\"\n        @click=\"buyCoins(num, coin_protocol, sellData.order_id)\"\n      >\n        {{ onlineCharge ? '下单购买' : `购买${coin_name}币` }}\n      </van-button>\n      <van-button\n        v-if=\"gd_buy_fixmomey == 1\"\n        ref=\"buyButton\"\n        type=\"primary\"\n        class=\"buyButton !bg-[#bfeafa] Unborder primaryColor\"\n        @click=\"Tutorial = true\"\n      >\n        查看使用教程\n      </van-button>\n    </div>\n    <!-- <div class=\"w-[100%] fixed bottom-[140px] van-safe-area-bottom left-[0]\">\n      <van-button\n        ref=\"buyButton\"\n        v-if=\"gd_buy_fixmomey == 1\"\n        type=\"primary\"\n        class=\"buyButton center block\"\n        @click=\"buyCoins(num, coin_protocol, sellData.order_id)\"\n      >\n        {{ onlineCharge ? '下单购买' : `购买${coin_name}币` }}\n      </van-button>\n    </div> -->\n    <div\n      v-if=\"showRecommendOrders\"\n      class=\"recommend-orders-container\"\n    >\n      <div class=\"recommend-text\">暂无订单匹配，快速买币推荐：</div>\n\n      <van-skeleton\n        title\n        avatar\n        :row=\"3\"\n        :loading=\"false\"\n        v-for=\"(item, i) in orderList\"\n        :key=\"i\"\n      >\n        <div class=\"buyList\">\n          <van-row\n            justify=\"space-between\"\n            class=\"content-container\"\n          >\n            <van-col\n              span=\"8\"\n              class=\"col-left\"\n            >\n              <div class=\"user-info-container flex items-center\">\n                <van-image\n                  lazy-load\n                  class=\"avatar\"\n                  :src=\"imgserver_url + item.headimg\"\n                />\n                <span class=\"userName flex items-center\">{{ item.nickname }}</span>\n              </div>\n              <p class=\"usert\">交易成功率{{ item.statistics?.completion_rate || '0.00' }}%</p>\n              <p class=\"usert\">平均回应时长{{ item.statistics?.response_time || '0' }}分钟</p>\n            </van-col>\n            <van-col class=\"col-middle flex flex-col justify-between\">\n              <p\n                class=\"contentText flex items-center\"\n                :class=\"item.is_split == 1 ? '' : 'colorred'\"\n              >\n                <span>{{ item.is_split == 1 ? '可拆分' : '不可拆分' }}</span>\n                <span\n                  class=\"mixinNum\"\n                  v-if=\"item.is_split == 1\"\n                >\n                  最低购买{{ item.split_min == 0 ? 10 : item.split_min }}\n                </span>\n              </p>\n              <van-row\n                justify=\"start\"\n                gutter=\"8\"\n                class=\"pay-way-container\"\n              >\n                <van-col\n                  v-if=\"item.coin_protocol.includes('BANK')\"\n                  class=\"payBox\"\n                >\n                  <van-image\n                    class=\"credit\"\n                    lazy-load\n                    :src=\"requireImg('common/credit.png')\"\n                  />\n                </van-col>\n                <van-col\n                  v-if=\"item.coin_protocol.includes('WXPAY')\"\n                  class=\"payBox\"\n                >\n                  <van-image\n                    class=\"WeChatPay\"\n                    lazy-load\n                    :src=\"requireImg('common/WeChatPay.png')\"\n                  />\n                </van-col>\n                <van-col\n                  v-if=\"item.coin_protocol.includes('ALIPAY')\"\n                  class=\"payBox\"\n                >\n                  <van-image\n                    class=\"alipay\"\n                    lazy-load\n                    :src=\"requireImg('common/ALIPAY.png')\"\n                  />\n                </van-col>\n                <van-col\n                  v-if=\"item.coin_protocol.includes('SZRMB')\"\n                  class=\"payBox\"\n                >\n                  <van-image\n                    class=\"SZRMB\"\n                    lazy-load\n                    :src=\"requireImg('common/SZRMB.png')\"\n                  />\n                </van-col>\n              </van-row>\n            </van-col>\n            <van-col class=\"col-right flex flex-col justify-between\">\n              <p class=\"amountMoney flex items-center justify-end\">\n                <span>{{ (+item.remaining_num).toTruncFixed(2) }}</span>\n                <span class=\"unit\">{{ onlineCharge ? 'CNY' : coin_name }}</span>\n              </p>\n              <van-button\n                type=\"primary\"\n                class=\"buyButton\"\n                @click=\"\n                  router.push(\n                    '/selfbuy_coin?money=' +\n                      money +\n                      '&gd_buy_fixmomey=' +\n                      gd_buy_fixmomey +\n                      '&data=' +\n                      JSON.stringify(item)\n                  )\n                \"\n              >\n                购买\n              </van-button>\n            </van-col>\n          </van-row>\n        </div>\n      </van-skeleton>\n    </div>\n\n    <van-popup\n      v-model:show=\"unBindPaymentVisible\"\n      round\n    >\n      <div class=\"unbind-payment-popup\">\n        <div class=\"unbind-payment-popup__text\">\n          <template v-if=\"unBindPaymentPopupProps.status === BIND_STATUS.UNBIND\">\n            尚未绑定该付款方式\n            <br />\n            是否去绑定？\n          </template>\n          <template v-if=\"unBindPaymentPopupProps.status === BIND_STATUS.PROCESS\">\n            该付款方式正在审核中\n            <br />\n          </template>\n        </div>\n        <div class=\"unbind-payment-popup__btn\">\n          <template v-if=\"unBindPaymentPopupProps.status === BIND_STATUS.UNBIND\">\n            <van-button\n              type=\"primary\"\n              block\n              @click=\"onUnBindConfirm(unBindPaymentPopupProps.link)\"\n            >\n              去绑定\n            </van-button>\n            <van-button\n              type=\"primary\"\n              color=\"#777777\"\n              block\n              @click=\"unBindPaymentVisible = false\"\n            >\n              取消\n            </van-button>\n          </template>\n          <template v-if=\"unBindPaymentPopupProps.status === BIND_STATUS.PROCESS\">\n            <van-button\n              type=\"primary\"\n              color=\"#777777\"\n              block\n              @click=\"unBindPaymentVisible = false\"\n            >\n              关闭\n            </van-button>\n          </template>\n        </div>\n      </div>\n    </van-popup>\n\n    <van-dialog\n      v-model:show=\"Tutorial\"\n      class=\"confirm-dialog Tutorial_dialog\"\n      title=\"收银台教程\"\n      theme=\"round-button\"\n      :show-confirm-button=\"false\"\n      teleport=\"body\"\n    >\n      <i\n        class=\"icon-close block close-dark\"\n        @click=\"Tutorial = false\"\n      ></i>\n\n      <div class=\"text-center\">\n        <van-image\n          class=\"payImg\"\n          lazy-load\n          :src=\"kefu_shouyintaijiaocheng_url\"\n        />\n      </div>\n    </van-dialog>\n  </div>\n</template>\n<script setup lang=\"ts\">\nconst coin_name = sessionStorage.getItem('coin_name')\nimport { Buy, BuyCancel, BuyQuickly, SellOrders as recommendOrders } from '@/apis/buySellCoin'\nimport error from '@/assets/images/common/error.png'\nimport info from '@/assets/images/common/info.png'\nimport Dialog from '@/components/CommonPopup/Dialog'\nimport { useCoinBuySellStore } from '@/store/modules/coinBuySell'\nimport { useEntryStore } from '@/store/modules/entry'\nimport { withdrawddresslist as IWithdrawddressList } from '@/store/types/buySellCoin'\nimport { IQBuyConfig } from '@/store/types/entry'\nimport { mergeHrefParams, requireImg } from '@/utils/tools'\nimport { storeToRefs } from 'pinia'\nimport { showToast } from 'vant'\nimport { CSSProperties, computed, reactive, ref, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { PAY_WAY_LIST } from '../tools'\n\nconst EntryStore = useEntryStore()\nconst { config } = storeToRefs(EntryStore)\n\nconst unBindPaymentVisible = ref(false)\nconst unBindPaymentPopupProps = reactive<{\n  status?: number | undefined\n  link?: string | any\n}>({})\n\nconst search = new URLSearchParams(mergeHrefParams())\nconst hs = search.get('hs') || ''\nconst wideMode = hs === 'h'\nconst targetRoute = wideMode ? 'wideOrderCreate' : 'orderCreate'\n\nconst Tutorial = ref(false) //教程弹窗\nconst is_money_match = ref() //新加参数\nis_money_match.value = search.get('is_money_match') || ''\nconst BIND_STATUS = {\n  BIND: 0,\n  UNBIND: 1,\n  PROCESS: 2\n}\n\nconst locImgList = ref(['SZRMB', 'ZDYYH', 'ALIPAY', 'WXPAY'])\n\n// 是否显示买币推荐\nconst showRecommendOrders = ref(false)\n// 买币推荐列表\nconst orderList = ref<any>([])\n\nconst gd_buyfix_count1age = ref(sessionStorage.getItem('gd_buyfix_count1age'))\nconst itemRef = ref()\nconst value1 = ref(0)\nconst downList = ref<IWithdrawddressList[]>([])\n\nconst buyButton = ref()\n\n// 下拉列表展开\nconst onDropdownItemOpen = (sell_order_id: string) => {\n  setTimeout(() => {\n    const _list = downList.value.filter(\n      (item: any) => item.id !== value1.value && item.status === 1\n    )\n    // 买币按钮初始marginTop\n    const buyBtnTop = (getComputedStyle(buyButton.value.$el, null) as unknown as CSSProperties)[\n      'margin-top'\n    ]\n    // 单个选项item高度\n    const itemHeight = document.querySelector('.drop_f_item')!.clientHeight\n    // 卡列表高度\n    const listHeight = itemHeight * _list.length\n    // 宽度计算因子\n    const factor = 750 / window.innerWidth\n    // 更新买币按钮marginTop\n    buyButton.value.$el.style.marginTop = listHeight + parseFloat(buyBtnTop as string) + 8 + 'px'\n  })\n}\n// 下拉列表关闭----动画未结束\nconst onDropdownItemClose = () => {\n  document.querySelector('.van-dropdown-item__content')!.scrollTop = 0\n}\n// 下拉列表关闭----动画结束\nconst onDropdownItemClosed = () => {\n  buyButton.value.$el.style.marginTop = '0.78667rem'\n}\nconst menuSwitch = (status?: boolean) => {\n  itemRef.value.toggle(status)\n  document.querySelector('.van-dropdown-item__content')!.scrollTop = 0\n}\nconst slectMenu = (item: { id: number }) => {\n  value1.value = item.id\n  itemRef.value.toggle()\n}\nconst router = useRouter()\nconst route = useRoute()\nconst { query, path } = route\nconst onlineCharge = ref(path.includes('onlineCharge'))\nlet gd_buy_fixmomey = 0\ngd_buy_fixmomey = query.gd_buy_fixmomey ? +query.gd_buy_fixmomey : 0\nlet money = 0\nmoney = query.money ? +query.money : 0\n\nif (gd_buy_fixmomey == 1 && handleClick())\n  Dialog.keeptime({\n    title: '温馨提示',\n    message: `\n    <p>1.下单后，<span class='red_f'> 请在15分钟内完成付款并上传回单！</span></p>\n    <p>2.请勿超时或者修改金额，<span class='red_f'>多付少付均无法到账！</span></p>\n    <p>3.请勿发送红包或者私下交流转账！</p>\n    <p>4.无法付款，请取消订单！</p>\n    `,\n    allowHtml: true,\n    messageAlign: 'left',\n    className: 'kgdialog',\n    confirmButtonText: '朕知道了',\n    action: (checked: any) => {\n      console.log('checked', checked)\n      if (checked) {\n        const currentTime: any = new Date()\n        localStorage.setItem('gd_buy_fixmomeyClickTime', currentTime)\n      }\n    }\n  })\n\nfunction handleClick() {\n  let lastClickTime: any = localStorage.getItem('gd_buy_fixmomeyClickTime')\n  const currentTime: any = new Date()\n  if (\n    lastClickTime === null ||\n    currentTime - new Date(lastClickTime).getTime() > 24 * 60 * 60 * 1000\n    // currentTime - new Date(lastClickTime).getTime() > 6 * 1000\n  ) {\n    return true\n  } else {\n    return false\n  }\n}\nconst operation_verification = sessionStorage.getItem('operation_verification')\nonlineCharge.value = !!operation_verification\n  ? true\n  : +(query.onlineCharge as string) == 1\n  ? true\n  : false\n\n// 当前选中的卡支付方式\nconst currActiveCard = computed(() => {\n  return (\n    downList.value.find((item: any) => {\n      return item.id == value1.value\n    }) || ({} as Record<string, any>)\n  )\n})\n// 图片资源域名\nconst imgserver_url = computed(() => {\n  // console.log('(imgserver_url',(config.value.Web_Set_DefaultInfo?.imgserver_url as any)?.v);\n  return (config.value.Web_Set_DefaultInfo?.imgserver_url as any)?.v || ''\n})\n// 图片资源域名\nconst kefu_shouyintaijiaocheng_url: any = computed(() => {\n  // console.log('(imgserver_url',(config.value.Web_Set_DefaultInfo?.imgserver_url as any)?.v);\n  return (\n    imgserver_url.value +\n      (config.value.Web_Set_DefaultInfo?.kefu_shouyintaijiaocheng_url as any)?.v || ''\n  )\n})\n// 配置是否开启买币推荐\nconst isOpenRecommendConfig = computed(\n  () => (config.value.Web_BuySell_Coin_Times?.QBuy_Config as IQBuyConfig)?.v === '1'\n)\n// 买币推荐范围配置列表\nconst recommendRangeList = computed(\n  () => (config.value.Web_BuySell_Coin_Times?.QBuy_Config as IQBuyConfig)?.config ?? []\n)\n\n// 当前付款方式是否已绑卡\nconst paymentStatus = computed(() => {\n  return downList.value.length > 0 ? BIND_STATUS.BIND : BIND_STATUS.UNBIND\n})\nconst wechatPaymentStatus = computed(() => {\n  const wechat = withdrawddresslist.value.find(address => address.coin_protocol === 'WXPAY')\n  if (!wechat || wechat.status === 2) {\n    return BIND_STATUS.UNBIND\n  }\n  if (wechat.status === -1) {\n    return BIND_STATUS.PROCESS\n  }\n  return BIND_STATUS.BIND\n})\nconst alipayPaymentInfo = computed(() => {\n  const wechat = withdrawddresslist.value.find(address => address.coin_protocol === 'ALIPAY')\n  if (!wechat || wechat.status === 2) {\n    return BIND_STATUS.UNBIND\n  }\n  if (wechat.status === -1) {\n    return BIND_STATUS.PROCESS\n  }\n  return BIND_STATUS.BIND\n})\nconst bankPaymentInfo = computed(() => {\n  const bank = withdrawddresslist.value.find(address => address.coin_protocol === 'BANK')\n  if (!bank || bank.status === 2) {\n    return BIND_STATUS.UNBIND\n  }\n  if (bank.status === -1) {\n    return BIND_STATUS.PROCESS\n  }\n  return BIND_STATUS.BIND\n})\nconst SZRMBPaymentInfo = computed(() => {\n  const SZRMB = withdrawddresslist.value.find(address => address.coin_protocol === 'SZRMB')\n  if (!SZRMB || SZRMB.status === 2) {\n    return BIND_STATUS.UNBIND\n  }\n  if (SZRMB.status === -1) {\n    return BIND_STATUS.PROCESS\n  }\n  return BIND_STATUS.BIND\n})\nconst isUnBind = computed(() => {\n  return (item: string) =>\n    !withdrawddresslist.value.some(e => {\n      return e.coin_protocol == item && e.status === 1\n    })\n})\n\nconst verifyPayment = () => {\n  if (paymentStatus.value !== BIND_STATUS.BIND) {\n    unBindPaymentVisible.value = true\n    unBindPaymentPopupProps.status = paymentStatus.value\n    unBindPaymentPopupProps.link = `/payment_list?way=${coin_protocol.value.toLocaleLowerCase()}`\n    return false\n  }\n  return true\n}\n\nwatch(unBindPaymentVisible, val => {\n  if (!val) {\n    unBindPaymentPopupProps.status = undefined\n    unBindPaymentPopupProps.link = undefined\n  }\n})\n\nconst onUnBindConfirm = (link: string) => {\n  router.push(link)\n}\n\ninterface Props {\n  sellData: any\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  sellData: {}\n})\nconst paylist = ref<any>([])\nconst coin = useCoinBuySellStore()\nconst { getWithdrawddresslist, getBuySellCoinInfo } = coin\nconst { userInfo, withdrawddresslist, buy_orders } = storeToRefs(coin)\n\ngetWithdrawddresslist({}).then(() => {\n  // console.log('props.sellData', props.sellData.coin_protocol);\n  withdrawddresslist.value.forEach(e => {\n    e.status === 1 && paylist.value.push(e.coin_protocol)\n  })\n\n  if (props.sellData.coin_protocol) {\n    paylist.value = props.sellData.coin_protocol?.split(',')\n    coin_protocol.value = props.sellData.coin_protocol?.split(',')[0]\n  } else {\n    paylist.value = PAY_WAY_LIST\n\n    for (let i = 0; i < PAY_WAY_LIST.length; i++) {\n      const payWayInfo = withdrawddresslist.value.find(\n        card => card.coin_protocol === PAY_WAY_LIST[i] && card.status === 1\n      )\n      if (payWayInfo) {\n        coin_protocol.value = payWayInfo.coin_protocol\n        break\n      }\n    }\n  }\n\n  updateCardList()\n})\n\nconst coinBuy = ref()\n\n// 滚动到推荐买币视图\nconst scrollToRecommendView = () => {\n  let coinBuyContainer = document.querySelector('.coinBuy .container')\n\n  if (coinBuyContainer) {\n    coinBuy.value.scrollTop = coinBuyContainer.clientHeight\n    coinBuyContainer = null\n  }\n}\n\n// 搜索推荐金额范围\nconst searchAmount = computed(() => {\n  let amountFrom, amountTo\n\n  for (const target of recommendRangeList.value) {\n    const { q, v } = target\n    const [from, to] = q.split('-')\n    const vRate = parseFloat(v)\n\n    if (+from <= +num.value && +num.value <= +to) {\n      amountFrom = +num.value * (1 - vRate / 100)\n      amountTo = +num.value * (1 + vRate / 100)\n      break\n    }\n  }\n\n  if (!amountFrom && !amountTo) return num.value\n  return `${amountFrom}-${amountTo}`\n})\n\nconst buyCoins = async (num: any, coin_protocol: any, sell_order_id?: string) => {\n  // console.log('money', gd_buy_fixmomey, money, num)\n  if (gd_buy_fixmomey == 1) {\n    num = money\n  }\n  if (onlineCharge.value && gd_buy_fixmomey && money != num) {\n    return showToast({\n      message: '请输入固定' + money + '的买入金额',\n      icon: info\n    })\n  }\n\n  !onlineCharge.value && (await getWithdrawddresslist({}))\n  if (!onlineCharge.value && !verifyPayment()) {\n    return false\n  }\n\n  if (!!!num)\n    return showToast({\n      message: '请输入买入金额',\n      icon: info\n    })\n\n  if (props.sellData.rec_buy_amount_interval) {\n    const [min, max] = props.sellData.rec_buy_amount_interval\n    if (num < min || (num > max && +num !== +props.sellData.remaining_num)) {\n      return showToast({\n        message: `推荐购买 ${min}~${max} 或 全部`,\n        icon: info\n      })\n    }\n  }\n\n  if (num > +props.sellData.remaining_num)\n    return showToast({\n      message: '剩余可购买金额' + (+props.sellData.remaining_num).toTruncFixed(3),\n      icon: info\n    })\n  const withdrawddress_id = !!!value1.value ? '' : value1.value.toString() || ''\n  const operation_verification = sessionStorage.getItem('operation_verification') || ''\n  const merchantorderid = sessionStorage.getItem('merchantorderid') || ''\n  const data = sell_order_id\n    ? Buy({\n        is_money_match: gd_buy_fixmomey == 1 ? is_money_match.value : '',\n        num,\n        coin_protocol,\n        withdrawddress_id,\n        sell_order_id,\n        operation_verification,\n        merchantorderid\n      })\n    : BuyQuickly({ num, coin_protocol, withdrawddress_id }, { showErrorToast: false })\n  data.then(async (res: Record<string, any>) => {\n    const { order_id } = res\n    if (!order_id) {\n      if (res.code === 10208) {\n        await getBuySellCoinInfo({})\n        const msgtext = `\n          </br>\n          </br>\n          你还有进行中的订单 <span class=\"red_f\">【${buy_orders.value[0].buy_num}元】</span> ，请完成支付或者取消重新下单。</br>\n          </br>\n          </br>\n          `\n        Dialog.confirm({\n          title: '温馨提示',\n          message: msgtext,\n          allowHtml: true,\n          messageAlign: 'center',\n          className: 'selldialog',\n          confirmButtonText: '前往支付',\n          cancelButtonText: '取消上笔订单',\n          action: () => {\n            router.push(`/${targetRoute}?order_id=` + buy_orders.value[0].buy_order_id)\n          },\n          cancelAction: () => {\n            BuyCancel({ buy_order_id: buy_orders.value[0].buy_order_id }).then(() => {\n              showToast({\n                message: '操作成功',\n                icon: info\n              })\n            })\n          }\n        })\n        return\n      }\n      if (res.code === 10229) {\n        const msgtext = `\n          </br>\n          </br>\n          订单失效，请返回重新下单!\n          </br>\n          </br>\n          `\n        Dialog.confirm({\n          title: '温馨提示',\n          message: msgtext,\n          allowHtml: true,\n          messageAlign: 'center',\n          className: 'selldialog',\n          confirmButtonText: '返回',\n          cancelButtonText: '朕知道了',\n          action: () => {\n            router.go(-1)\n          },\n          cancelAction: () => {}\n        })\n        return\n      }\n      if (!sell_order_id) {\n        // 存在进行中的订单, 需先完成\n        console.log('查无匹配订单，您可使用推荐购买金额')\n\n        if (!isOpenRecommendConfig.value) return\n\n        console.log('获取推荐金额...')\n\n        const params = {\n          coin_protocol: coin_protocol,\n          amount: searchAmount.value,\n          pagesize: 5\n        }\n        recommendOrders(params).then(res => {\n          const { count, list } = res\n\n          if (!count) {\n            showRecommendOrders.value = false\n            return showToast({\n              message: '暂无匹配订单，请稍后在试',\n              icon: error\n            })\n          }\n\n          orderList.value = list\n          showRecommendOrders.value = true\n\n          setTimeout(() => {\n            scrollToRecommendView()\n          }, 100)\n        })\n      }\n      return\n    }\n    // console.log('data', order_id) //\"B169149207864212970\"\n    sessionStorage.setItem('gd_buyfix_count1age', '')\n    if (gd_buy_fixmomey == 1) {\n      const item = {\n        value: order_id,\n        expiry: new Date().getTime() + 30 * 60 * 1000 // 过期时间（毫秒）\n      }\n      const merchantorderid = search.get('merchantorderid') || ''\n      localStorage.setItem('merchantorderid', merchantorderid)\n      localStorage.setItem('order_id', JSON.stringify(item))\n    }\n    getBuySellCoinInfo({})\n    props.sellData.remaining_num = (\n      Number(props.sellData.remaining_num) - Number(num)\n    ).toTruncFixed(3)\n    router\n      .replace({ path: route.path, query: { data: JSON.stringify(props.sellData) } })\n      .then(() => {\n        sessionStorage.setItem('pay_cardid', '')\n        sessionStorage.setItem('pay_bankname', '')\n        if (route.fullPath.includes('index')) {\n          router.push(`/${targetRoute}?order_id=` + order_id)\n        } else {\n          router.replace(`/${targetRoute}?order_id=` + order_id)\n        }\n      })\n  })\n}\n\nconst coin_protocol = ref('')\nconst num = ref('')\n// 支付方式映射表，可配置相应信息\nconst payWayMap = {\n  BANK: {\n    bindPath: '/bank_card'\n  },\n  ALIPAY: {\n    bindPath: '/alipay'\n  },\n  WXPAY: {\n    bindPath: '/wechat'\n  },\n  SZRMB: {\n    bindPath: '/rmb'\n  }\n} as Record<string, any>\n\nnum.value = props.sellData.is_split == 2 ? props.sellData.remaining_num : ''\n\n// 更新当前选中付款方式的卡列表\nconst updateCardList = () => {\n  downList.value = withdrawddresslist.value.filter(\n    item => item.coin_protocol === coin_protocol.value && item.status === 1\n  )\n  value1.value =\n    downList.value.find(item => {\n      return item.def_card === 1\n    })?.id || downList.value[0]?.id\n}\nconst payBoxTap = (payWay: string) => {\n  if (isUnBind.value(payWay)) {\n    Dialog.confirm({\n      title: '',\n      message: '您还未绑定该收款方式,是否前往绑定',\n      allowHtml: true,\n      messageAlign: 'center',\n      className: 'dialog-bind-pay-way',\n      confirmButtonText: '确定',\n      cancelButtonText: '取消',\n      action: () => {\n        router.push(`/payment_list?way=${payWay.toLocaleLowerCase()}`)\n      },\n      teleport: '.coinBuy'\n    })\n\n    return\n  }\n  coin_protocol.value = payWay\n  updateCardList()\n  buyButton.value.$el.style.marginTop = '0.78667rem'\n}\n</script>\n<style lang=\"scss\" src=\"./QuickCoins.scss\" scoped />\n<style lang=\"scss\">\n.dialog-bind-pay-way {\n  padding-bottom: 32px;\n  .dialog-title {\n    height: 50px;\n  }\n  .dialog-content {\n    height: 120px;\n    text-align: center;\n  }\n}\n\n.Tutorial_dialog {\n  top: 50%;\n  .van-dialog__content {\n    padding: 20px;\n    .text-center {\n      height: 1128px;\n      overflow: auto;\n    }\n  }\n}\n</style>\n",
      "start": 1714699771280,
      "end": 1714699771310,
      "sourcemaps": null
    },
    {
      "name": "vite:css",
      "start": 1714699771310,
      "end": 1714699771310,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "start": 1714699771310,
      "end": 1714699771310,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1714699771310,
      "end": 1714699771310,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1714699771310,
      "end": 1714699771310,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": "import _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./QuickCoins.scss?vue&type=style&index=0&src=6d30570e&scoped=6d30570e&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-6d30570e\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\"]]);\n",
      "start": 1714699771310,
      "end": 1714699771891,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1714699771891,
      "end": 1714699771891,
      "order": "normal"
    },
    {
      "name": "vite-plugin-vconsole",
      "result": "import _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./QuickCoins.scss?vue&type=style&index=0&src=6d30570e&scoped=6d30570e&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-6d30570e\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\"]]);\n",
      "start": 1714699771891,
      "end": 1714699771891,
      "order": "normal",
      "sourcemaps": null
    },
    {
      "name": "esbuild",
      "result": "\"use strict\";\nimport _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./QuickCoins.scss?vue&type=style&index=0&src=6d30570e&scoped=6d30570e&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-6d30570e\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\"]]);\n",
      "start": 1714699771892,
      "end": 1714699771981,
      "order": "normal",
      "sourcemaps": "{\n  \"version\": 3,\n  \"sources\": [\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\"],\n  \"sourcesContent\": [\"import _sfc_main from \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\\\";\\nexport * from \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\\\";\\nimport \\\"./QuickCoins.scss?vue&type=style&index=0&src=6d30570e&scoped=6d30570e&lang.scss\\\";\\nimport \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=style&index=1&lang.scss\\\";\\nimport _export_sfc from \\\"\\\\0plugin-vue:export-helper\\\";\\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\\\"__scopeId\\\", \\\"data-v-6d30570e\\\"], [\\\"__file\\\", \\\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\\\"]]);\\n\"],\n  \"mappings\": \";AAAA,OAAO,eAAe;AACtB,cAAc;AACd,OAAO;AACP,OAAO;AACP,OAAO,iBAAiB;AACxB,eAA+B,4BAAY,WAAW,CAAC,CAAC,aAAa,iBAAiB,GAAG,CAAC,UAAU,kFAAkF,CAAC,CAAC;\",\n  \"names\": []\n}\n"
    },
    {
      "name": "vite:define",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1714699771981,
      "end": 1714699771981,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1714699771982,
      "end": 1714699771982,
      "order": "normal"
    },
    {
      "name": "unplugin-auto-import",
      "start": 1714699771982,
      "end": 1714699771982,
      "order": "post"
    },
    {
      "name": "unplugin-vue-components",
      "result": "/* unplugin-vue-components disabled */\"use strict\";\nimport _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./QuickCoins.scss?vue&type=style&index=0&src=6d30570e&scoped=6d30570e&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-6d30570e\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\"]]);\n",
      "start": 1714699771982,
      "end": 1714699771982,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue"
        ],
        "sourcesContent": [
          "\"use strict\";\nimport _sfc_main from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=script&setup=true&lang.ts\";\nimport \"./QuickCoins.scss?vue&type=style&index=0&src=6d30570e&scoped=6d30570e&lang.scss\";\nimport \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue?vue&type=style&index=1&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-6d30570e\"], [\"__file\", \"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Crypto/components/QuickCoins.vue\"]]);\n"
        ],
        "names": [],
        "mappings": "sCAAA;AACA;AACA;AACA;AACA;AACA;AACA;"
      }
    },
    {
      "name": "vite:style-import",
      "start": 1714699771982,
      "end": 1714699771982,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1714699771982,
      "end": 1714699771982,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1714699771982,
      "end": 1714699771982,
      "order": "normal"
    }
  ]
}
