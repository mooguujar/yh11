{
  "resolvedId": "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Auth/Login.vue?vue&type=script&setup=true&lang.ts",
  "transforms": [
    {
      "name": "vite:vue",
      "result": "import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-52a59ab5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" }\nconst _hoisted_2 = { class: \"content-view\" }\nconst _hoisted_3 = { class: \"input-content-view\" }\nconst _hoisted_4 = { class: \"input-view flex items-center\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"text-[#ccc] pl-[15px]\" }, \"|\", -1 /* HOISTED */))\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"src\"]\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" }\n\nimport { checkImgApi } from '@/apis/auth'\nimport FooterView from '@/components/Auth/FooterView.vue'\nimport { useAuthStore } from '@/store/modules/auth'\nimport { useEntryStore } from '@/store/modules/entry'\nimport { IInfo } from '@/store/types/auth'\nimport { IIsOpenRecaptcha } from '@/store/types/entry'\nimport { requireImg } from '@/utils/tools'\nimport { storeToRefs } from 'pinia'\nimport { showFailToast } from 'vant'\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ChangeValue, StateProps, inputChange } from './tools'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Login',\n  setup(__props) {\n\nconst country_code = ref('CN')\nconst phone_code = ref('+86')\n\nconst route = useRoute()\nconst query = route.query\nif (!!query) {\n  country_code.value = (query.country_code as string) || 'CN'\n  phone_code.value = '+' + ((query.phone_code as string) || '86')\n}\n\nconst authStore = useAuthStore()\nconst { userInfo, Websocket } = storeToRefs(authStore)\nconst { mobile: _mobile = '', pass = '' } = userInfo as IInfo | Record<string, any>\nconst mobile = reactive({\n  value: _mobile,\n  error: '',\n  // type: 'number',\n  type: 'text',\n  pattern: '^[a-zA-Z0-9]{6,20}$'\n})\n\nconst password = reactive({\n  value: pass,\n  error: '',\n  type: 'password',\n  pattern: '[?!a-zA-Z0-9.]{6,16}$'\n})\nconst code = reactive({\n  value: '',\n  error: '',\n  type: 'text',\n  pattern: '^[0-9]{4}$'\n})\n\nconst mobileOnChange = (data: ChangeValue) => {\n  const regCN = /^1[3456789]\\d{9,10}$/\n  const regTW = /^9[0-9]{8,9}$/\n  const regAccount = /^[a-zA-Z0-9]{6,20}$/\n  const isValue = data.find(item => item.key === 'value')\n\n  // if (isValue && !regCN.test(isValue.value) && !regTW.test(isValue.value)) {\n  if (isValue && !regAccount.test(isValue.value)) {\n    // data.push({\n    //   key: 'error',\n    //   value: '请输入6~20位字母或数字'\n    //   // value: '手机号码格式不正确',\n    // })\n  } else {\n    data.push({\n      key: 'error',\n      value: ''\n    })\n  }\n\n  inputChange(mobile as StateProps)(data)\n}\nconst passwordOnChange = (data: ChangeValue) => {\n  const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/\n  const isValue: any = data.find(item => item.key === 'value')\n  const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g)\n\n  if (isValue) {\n    if (!reg.test(isValue.value)) {\n      // console.log('密码格式不正确')\n      data.push({\n        key: 'error',\n        value: '密码格式不正确'\n      })\n    } else {\n      console.log('密码通过')\n      data.push({\n        key: 'error',\n        value: ''\n      })\n    }\n  }\n\n  inputChange(password as StateProps)(data)\n}\nconst codeOnChange = (data: ChangeValue) => {\n  const reg = new RegExp(/^[0-9]{4}$/)\n  const isValue = data.find(item => item.key === 'value')\n\n  if (isValue && !reg.test(isValue.value)) {\n    data.push({\n      key: 'error',\n      value: '验证码格式不正确'\n    })\n  } else {\n    data.push({\n      key: 'error',\n      value: ''\n    })\n  }\n\n  inputChange(code as StateProps)(data)\n}\n\nconst entryStore = useEntryStore()\nconst { config, fingerprint } = storeToRefs(entryStore)\n// const { Web_Set_WebReg } = config as IConfigData | Record<string, any>\n// 是否显示验证码表单\nconst isOpenRecaptcha = computed(() => {\n  return (config.value.Web_Set_WebReg?.is_open_recaptcha as IIsOpenRecaptcha)?.v\n    ? (config.value.Web_Set_WebReg?.is_open_recaptcha as IIsOpenRecaptcha)\n    : {\n        v: '0',\n        n: '',\n        id: ''\n      }\n})\n\nconst inputFormList = ref([\n  {\n    key: 'mobile',\n    placeholder: '手机账号',\n    typeKey: 'mobile',\n    icon: 'mobile',\n    onChange: (e: Event) =>\n      mobileOnChange([{ key: 'value', value: (e.target as HTMLInputElement).value }]),\n    ...toRefs(mobile)\n  },\n  {\n    key: 'password',\n    placeholder: '请输入登录密码',\n    typeKey: 'psw',\n    icon: 'lock',\n    onChange: (e: Event) =>\n      passwordOnChange([{ key: 'value', value: (e.target as HTMLInputElement).value }]),\n    ...toRefs(password)\n  },\n  {\n    key: 'code',\n    placeholder: '图形验证码',\n    typeKey: 'code',\n    onChange: (e: Event) =>\n      codeOnChange([{ key: 'value', value: (e.target as HTMLInputElement).value }]),\n    icon: 'code',\n    ...toRefs(code)\n  }\n])\n\nconst togglePasswordStatus = (index: number) => {\n  inputFormList.value[index].type =\n    inputFormList.value[index].type === 'password' ? 'text' : 'password'\n}\n\nconst { getFingerprint } = entryStore\ngetFingerprint()\nif (!!!localStorage.getItem('fingerprint')) localStorage.setItem('fingerprint', fingerprint.value)\n\nconst { getLoginApi } = authStore\nconst router = useRouter()\n\nconst loginAccount = computed(() => {\n  const regCN = /^1[3456789]\\d{9,10}$/\n  const regTW = /^9[0-9]{8,9}$/\n  const regLikeMobile = /^\\d{6,20}$/\n\n  const _mobile = mobile.value.includes(phone_code.value)\n    ? mobile.value\n    : phone_code.value + mobile.value\n  const _account = mobile.value\n\n  // if (regCN.test(mobile.value) || regTW.test(mobile.value)) {\n  if (regLikeMobile.test(mobile.value)) {\n    return {\n      mobile: _mobile\n    }\n  }\n  return {\n    account: _account\n  }\n})\n\nconst onLogin = async () => {\n  // if (!mobile.value) return showFailToast('请输入手机号码')\n  if (!mobile.value) return showFailToast('账号不能为空')\n  if (!password.value) return showFailToast('请输入密码')\n  if (mobile.error) return showFailToast(mobile.error)\n  if (password.error) return showFailToast(password.error)\n  const search = new URLSearchParams(window.location.search)\n  const vtoken = search.get('vtoken') || ''\n  const deviceid = search.get('deviceid') || ''\n\n  const params = {\n    mobile: loginAccount.value.mobile,\n    username: loginAccount.value.account,\n    pass: password.value,\n    deviceid: localStorage.getItem('fingerprint') || fingerprint.value,\n    imgid: fingerprint.value,\n    imgtype: 'login',\n    web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n    imgcode: code.value\n  }\n\n  try {\n    await getLoginApi(params).then(data => {\n      // console.log('data', data)\n      if (!!!data || !!!data.token) return getCheckImg()\n      // console.log('11122', data.token)\n      // Websocket.value.send(data.token)\n      Websocket.value.start(data.token)\n      Websocket.value.reconnect()\n      let gopath = sessionStorage.getItem('gopath')\n      // console.log('gopath', gopath)\n      if (!!gopath) {\n        sessionStorage.setItem('gopath', '')\n        return router.push(gopath)\n      }\n      router.push('/')\n    })\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nconst captchaImg = ref('')\n// 获取图形验证码\nconst getCheckImg = async () => {\n  try {\n    const res = await checkImgApi({\n      imgid: fingerprint.value,\n      imgtype: 'login'\n    })\n    const url = window.URL.createObjectURL(new Blob([res], { type: 'image/png' }))\n\n    captchaImg.value = url\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nconst gopath = () => {\n  router.push('/auth/forgetPasw')\n}\n// 回车登录\nconst onEnterUp = (e: KeyboardEvent) => {\n  if (['Enter', 'NumpadEnter'].includes(e.code)) {\n    onLogin()\n  }\n}\nwatch(isOpenRecaptcha, e => {\n  if (isOpenRecaptcha.value.v === '1') {\n    getCheckImg()\n  }\n})\nonMounted(() => {\n  window.addEventListener('keyup', onEnterUp)\n\n  if (isOpenRecaptcha.value.v === '1') {\n    getCheckImg()\n  }\n})\nonUnmounted(() => {\n  window.removeEventListener('keyup', onEnterUp)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_van_icon = _resolveComponent(\"van-icon\")!\n  const _component_AdBanner = _resolveComponent(\"AdBanner\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(inputFormList.value, (item, index) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n            key: item.key,\n            class: \"input-content relative z-[1]\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"i\", {\n                  class: _normalizeClass(['block', item.icon])\n                }, null, 2 /* CLASS */),\n                (item.key == 'mobile')\n                  ? (_openBlock(), _createElementBlock(\"span\", {\n                      key: 0,\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.replace('/country'))),\n                      class: \"text-[24px] flex_s mx-[13px]\"\n                    }, [\n                      _createElementVNode(\"img\", {\n                        class: \"w-[40px] mr-[15px]\",\n                        src: _unref(requireImg)('common/' + country_code.value + '.png'),\n                        alt: \"\"\n                      }, null, 8 /* PROPS */, _hoisted_5),\n                      _createTextVNode(\" \" + _toDisplayString(phone_code.value) + \" \", 1 /* TEXT */),\n                      _createVNode(_component_van_icon, {\n                        class: \"ml-[15px]\",\n                        size: \"15px\",\n                        name: \"arrow-down\"\n                      }),\n                      _hoisted_6\n                    ]))\n                  : _createCommentVNode(\"v-if\", true),\n                _createElementVNode(\"input\", {\n                  class: \"!text-[29px] w-[260px]\",\n                  type: item.type,\n                  placeholder: item.placeholder,\n                  pattern: item.pattern,\n                  onChange: item.onChange\n                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_7),\n                (item.key.toLowerCase().includes('password'))\n                  ? (_openBlock(), _createElementBlock(\"i\", {\n                      key: 1,\n                      class: _normalizeClass(item.type === 'password' ? 'eye-close' : 'eye-open'),\n                      onClick: ($event: any) => (togglePasswordStatus(index))\n                    }, null, 10 /* CLASS, PROPS */, _hoisted_8))\n                  : _createCommentVNode(\"v-if\", true),\n                (captchaImg.value && index === 2)\n                  ? (_openBlock(), _createElementBlock(\"img\", {\n                      key: 2,\n                      src: captchaImg.value,\n                      onClick: getCheckImg\n                    }, null, 8 /* PROPS */, _hoisted_9))\n                  : _createCommentVNode(\"v-if\", true)\n              ]),\n              _createCommentVNode(\" <div className=\\\"error !text-[24px]\\\">{{ item.error }}</div> \")\n            ])\n          ])), [\n            [_vShow, (index === 2 && isOpenRecaptcha.value.v === '1') || index !== 2]\n          ])\n        }), 128 /* KEYED_FRAGMENT */)),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"span\", {\n            class: \"px-[20px]\",\n            onTouchstart: gopath\n          }, \" 忘记密码 \", 32 /* NEED_HYDRATION */)\n        ])\n      ])\n    ]),\n    _createCommentVNode(\" 广告位 \"),\n    _createVNode(_component_AdBanner, { slider: \"\" }),\n    _createVNode(FooterView, {\n      \"btn-name\": \"登录\",\n      onClick: onLogin\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}\n}\n\n})",
      "start": 1714699770427,
      "end": 1714699770427
    },
    {
      "name": "vite:css",
      "start": 1714699770427,
      "end": 1714699770427,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "result": "import { defineComponent as _defineComponent } from \"vue\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-52a59ab5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" };\nconst _hoisted_2 = { class: \"content-view\" };\nconst _hoisted_3 = { class: \"input-content-view\" };\nconst _hoisted_4 = { class: \"input-view flex items-center\" };\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\n  \"span\",\n  { class: \"text-[#ccc] pl-[15px]\" },\n  \"|\",\n  -1\n  /* HOISTED */\n));\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" };\nimport { checkImgApi } from \"@/apis/auth\";\nimport FooterView from \"@/components/Auth/FooterView.vue\";\nimport { useAuthStore } from \"@/store/modules/auth\";\nimport { useEntryStore } from \"@/store/modules/entry\";\nimport { requireImg } from \"@/utils/tools\";\nimport { storeToRefs } from \"pinia\";\nimport { showFailToast } from \"vant\";\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { inputChange } from \"./tools\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"Login\",\n  setup(__props) {\n    const country_code = ref(\"CN\");\n    const phone_code = ref(\"+86\");\n    const route = useRoute();\n    const query = route.query;\n    if (!!query) {\n      country_code.value = query.country_code || \"CN\";\n      phone_code.value = \"+\" + (query.phone_code || \"86\");\n    }\n    const authStore = useAuthStore();\n    const { userInfo, Websocket } = storeToRefs(authStore);\n    const { mobile: _mobile = \"\", pass = \"\" } = userInfo;\n    const mobile = reactive({\n      value: _mobile,\n      error: \"\",\n      // type: 'number',\n      type: \"text\",\n      pattern: \"^[a-zA-Z0-9]{6,20}$\"\n    });\n    const password = reactive({\n      value: pass,\n      error: \"\",\n      type: \"password\",\n      pattern: \"[?!a-zA-Z0-9.]{6,16}$\"\n    });\n    const code = reactive({\n      value: \"\",\n      error: \"\",\n      type: \"text\",\n      pattern: \"^[0-9]{4}$\"\n    });\n    const mobileOnChange = (data) => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regAccount = /^[a-zA-Z0-9]{6,20}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !regAccount.test(isValue.value)) {\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(mobile)(data);\n    };\n    const passwordOnChange = (data) => {\n      const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g);\n      if (isValue) {\n        if (!reg.test(isValue.value)) {\n          data.push({\n            key: \"error\",\n            value: \"密码格式不正确\"\n          });\n        } else {\n          console.log(\"密码通过\");\n          data.push({\n            key: \"error\",\n            value: \"\"\n          });\n        }\n      }\n      inputChange(password)(data);\n    };\n    const codeOnChange = (data) => {\n      const reg = new RegExp(/^[0-9]{4}$/);\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !reg.test(isValue.value)) {\n        data.push({\n          key: \"error\",\n          value: \"验证码格式不正确\"\n        });\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(code)(data);\n    };\n    const entryStore = useEntryStore();\n    const { config, fingerprint } = storeToRefs(entryStore);\n    const isOpenRecaptcha = computed(() => {\n      return config.value.Web_Set_WebReg?.is_open_recaptcha?.v ? config.value.Web_Set_WebReg?.is_open_recaptcha : {\n        v: \"0\",\n        n: \"\",\n        id: \"\"\n      };\n    });\n    const inputFormList = ref([\n      {\n        key: \"mobile\",\n        placeholder: \"手机账号\",\n        typeKey: \"mobile\",\n        icon: \"mobile\",\n        onChange: (e) => mobileOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(mobile)\n      },\n      {\n        key: \"password\",\n        placeholder: \"请输入登录密码\",\n        typeKey: \"psw\",\n        icon: \"lock\",\n        onChange: (e) => passwordOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(password)\n      },\n      {\n        key: \"code\",\n        placeholder: \"图形验证码\",\n        typeKey: \"code\",\n        onChange: (e) => codeOnChange([{ key: \"value\", value: e.target.value }]),\n        icon: \"code\",\n        ...toRefs(code)\n      }\n    ]);\n    const togglePasswordStatus = (index) => {\n      inputFormList.value[index].type = inputFormList.value[index].type === \"password\" ? \"text\" : \"password\";\n    };\n    const { getFingerprint } = entryStore;\n    getFingerprint();\n    if (!!!localStorage.getItem(\"fingerprint\"))\n      localStorage.setItem(\"fingerprint\", fingerprint.value);\n    const { getLoginApi } = authStore;\n    const router = useRouter();\n    const loginAccount = computed(() => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regLikeMobile = /^\\d{6,20}$/;\n      const _mobile2 = mobile.value.includes(phone_code.value) ? mobile.value : phone_code.value + mobile.value;\n      const _account = mobile.value;\n      if (regLikeMobile.test(mobile.value)) {\n        return {\n          mobile: _mobile2\n        };\n      }\n      return {\n        account: _account\n      };\n    });\n    const onLogin = async () => {\n      if (!mobile.value)\n        return showFailToast(\"账号不能为空\");\n      if (!password.value)\n        return showFailToast(\"请输入密码\");\n      if (mobile.error)\n        return showFailToast(mobile.error);\n      if (password.error)\n        return showFailToast(password.error);\n      const search = new URLSearchParams(window.location.search);\n      const vtoken = search.get(\"vtoken\") || \"\";\n      const deviceid = search.get(\"deviceid\") || \"\";\n      const params = {\n        mobile: loginAccount.value.mobile,\n        username: loginAccount.value.account,\n        pass: password.value,\n        deviceid: localStorage.getItem(\"fingerprint\") || fingerprint.value,\n        imgid: fingerprint.value,\n        imgtype: \"login\",\n        web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n        imgcode: code.value\n      };\n      try {\n        await getLoginApi(params).then((data) => {\n          if (!!!data || !!!data.token)\n            return getCheckImg();\n          Websocket.value.start(data.token);\n          Websocket.value.reconnect();\n          let gopath2 = sessionStorage.getItem(\"gopath\");\n          if (!!gopath2) {\n            sessionStorage.setItem(\"gopath\", \"\");\n            return router.push(gopath2);\n          }\n          router.push(\"/\");\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const captchaImg = ref(\"\");\n    const getCheckImg = async () => {\n      try {\n        const res = await checkImgApi({\n          imgid: fingerprint.value,\n          imgtype: \"login\"\n        });\n        const url = window.URL.createObjectURL(new Blob([res], { type: \"image/png\" }));\n        captchaImg.value = url;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const gopath = () => {\n      router.push(\"/auth/forgetPasw\");\n    };\n    const onEnterUp = (e) => {\n      if ([\"Enter\", \"NumpadEnter\"].includes(e.code)) {\n        onLogin();\n      }\n    };\n    watch(isOpenRecaptcha, (e) => {\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onMounted(() => {\n      window.addEventListener(\"keyup\", onEnterUp);\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"keyup\", onEnterUp);\n    });\n    return (_ctx, _cache) => {\n      const _component_van_icon = _resolveComponent(\"van-icon\");\n      const _component_AdBanner = _resolveComponent(\"AdBanner\");\n      return _openBlock(), _createElementBlock(\n        _Fragment,\n        null,\n        [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              (_openBlock(true), _createElementBlock(\n                _Fragment,\n                null,\n                _renderList(inputFormList.value, (item, index) => {\n                  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n                    key: item.key,\n                    class: \"input-content relative z-[1]\"\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\n                          \"i\",\n                          {\n                            class: _normalizeClass([\"block\", item.icon])\n                          },\n                          null,\n                          2\n                          /* CLASS */\n                        ),\n                        item.key == \"mobile\" ? (_openBlock(), _createElementBlock(\"span\", {\n                          key: 0,\n                          onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$router.replace(\"/country\")),\n                          class: \"text-[24px] flex_s mx-[13px]\"\n                        }, [\n                          _createElementVNode(\"img\", {\n                            class: \"w-[40px] mr-[15px]\",\n                            src: _unref(requireImg)(\"common/\" + country_code.value + \".png\"),\n                            alt: \"\"\n                          }, null, 8, _hoisted_5),\n                          _createTextVNode(\n                            \" \" + _toDisplayString(phone_code.value) + \" \",\n                            1\n                            /* TEXT */\n                          ),\n                          _createVNode(_component_van_icon, {\n                            class: \"ml-[15px]\",\n                            size: \"15px\",\n                            name: \"arrow-down\"\n                          }),\n                          _hoisted_6\n                        ])) : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"input\", {\n                          class: \"!text-[29px] w-[260px]\",\n                          type: item.type,\n                          placeholder: item.placeholder,\n                          pattern: item.pattern,\n                          onChange: item.onChange\n                        }, null, 40, _hoisted_7),\n                        item.key.toLowerCase().includes(\"password\") ? (_openBlock(), _createElementBlock(\"i\", {\n                          key: 1,\n                          class: _normalizeClass(item.type === \"password\" ? \"eye-close\" : \"eye-open\"),\n                          onClick: ($event) => togglePasswordStatus(index)\n                        }, null, 10, _hoisted_8)) : _createCommentVNode(\"v-if\", true),\n                        captchaImg.value && index === 2 ? (_openBlock(), _createElementBlock(\"img\", {\n                          key: 2,\n                          src: captchaImg.value,\n                          onClick: getCheckImg\n                        }, null, 8, _hoisted_9)) : _createCommentVNode(\"v-if\", true)\n                      ]),\n                      _createCommentVNode(' <div className=\"error !text-[24px]\">{{ item.error }}</div> ')\n                    ])\n                  ])), [\n                    [_vShow, index === 2 && isOpenRecaptcha.value.v === \"1\" || index !== 2]\n                  ]);\n                }),\n                128\n                /* KEYED_FRAGMENT */\n              )),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\n                  \"span\",\n                  {\n                    class: \"px-[20px]\",\n                    onTouchstart: gopath\n                  },\n                  \" 忘记密码 \",\n                  32\n                  /* NEED_HYDRATION */\n                )\n              ])\n            ])\n          ]),\n          _createCommentVNode(\" 广告位 \"),\n          _createVNode(_component_AdBanner, { slider: \"\" }),\n          _createVNode(FooterView, {\n            \"btn-name\": \"登录\",\n            onClick: onLogin\n          })\n        ],\n        64\n        /* STABLE_FRAGMENT */\n      );\n    };\n  }\n});\n",
      "start": 1714699770428,
      "end": 1714699770707,
      "order": "normal",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Auth/Login.vue?vue&type=script&setup=true&lang.ts"
        ],
        "sourcesContent": [
          "import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-52a59ab5\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" }\nconst _hoisted_2 = { class: \"content-view\" }\nconst _hoisted_3 = { class: \"input-content-view\" }\nconst _hoisted_4 = { class: \"input-view flex items-center\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"text-[#ccc] pl-[15px]\" }, \"|\", -1 /* HOISTED */))\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"]\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"src\"]\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" }\n\nimport { checkImgApi } from '@/apis/auth'\nimport FooterView from '@/components/Auth/FooterView.vue'\nimport { useAuthStore } from '@/store/modules/auth'\nimport { useEntryStore } from '@/store/modules/entry'\nimport { IInfo } from '@/store/types/auth'\nimport { IIsOpenRecaptcha } from '@/store/types/entry'\nimport { requireImg } from '@/utils/tools'\nimport { storeToRefs } from 'pinia'\nimport { showFailToast } from 'vant'\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ChangeValue, StateProps, inputChange } from './tools'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Login',\n  setup(__props) {\n\nconst country_code = ref('CN')\nconst phone_code = ref('+86')\n\nconst route = useRoute()\nconst query = route.query\nif (!!query) {\n  country_code.value = (query.country_code as string) || 'CN'\n  phone_code.value = '+' + ((query.phone_code as string) || '86')\n}\n\nconst authStore = useAuthStore()\nconst { userInfo, Websocket } = storeToRefs(authStore)\nconst { mobile: _mobile = '', pass = '' } = userInfo as IInfo | Record<string, any>\nconst mobile = reactive({\n  value: _mobile,\n  error: '',\n  // type: 'number',\n  type: 'text',\n  pattern: '^[a-zA-Z0-9]{6,20}$'\n})\n\nconst password = reactive({\n  value: pass,\n  error: '',\n  type: 'password',\n  pattern: '[?!a-zA-Z0-9.]{6,16}$'\n})\nconst code = reactive({\n  value: '',\n  error: '',\n  type: 'text',\n  pattern: '^[0-9]{4}$'\n})\n\nconst mobileOnChange = (data: ChangeValue) => {\n  const regCN = /^1[3456789]\\d{9,10}$/\n  const regTW = /^9[0-9]{8,9}$/\n  const regAccount = /^[a-zA-Z0-9]{6,20}$/\n  const isValue = data.find(item => item.key === 'value')\n\n  // if (isValue && !regCN.test(isValue.value) && !regTW.test(isValue.value)) {\n  if (isValue && !regAccount.test(isValue.value)) {\n    // data.push({\n    //   key: 'error',\n    //   value: '请输入6~20位字母或数字'\n    //   // value: '手机号码格式不正确',\n    // })\n  } else {\n    data.push({\n      key: 'error',\n      value: ''\n    })\n  }\n\n  inputChange(mobile as StateProps)(data)\n}\nconst passwordOnChange = (data: ChangeValue) => {\n  const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/\n  const isValue: any = data.find(item => item.key === 'value')\n  const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g)\n\n  if (isValue) {\n    if (!reg.test(isValue.value)) {\n      // console.log('密码格式不正确')\n      data.push({\n        key: 'error',\n        value: '密码格式不正确'\n      })\n    } else {\n      console.log('密码通过')\n      data.push({\n        key: 'error',\n        value: ''\n      })\n    }\n  }\n\n  inputChange(password as StateProps)(data)\n}\nconst codeOnChange = (data: ChangeValue) => {\n  const reg = new RegExp(/^[0-9]{4}$/)\n  const isValue = data.find(item => item.key === 'value')\n\n  if (isValue && !reg.test(isValue.value)) {\n    data.push({\n      key: 'error',\n      value: '验证码格式不正确'\n    })\n  } else {\n    data.push({\n      key: 'error',\n      value: ''\n    })\n  }\n\n  inputChange(code as StateProps)(data)\n}\n\nconst entryStore = useEntryStore()\nconst { config, fingerprint } = storeToRefs(entryStore)\n// const { Web_Set_WebReg } = config as IConfigData | Record<string, any>\n// 是否显示验证码表单\nconst isOpenRecaptcha = computed(() => {\n  return (config.value.Web_Set_WebReg?.is_open_recaptcha as IIsOpenRecaptcha)?.v\n    ? (config.value.Web_Set_WebReg?.is_open_recaptcha as IIsOpenRecaptcha)\n    : {\n        v: '0',\n        n: '',\n        id: ''\n      }\n})\n\nconst inputFormList = ref([\n  {\n    key: 'mobile',\n    placeholder: '手机账号',\n    typeKey: 'mobile',\n    icon: 'mobile',\n    onChange: (e: Event) =>\n      mobileOnChange([{ key: 'value', value: (e.target as HTMLInputElement).value }]),\n    ...toRefs(mobile)\n  },\n  {\n    key: 'password',\n    placeholder: '请输入登录密码',\n    typeKey: 'psw',\n    icon: 'lock',\n    onChange: (e: Event) =>\n      passwordOnChange([{ key: 'value', value: (e.target as HTMLInputElement).value }]),\n    ...toRefs(password)\n  },\n  {\n    key: 'code',\n    placeholder: '图形验证码',\n    typeKey: 'code',\n    onChange: (e: Event) =>\n      codeOnChange([{ key: 'value', value: (e.target as HTMLInputElement).value }]),\n    icon: 'code',\n    ...toRefs(code)\n  }\n])\n\nconst togglePasswordStatus = (index: number) => {\n  inputFormList.value[index].type =\n    inputFormList.value[index].type === 'password' ? 'text' : 'password'\n}\n\nconst { getFingerprint } = entryStore\ngetFingerprint()\nif (!!!localStorage.getItem('fingerprint')) localStorage.setItem('fingerprint', fingerprint.value)\n\nconst { getLoginApi } = authStore\nconst router = useRouter()\n\nconst loginAccount = computed(() => {\n  const regCN = /^1[3456789]\\d{9,10}$/\n  const regTW = /^9[0-9]{8,9}$/\n  const regLikeMobile = /^\\d{6,20}$/\n\n  const _mobile = mobile.value.includes(phone_code.value)\n    ? mobile.value\n    : phone_code.value + mobile.value\n  const _account = mobile.value\n\n  // if (regCN.test(mobile.value) || regTW.test(mobile.value)) {\n  if (regLikeMobile.test(mobile.value)) {\n    return {\n      mobile: _mobile\n    }\n  }\n  return {\n    account: _account\n  }\n})\n\nconst onLogin = async () => {\n  // if (!mobile.value) return showFailToast('请输入手机号码')\n  if (!mobile.value) return showFailToast('账号不能为空')\n  if (!password.value) return showFailToast('请输入密码')\n  if (mobile.error) return showFailToast(mobile.error)\n  if (password.error) return showFailToast(password.error)\n  const search = new URLSearchParams(window.location.search)\n  const vtoken = search.get('vtoken') || ''\n  const deviceid = search.get('deviceid') || ''\n\n  const params = {\n    mobile: loginAccount.value.mobile,\n    username: loginAccount.value.account,\n    pass: password.value,\n    deviceid: localStorage.getItem('fingerprint') || fingerprint.value,\n    imgid: fingerprint.value,\n    imgtype: 'login',\n    web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n    imgcode: code.value\n  }\n\n  try {\n    await getLoginApi(params).then(data => {\n      // console.log('data', data)\n      if (!!!data || !!!data.token) return getCheckImg()\n      // console.log('11122', data.token)\n      // Websocket.value.send(data.token)\n      Websocket.value.start(data.token)\n      Websocket.value.reconnect()\n      let gopath = sessionStorage.getItem('gopath')\n      // console.log('gopath', gopath)\n      if (!!gopath) {\n        sessionStorage.setItem('gopath', '')\n        return router.push(gopath)\n      }\n      router.push('/')\n    })\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nconst captchaImg = ref('')\n// 获取图形验证码\nconst getCheckImg = async () => {\n  try {\n    const res = await checkImgApi({\n      imgid: fingerprint.value,\n      imgtype: 'login'\n    })\n    const url = window.URL.createObjectURL(new Blob([res], { type: 'image/png' }))\n\n    captchaImg.value = url\n  } catch (error) {\n    console.error(error)\n  }\n}\n\nconst gopath = () => {\n  router.push('/auth/forgetPasw')\n}\n// 回车登录\nconst onEnterUp = (e: KeyboardEvent) => {\n  if (['Enter', 'NumpadEnter'].includes(e.code)) {\n    onLogin()\n  }\n}\nwatch(isOpenRecaptcha, e => {\n  if (isOpenRecaptcha.value.v === '1') {\n    getCheckImg()\n  }\n})\nonMounted(() => {\n  window.addEventListener('keyup', onEnterUp)\n\n  if (isOpenRecaptcha.value.v === '1') {\n    getCheckImg()\n  }\n})\nonUnmounted(() => {\n  window.removeEventListener('keyup', onEnterUp)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_van_icon = _resolveComponent(\"van-icon\")!\n  const _component_AdBanner = _resolveComponent(\"AdBanner\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(inputFormList.value, (item, index) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n            key: item.key,\n            class: \"input-content relative z-[1]\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"i\", {\n                  class: _normalizeClass(['block', item.icon])\n                }, null, 2 /* CLASS */),\n                (item.key == 'mobile')\n                  ? (_openBlock(), _createElementBlock(\"span\", {\n                      key: 0,\n                      onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.replace('/country'))),\n                      class: \"text-[24px] flex_s mx-[13px]\"\n                    }, [\n                      _createElementVNode(\"img\", {\n                        class: \"w-[40px] mr-[15px]\",\n                        src: _unref(requireImg)('common/' + country_code.value + '.png'),\n                        alt: \"\"\n                      }, null, 8 /* PROPS */, _hoisted_5),\n                      _createTextVNode(\" \" + _toDisplayString(phone_code.value) + \" \", 1 /* TEXT */),\n                      _createVNode(_component_van_icon, {\n                        class: \"ml-[15px]\",\n                        size: \"15px\",\n                        name: \"arrow-down\"\n                      }),\n                      _hoisted_6\n                    ]))\n                  : _createCommentVNode(\"v-if\", true),\n                _createElementVNode(\"input\", {\n                  class: \"!text-[29px] w-[260px]\",\n                  type: item.type,\n                  placeholder: item.placeholder,\n                  pattern: item.pattern,\n                  onChange: item.onChange\n                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_7),\n                (item.key.toLowerCase().includes('password'))\n                  ? (_openBlock(), _createElementBlock(\"i\", {\n                      key: 1,\n                      class: _normalizeClass(item.type === 'password' ? 'eye-close' : 'eye-open'),\n                      onClick: ($event: any) => (togglePasswordStatus(index))\n                    }, null, 10 /* CLASS, PROPS */, _hoisted_8))\n                  : _createCommentVNode(\"v-if\", true),\n                (captchaImg.value && index === 2)\n                  ? (_openBlock(), _createElementBlock(\"img\", {\n                      key: 2,\n                      src: captchaImg.value,\n                      onClick: getCheckImg\n                    }, null, 8 /* PROPS */, _hoisted_9))\n                  : _createCommentVNode(\"v-if\", true)\n              ]),\n              _createCommentVNode(\" <div className=\\\"error !text-[24px]\\\">{{ item.error }}</div> \")\n            ])\n          ])), [\n            [_vShow, (index === 2 && isOpenRecaptcha.value.v === '1') || index !== 2]\n          ])\n        }), 128 /* KEYED_FRAGMENT */)),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"span\", {\n            class: \"px-[20px]\",\n            onTouchstart: gopath\n          }, \" 忘记密码 \", 32 /* NEED_HYDRATION */)\n        ])\n      ])\n    ]),\n    _createCommentVNode(\" 广告位 \"),\n    _createVNode(_component_AdBanner, { slider: \"\" }),\n    _createVNode(FooterView, {\n      \"btn-name\": \"登录\",\n      onClick: onLogin\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}\n}\n\n})"
        ],
        "mappings": "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",
        "names": [
          "_mobile",
          "gopath"
        ]
      }
    },
    {
      "name": "vite:json",
      "start": 1714699770707,
      "end": 1714699770707,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1714699770707,
      "end": 1714699770707,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "start": 1714699770707,
      "end": 1714699770707,
      "order": "normal"
    },
    {
      "name": "vite:vue-jsx",
      "start": 1714699770707,
      "end": 1714699770707,
      "order": "normal"
    },
    {
      "name": "vite-plugin-vconsole",
      "result": "import { defineComponent as _defineComponent } from \"vue\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-52a59ab5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" };\nconst _hoisted_2 = { class: \"content-view\" };\nconst _hoisted_3 = { class: \"input-content-view\" };\nconst _hoisted_4 = { class: \"input-view flex items-center\" };\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\n  \"span\",\n  { class: \"text-[#ccc] pl-[15px]\" },\n  \"|\",\n  -1\n  /* HOISTED */\n));\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" };\nimport { checkImgApi } from \"@/apis/auth\";\nimport FooterView from \"@/components/Auth/FooterView.vue\";\nimport { useAuthStore } from \"@/store/modules/auth\";\nimport { useEntryStore } from \"@/store/modules/entry\";\nimport { requireImg } from \"@/utils/tools\";\nimport { storeToRefs } from \"pinia\";\nimport { showFailToast } from \"vant\";\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { inputChange } from \"./tools\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"Login\",\n  setup(__props) {\n    const country_code = ref(\"CN\");\n    const phone_code = ref(\"+86\");\n    const route = useRoute();\n    const query = route.query;\n    if (!!query) {\n      country_code.value = query.country_code || \"CN\";\n      phone_code.value = \"+\" + (query.phone_code || \"86\");\n    }\n    const authStore = useAuthStore();\n    const { userInfo, Websocket } = storeToRefs(authStore);\n    const { mobile: _mobile = \"\", pass = \"\" } = userInfo;\n    const mobile = reactive({\n      value: _mobile,\n      error: \"\",\n      // type: 'number',\n      type: \"text\",\n      pattern: \"^[a-zA-Z0-9]{6,20}$\"\n    });\n    const password = reactive({\n      value: pass,\n      error: \"\",\n      type: \"password\",\n      pattern: \"[?!a-zA-Z0-9.]{6,16}$\"\n    });\n    const code = reactive({\n      value: \"\",\n      error: \"\",\n      type: \"text\",\n      pattern: \"^[0-9]{4}$\"\n    });\n    const mobileOnChange = (data) => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regAccount = /^[a-zA-Z0-9]{6,20}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !regAccount.test(isValue.value)) {\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(mobile)(data);\n    };\n    const passwordOnChange = (data) => {\n      const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g);\n      if (isValue) {\n        if (!reg.test(isValue.value)) {\n          data.push({\n            key: \"error\",\n            value: \"密码格式不正确\"\n          });\n        } else {\n          console.log(\"密码通过\");\n          data.push({\n            key: \"error\",\n            value: \"\"\n          });\n        }\n      }\n      inputChange(password)(data);\n    };\n    const codeOnChange = (data) => {\n      const reg = new RegExp(/^[0-9]{4}$/);\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !reg.test(isValue.value)) {\n        data.push({\n          key: \"error\",\n          value: \"验证码格式不正确\"\n        });\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(code)(data);\n    };\n    const entryStore = useEntryStore();\n    const { config, fingerprint } = storeToRefs(entryStore);\n    const isOpenRecaptcha = computed(() => {\n      return config.value.Web_Set_WebReg?.is_open_recaptcha?.v ? config.value.Web_Set_WebReg?.is_open_recaptcha : {\n        v: \"0\",\n        n: \"\",\n        id: \"\"\n      };\n    });\n    const inputFormList = ref([\n      {\n        key: \"mobile\",\n        placeholder: \"手机账号\",\n        typeKey: \"mobile\",\n        icon: \"mobile\",\n        onChange: (e) => mobileOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(mobile)\n      },\n      {\n        key: \"password\",\n        placeholder: \"请输入登录密码\",\n        typeKey: \"psw\",\n        icon: \"lock\",\n        onChange: (e) => passwordOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(password)\n      },\n      {\n        key: \"code\",\n        placeholder: \"图形验证码\",\n        typeKey: \"code\",\n        onChange: (e) => codeOnChange([{ key: \"value\", value: e.target.value }]),\n        icon: \"code\",\n        ...toRefs(code)\n      }\n    ]);\n    const togglePasswordStatus = (index) => {\n      inputFormList.value[index].type = inputFormList.value[index].type === \"password\" ? \"text\" : \"password\";\n    };\n    const { getFingerprint } = entryStore;\n    getFingerprint();\n    if (!!!localStorage.getItem(\"fingerprint\"))\n      localStorage.setItem(\"fingerprint\", fingerprint.value);\n    const { getLoginApi } = authStore;\n    const router = useRouter();\n    const loginAccount = computed(() => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regLikeMobile = /^\\d{6,20}$/;\n      const _mobile2 = mobile.value.includes(phone_code.value) ? mobile.value : phone_code.value + mobile.value;\n      const _account = mobile.value;\n      if (regLikeMobile.test(mobile.value)) {\n        return {\n          mobile: _mobile2\n        };\n      }\n      return {\n        account: _account\n      };\n    });\n    const onLogin = async () => {\n      if (!mobile.value)\n        return showFailToast(\"账号不能为空\");\n      if (!password.value)\n        return showFailToast(\"请输入密码\");\n      if (mobile.error)\n        return showFailToast(mobile.error);\n      if (password.error)\n        return showFailToast(password.error);\n      const search = new URLSearchParams(window.location.search);\n      const vtoken = search.get(\"vtoken\") || \"\";\n      const deviceid = search.get(\"deviceid\") || \"\";\n      const params = {\n        mobile: loginAccount.value.mobile,\n        username: loginAccount.value.account,\n        pass: password.value,\n        deviceid: localStorage.getItem(\"fingerprint\") || fingerprint.value,\n        imgid: fingerprint.value,\n        imgtype: \"login\",\n        web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n        imgcode: code.value\n      };\n      try {\n        await getLoginApi(params).then((data) => {\n          if (!!!data || !!!data.token)\n            return getCheckImg();\n          Websocket.value.start(data.token);\n          Websocket.value.reconnect();\n          let gopath2 = sessionStorage.getItem(\"gopath\");\n          if (!!gopath2) {\n            sessionStorage.setItem(\"gopath\", \"\");\n            return router.push(gopath2);\n          }\n          router.push(\"/\");\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const captchaImg = ref(\"\");\n    const getCheckImg = async () => {\n      try {\n        const res = await checkImgApi({\n          imgid: fingerprint.value,\n          imgtype: \"login\"\n        });\n        const url = window.URL.createObjectURL(new Blob([res], { type: \"image/png\" }));\n        captchaImg.value = url;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const gopath = () => {\n      router.push(\"/auth/forgetPasw\");\n    };\n    const onEnterUp = (e) => {\n      if ([\"Enter\", \"NumpadEnter\"].includes(e.code)) {\n        onLogin();\n      }\n    };\n    watch(isOpenRecaptcha, (e) => {\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onMounted(() => {\n      window.addEventListener(\"keyup\", onEnterUp);\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"keyup\", onEnterUp);\n    });\n    return (_ctx, _cache) => {\n      const _component_van_icon = _resolveComponent(\"van-icon\");\n      const _component_AdBanner = _resolveComponent(\"AdBanner\");\n      return _openBlock(), _createElementBlock(\n        _Fragment,\n        null,\n        [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              (_openBlock(true), _createElementBlock(\n                _Fragment,\n                null,\n                _renderList(inputFormList.value, (item, index) => {\n                  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n                    key: item.key,\n                    class: \"input-content relative z-[1]\"\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\n                          \"i\",\n                          {\n                            class: _normalizeClass([\"block\", item.icon])\n                          },\n                          null,\n                          2\n                          /* CLASS */\n                        ),\n                        item.key == \"mobile\" ? (_openBlock(), _createElementBlock(\"span\", {\n                          key: 0,\n                          onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$router.replace(\"/country\")),\n                          class: \"text-[24px] flex_s mx-[13px]\"\n                        }, [\n                          _createElementVNode(\"img\", {\n                            class: \"w-[40px] mr-[15px]\",\n                            src: _unref(requireImg)(\"common/\" + country_code.value + \".png\"),\n                            alt: \"\"\n                          }, null, 8, _hoisted_5),\n                          _createTextVNode(\n                            \" \" + _toDisplayString(phone_code.value) + \" \",\n                            1\n                            /* TEXT */\n                          ),\n                          _createVNode(_component_van_icon, {\n                            class: \"ml-[15px]\",\n                            size: \"15px\",\n                            name: \"arrow-down\"\n                          }),\n                          _hoisted_6\n                        ])) : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"input\", {\n                          class: \"!text-[29px] w-[260px]\",\n                          type: item.type,\n                          placeholder: item.placeholder,\n                          pattern: item.pattern,\n                          onChange: item.onChange\n                        }, null, 40, _hoisted_7),\n                        item.key.toLowerCase().includes(\"password\") ? (_openBlock(), _createElementBlock(\"i\", {\n                          key: 1,\n                          class: _normalizeClass(item.type === \"password\" ? \"eye-close\" : \"eye-open\"),\n                          onClick: ($event) => togglePasswordStatus(index)\n                        }, null, 10, _hoisted_8)) : _createCommentVNode(\"v-if\", true),\n                        captchaImg.value && index === 2 ? (_openBlock(), _createElementBlock(\"img\", {\n                          key: 2,\n                          src: captchaImg.value,\n                          onClick: getCheckImg\n                        }, null, 8, _hoisted_9)) : _createCommentVNode(\"v-if\", true)\n                      ]),\n                      _createCommentVNode(' <div className=\"error !text-[24px]\">{{ item.error }}</div> ')\n                    ])\n                  ])), [\n                    [_vShow, index === 2 && isOpenRecaptcha.value.v === \"1\" || index !== 2]\n                  ]);\n                }),\n                128\n                /* KEYED_FRAGMENT */\n              )),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\n                  \"span\",\n                  {\n                    class: \"px-[20px]\",\n                    onTouchstart: gopath\n                  },\n                  \" 忘记密码 \",\n                  32\n                  /* NEED_HYDRATION */\n                )\n              ])\n            ])\n          ]),\n          _createCommentVNode(\" 广告位 \"),\n          _createVNode(_component_AdBanner, { slider: \"\" }),\n          _createVNode(FooterView, {\n            \"btn-name\": \"登录\",\n            onClick: onLogin\n          })\n        ],\n        64\n        /* STABLE_FRAGMENT */\n      );\n    };\n  }\n});\n",
      "start": 1714699770707,
      "end": 1714699770707,
      "order": "normal",
      "sourcemaps": null
    },
    {
      "name": "esbuild",
      "result": "\"use strict\";\nimport { defineComponent as _defineComponent } from \"vue\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-52a59ab5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" };\nconst _hoisted_2 = { class: \"content-view\" };\nconst _hoisted_3 = { class: \"input-content-view\" };\nconst _hoisted_4 = { class: \"input-view flex items-center\" };\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\n  \"span\",\n  { class: \"text-[#ccc] pl-[15px]\" },\n  \"|\",\n  -1\n  /* HOISTED */\n));\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" };\nimport { checkImgApi } from \"@/apis/auth\";\nimport FooterView from \"@/components/Auth/FooterView.vue\";\nimport { useAuthStore } from \"@/store/modules/auth\";\nimport { useEntryStore } from \"@/store/modules/entry\";\nimport { requireImg } from \"@/utils/tools\";\nimport { storeToRefs } from \"pinia\";\nimport { showFailToast } from \"vant\";\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { inputChange } from \"./tools\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"Login\",\n  setup(__props) {\n    const country_code = ref(\"CN\");\n    const phone_code = ref(\"+86\");\n    const route = useRoute();\n    const query = route.query;\n    if (!!query) {\n      country_code.value = query.country_code || \"CN\";\n      phone_code.value = \"+\" + (query.phone_code || \"86\");\n    }\n    const authStore = useAuthStore();\n    const { userInfo, Websocket } = storeToRefs(authStore);\n    const { mobile: _mobile = \"\", pass = \"\" } = userInfo;\n    const mobile = reactive({\n      value: _mobile,\n      error: \"\",\n      // type: 'number',\n      type: \"text\",\n      pattern: \"^[a-zA-Z0-9]{6,20}$\"\n    });\n    const password = reactive({\n      value: pass,\n      error: \"\",\n      type: \"password\",\n      pattern: \"[?!a-zA-Z0-9.]{6,16}$\"\n    });\n    const code = reactive({\n      value: \"\",\n      error: \"\",\n      type: \"text\",\n      pattern: \"^[0-9]{4}$\"\n    });\n    const mobileOnChange = (data) => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regAccount = /^[a-zA-Z0-9]{6,20}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !regAccount.test(isValue.value)) {\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(mobile)(data);\n    };\n    const passwordOnChange = (data) => {\n      const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g);\n      if (isValue) {\n        if (!reg.test(isValue.value)) {\n          data.push({\n            key: \"error\",\n            value: \"\\u5BC6\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\"\n          });\n        } else {\n          console.log(\"\\u5BC6\\u7801\\u901A\\u8FC7\");\n          data.push({\n            key: \"error\",\n            value: \"\"\n          });\n        }\n      }\n      inputChange(password)(data);\n    };\n    const codeOnChange = (data) => {\n      const reg = new RegExp(/^[0-9]{4}$/);\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !reg.test(isValue.value)) {\n        data.push({\n          key: \"error\",\n          value: \"\\u9A8C\\u8BC1\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\"\n        });\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(code)(data);\n    };\n    const entryStore = useEntryStore();\n    const { config, fingerprint } = storeToRefs(entryStore);\n    const isOpenRecaptcha = computed(() => {\n      var _a, _b, _c;\n      return ((_b = (_a = config.value.Web_Set_WebReg) == null ? void 0 : _a.is_open_recaptcha) == null ? void 0 : _b.v) ? (_c = config.value.Web_Set_WebReg) == null ? void 0 : _c.is_open_recaptcha : {\n        v: \"0\",\n        n: \"\",\n        id: \"\"\n      };\n    });\n    const inputFormList = ref([\n      {\n        key: \"mobile\",\n        placeholder: \"\\u624B\\u673A\\u8D26\\u53F7\",\n        typeKey: \"mobile\",\n        icon: \"mobile\",\n        onChange: (e) => mobileOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(mobile)\n      },\n      {\n        key: \"password\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u767B\\u5F55\\u5BC6\\u7801\",\n        typeKey: \"psw\",\n        icon: \"lock\",\n        onChange: (e) => passwordOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(password)\n      },\n      {\n        key: \"code\",\n        placeholder: \"\\u56FE\\u5F62\\u9A8C\\u8BC1\\u7801\",\n        typeKey: \"code\",\n        onChange: (e) => codeOnChange([{ key: \"value\", value: e.target.value }]),\n        icon: \"code\",\n        ...toRefs(code)\n      }\n    ]);\n    const togglePasswordStatus = (index) => {\n      inputFormList.value[index].type = inputFormList.value[index].type === \"password\" ? \"text\" : \"password\";\n    };\n    const { getFingerprint } = entryStore;\n    getFingerprint();\n    if (!!!localStorage.getItem(\"fingerprint\"))\n      localStorage.setItem(\"fingerprint\", fingerprint.value);\n    const { getLoginApi } = authStore;\n    const router = useRouter();\n    const loginAccount = computed(() => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regLikeMobile = /^\\d{6,20}$/;\n      const _mobile2 = mobile.value.includes(phone_code.value) ? mobile.value : phone_code.value + mobile.value;\n      const _account = mobile.value;\n      if (regLikeMobile.test(mobile.value)) {\n        return {\n          mobile: _mobile2\n        };\n      }\n      return {\n        account: _account\n      };\n    });\n    const onLogin = async () => {\n      if (!mobile.value)\n        return showFailToast(\"\\u8D26\\u53F7\\u4E0D\\u80FD\\u4E3A\\u7A7A\");\n      if (!password.value)\n        return showFailToast(\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\");\n      if (mobile.error)\n        return showFailToast(mobile.error);\n      if (password.error)\n        return showFailToast(password.error);\n      const search = new URLSearchParams(window.location.search);\n      const vtoken = search.get(\"vtoken\") || \"\";\n      const deviceid = search.get(\"deviceid\") || \"\";\n      const params = {\n        mobile: loginAccount.value.mobile,\n        username: loginAccount.value.account,\n        pass: password.value,\n        deviceid: localStorage.getItem(\"fingerprint\") || fingerprint.value,\n        imgid: fingerprint.value,\n        imgtype: \"login\",\n        web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n        imgcode: code.value\n      };\n      try {\n        await getLoginApi(params).then((data) => {\n          if (!!!data || !!!data.token)\n            return getCheckImg();\n          Websocket.value.start(data.token);\n          Websocket.value.reconnect();\n          let gopath2 = sessionStorage.getItem(\"gopath\");\n          if (!!gopath2) {\n            sessionStorage.setItem(\"gopath\", \"\");\n            return router.push(gopath2);\n          }\n          router.push(\"/\");\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const captchaImg = ref(\"\");\n    const getCheckImg = async () => {\n      try {\n        const res = await checkImgApi({\n          imgid: fingerprint.value,\n          imgtype: \"login\"\n        });\n        const url = window.URL.createObjectURL(new Blob([res], { type: \"image/png\" }));\n        captchaImg.value = url;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const gopath = () => {\n      router.push(\"/auth/forgetPasw\");\n    };\n    const onEnterUp = (e) => {\n      if ([\"Enter\", \"NumpadEnter\"].includes(e.code)) {\n        onLogin();\n      }\n    };\n    watch(isOpenRecaptcha, (e) => {\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onMounted(() => {\n      window.addEventListener(\"keyup\", onEnterUp);\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"keyup\", onEnterUp);\n    });\n    return (_ctx, _cache) => {\n      const _component_van_icon = _resolveComponent(\"van-icon\");\n      const _component_AdBanner = _resolveComponent(\"AdBanner\");\n      return _openBlock(), _createElementBlock(\n        _Fragment,\n        null,\n        [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              (_openBlock(true), _createElementBlock(\n                _Fragment,\n                null,\n                _renderList(inputFormList.value, (item, index) => {\n                  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n                    key: item.key,\n                    class: \"input-content relative z-[1]\"\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\n                          \"i\",\n                          {\n                            class: _normalizeClass([\"block\", item.icon])\n                          },\n                          null,\n                          2\n                          /* CLASS */\n                        ),\n                        item.key == \"mobile\" ? (_openBlock(), _createElementBlock(\"span\", {\n                          key: 0,\n                          onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$router.replace(\"/country\")),\n                          class: \"text-[24px] flex_s mx-[13px]\"\n                        }, [\n                          _createElementVNode(\"img\", {\n                            class: \"w-[40px] mr-[15px]\",\n                            src: _unref(requireImg)(\"common/\" + country_code.value + \".png\"),\n                            alt: \"\"\n                          }, null, 8, _hoisted_5),\n                          _createTextVNode(\n                            \" \" + _toDisplayString(phone_code.value) + \" \",\n                            1\n                            /* TEXT */\n                          ),\n                          _createVNode(_component_van_icon, {\n                            class: \"ml-[15px]\",\n                            size: \"15px\",\n                            name: \"arrow-down\"\n                          }),\n                          _hoisted_6\n                        ])) : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"input\", {\n                          class: \"!text-[29px] w-[260px]\",\n                          type: item.type,\n                          placeholder: item.placeholder,\n                          pattern: item.pattern,\n                          onChange: item.onChange\n                        }, null, 40, _hoisted_7),\n                        item.key.toLowerCase().includes(\"password\") ? (_openBlock(), _createElementBlock(\"i\", {\n                          key: 1,\n                          class: _normalizeClass(item.type === \"password\" ? \"eye-close\" : \"eye-open\"),\n                          onClick: ($event) => togglePasswordStatus(index)\n                        }, null, 10, _hoisted_8)) : _createCommentVNode(\"v-if\", true),\n                        captchaImg.value && index === 2 ? (_openBlock(), _createElementBlock(\"img\", {\n                          key: 2,\n                          src: captchaImg.value,\n                          onClick: getCheckImg\n                        }, null, 8, _hoisted_9)) : _createCommentVNode(\"v-if\", true)\n                      ]),\n                      _createCommentVNode(' <div className=\"error !text-[24px]\">{{ item.error }}</div> ')\n                    ])\n                  ])), [\n                    [_vShow, index === 2 && isOpenRecaptcha.value.v === \"1\" || index !== 2]\n                  ]);\n                }),\n                128\n                /* KEYED_FRAGMENT */\n              )),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\n                  \"span\",\n                  {\n                    class: \"px-[20px]\",\n                    onTouchstart: gopath\n                  },\n                  \" \\u5FD8\\u8BB0\\u5BC6\\u7801 \",\n                  32\n                  /* NEED_HYDRATION */\n                )\n              ])\n            ])\n          ]),\n          _createCommentVNode(\" \\u5E7F\\u544A\\u4F4D \"),\n          _createVNode(_component_AdBanner, { slider: \"\" }),\n          _createVNode(FooterView, {\n            \"btn-name\": \"\\u767B\\u5F55\",\n            onClick: onLogin\n          })\n        ],\n        64\n        /* STABLE_FRAGMENT */\n      );\n    };\n  }\n});\n",
      "start": 1714699770707,
      "end": 1714699771679,
      "order": "normal",
      "sourcemaps": "{\n  \"version\": 3,\n  \"sources\": [\"/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Auth/Login.vue?vue&type=script&setup=true&lang.ts\"],\n  \"sourcesContent\": [\"import { defineComponent as _defineComponent } from \\\"vue\\\";\\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \\\"vue\\\";\\nconst _withScopeId = (n) => (_pushScopeId(\\\"data-v-52a59ab5\\\"), n = n(), _popScopeId(), n);\\nconst _hoisted_1 = { class: \\\"login-container mb-[70px]\\\" };\\nconst _hoisted_2 = { class: \\\"content-view\\\" };\\nconst _hoisted_3 = { class: \\\"input-content-view\\\" };\\nconst _hoisted_4 = { class: \\\"input-view flex items-center\\\" };\\nconst _hoisted_5 = [\\\"src\\\"];\\nconst _hoisted_6 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\\n  \\\"span\\\",\\n  { class: \\\"text-[#ccc] pl-[15px]\\\" },\\n  \\\"|\\\",\\n  -1\\n  /* HOISTED */\\n));\\nconst _hoisted_7 = [\\\"type\\\", \\\"placeholder\\\", \\\"pattern\\\", \\\"onChange\\\"];\\nconst _hoisted_8 = [\\\"onClick\\\"];\\nconst _hoisted_9 = [\\\"src\\\"];\\nconst _hoisted_10 = { class: \\\"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\\\" };\\nimport { checkImgApi } from \\\"@/apis/auth\\\";\\nimport FooterView from \\\"@/components/Auth/FooterView.vue\\\";\\nimport { useAuthStore } from \\\"@/store/modules/auth\\\";\\nimport { useEntryStore } from \\\"@/store/modules/entry\\\";\\nimport { requireImg } from \\\"@/utils/tools\\\";\\nimport { storeToRefs } from \\\"pinia\\\";\\nimport { showFailToast } from \\\"vant\\\";\\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from \\\"vue\\\";\\nimport { useRoute, useRouter } from \\\"vue-router\\\";\\nimport { inputChange } from \\\"./tools\\\";\\nexport default /* @__PURE__ */ _defineComponent({\\n  __name: \\\"Login\\\",\\n  setup(__props) {\\n    const country_code = ref(\\\"CN\\\");\\n    const phone_code = ref(\\\"+86\\\");\\n    const route = useRoute();\\n    const query = route.query;\\n    if (!!query) {\\n      country_code.value = query.country_code || \\\"CN\\\";\\n      phone_code.value = \\\"+\\\" + (query.phone_code || \\\"86\\\");\\n    }\\n    const authStore = useAuthStore();\\n    const { userInfo, Websocket } = storeToRefs(authStore);\\n    const { mobile: _mobile = \\\"\\\", pass = \\\"\\\" } = userInfo;\\n    const mobile = reactive({\\n      value: _mobile,\\n      error: \\\"\\\",\\n      // type: 'number',\\n      type: \\\"text\\\",\\n      pattern: \\\"^[a-zA-Z0-9]{6,20}$\\\"\\n    });\\n    const password = reactive({\\n      value: pass,\\n      error: \\\"\\\",\\n      type: \\\"password\\\",\\n      pattern: \\\"[?!a-zA-Z0-9.]{6,16}$\\\"\\n    });\\n    const code = reactive({\\n      value: \\\"\\\",\\n      error: \\\"\\\",\\n      type: \\\"text\\\",\\n      pattern: \\\"^[0-9]{4}$\\\"\\n    });\\n    const mobileOnChange = (data) => {\\n      const regCN = /^1[3456789]\\\\d{9,10}$/;\\n      const regTW = /^9[0-9]{8,9}$/;\\n      const regAccount = /^[a-zA-Z0-9]{6,20}$/;\\n      const isValue = data.find((item) => item.key === \\\"value\\\");\\n      if (isValue && !regAccount.test(isValue.value)) {\\n      } else {\\n        data.push({\\n          key: \\\"error\\\",\\n          value: \\\"\\\"\\n        });\\n      }\\n      inputChange(mobile)(data);\\n    };\\n    const passwordOnChange = (data) => {\\n      const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\\\[\\\\]:;<>,.?~-]{6,18}$/;\\n      const isValue = data.find((item) => item.key === \\\"value\\\");\\n      const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g);\\n      if (isValue) {\\n        if (!reg.test(isValue.value)) {\\n          data.push({\\n            key: \\\"error\\\",\\n            value: \\\"\\u5BC6\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\\\"\\n          });\\n        } else {\\n          console.log(\\\"\\u5BC6\\u7801\\u901A\\u8FC7\\\");\\n          data.push({\\n            key: \\\"error\\\",\\n            value: \\\"\\\"\\n          });\\n        }\\n      }\\n      inputChange(password)(data);\\n    };\\n    const codeOnChange = (data) => {\\n      const reg = new RegExp(/^[0-9]{4}$/);\\n      const isValue = data.find((item) => item.key === \\\"value\\\");\\n      if (isValue && !reg.test(isValue.value)) {\\n        data.push({\\n          key: \\\"error\\\",\\n          value: \\\"\\u9A8C\\u8BC1\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\\\"\\n        });\\n      } else {\\n        data.push({\\n          key: \\\"error\\\",\\n          value: \\\"\\\"\\n        });\\n      }\\n      inputChange(code)(data);\\n    };\\n    const entryStore = useEntryStore();\\n    const { config, fingerprint } = storeToRefs(entryStore);\\n    const isOpenRecaptcha = computed(() => {\\n      return config.value.Web_Set_WebReg?.is_open_recaptcha?.v ? config.value.Web_Set_WebReg?.is_open_recaptcha : {\\n        v: \\\"0\\\",\\n        n: \\\"\\\",\\n        id: \\\"\\\"\\n      };\\n    });\\n    const inputFormList = ref([\\n      {\\n        key: \\\"mobile\\\",\\n        placeholder: \\\"\\u624B\\u673A\\u8D26\\u53F7\\\",\\n        typeKey: \\\"mobile\\\",\\n        icon: \\\"mobile\\\",\\n        onChange: (e) => mobileOnChange([{ key: \\\"value\\\", value: e.target.value }]),\\n        ...toRefs(mobile)\\n      },\\n      {\\n        key: \\\"password\\\",\\n        placeholder: \\\"\\u8BF7\\u8F93\\u5165\\u767B\\u5F55\\u5BC6\\u7801\\\",\\n        typeKey: \\\"psw\\\",\\n        icon: \\\"lock\\\",\\n        onChange: (e) => passwordOnChange([{ key: \\\"value\\\", value: e.target.value }]),\\n        ...toRefs(password)\\n      },\\n      {\\n        key: \\\"code\\\",\\n        placeholder: \\\"\\u56FE\\u5F62\\u9A8C\\u8BC1\\u7801\\\",\\n        typeKey: \\\"code\\\",\\n        onChange: (e) => codeOnChange([{ key: \\\"value\\\", value: e.target.value }]),\\n        icon: \\\"code\\\",\\n        ...toRefs(code)\\n      }\\n    ]);\\n    const togglePasswordStatus = (index) => {\\n      inputFormList.value[index].type = inputFormList.value[index].type === \\\"password\\\" ? \\\"text\\\" : \\\"password\\\";\\n    };\\n    const { getFingerprint } = entryStore;\\n    getFingerprint();\\n    if (!!!localStorage.getItem(\\\"fingerprint\\\"))\\n      localStorage.setItem(\\\"fingerprint\\\", fingerprint.value);\\n    const { getLoginApi } = authStore;\\n    const router = useRouter();\\n    const loginAccount = computed(() => {\\n      const regCN = /^1[3456789]\\\\d{9,10}$/;\\n      const regTW = /^9[0-9]{8,9}$/;\\n      const regLikeMobile = /^\\\\d{6,20}$/;\\n      const _mobile2 = mobile.value.includes(phone_code.value) ? mobile.value : phone_code.value + mobile.value;\\n      const _account = mobile.value;\\n      if (regLikeMobile.test(mobile.value)) {\\n        return {\\n          mobile: _mobile2\\n        };\\n      }\\n      return {\\n        account: _account\\n      };\\n    });\\n    const onLogin = async () => {\\n      if (!mobile.value)\\n        return showFailToast(\\\"\\u8D26\\u53F7\\u4E0D\\u80FD\\u4E3A\\u7A7A\\\");\\n      if (!password.value)\\n        return showFailToast(\\\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\\\");\\n      if (mobile.error)\\n        return showFailToast(mobile.error);\\n      if (password.error)\\n        return showFailToast(password.error);\\n      const search = new URLSearchParams(window.location.search);\\n      const vtoken = search.get(\\\"vtoken\\\") || \\\"\\\";\\n      const deviceid = search.get(\\\"deviceid\\\") || \\\"\\\";\\n      const params = {\\n        mobile: loginAccount.value.mobile,\\n        username: loginAccount.value.account,\\n        pass: password.value,\\n        deviceid: localStorage.getItem(\\\"fingerprint\\\") || fingerprint.value,\\n        imgid: fingerprint.value,\\n        imgtype: \\\"login\\\",\\n        web_login_url: !vtoken && !deviceid ? window.location.origin : null,\\n        imgcode: code.value\\n      };\\n      try {\\n        await getLoginApi(params).then((data) => {\\n          if (!!!data || !!!data.token)\\n            return getCheckImg();\\n          Websocket.value.start(data.token);\\n          Websocket.value.reconnect();\\n          let gopath2 = sessionStorage.getItem(\\\"gopath\\\");\\n          if (!!gopath2) {\\n            sessionStorage.setItem(\\\"gopath\\\", \\\"\\\");\\n            return router.push(gopath2);\\n          }\\n          router.push(\\\"/\\\");\\n        });\\n      } catch (error) {\\n        console.error(error);\\n      }\\n    };\\n    const captchaImg = ref(\\\"\\\");\\n    const getCheckImg = async () => {\\n      try {\\n        const res = await checkImgApi({\\n          imgid: fingerprint.value,\\n          imgtype: \\\"login\\\"\\n        });\\n        const url = window.URL.createObjectURL(new Blob([res], { type: \\\"image/png\\\" }));\\n        captchaImg.value = url;\\n      } catch (error) {\\n        console.error(error);\\n      }\\n    };\\n    const gopath = () => {\\n      router.push(\\\"/auth/forgetPasw\\\");\\n    };\\n    const onEnterUp = (e) => {\\n      if ([\\\"Enter\\\", \\\"NumpadEnter\\\"].includes(e.code)) {\\n        onLogin();\\n      }\\n    };\\n    watch(isOpenRecaptcha, (e) => {\\n      if (isOpenRecaptcha.value.v === \\\"1\\\") {\\n        getCheckImg();\\n      }\\n    });\\n    onMounted(() => {\\n      window.addEventListener(\\\"keyup\\\", onEnterUp);\\n      if (isOpenRecaptcha.value.v === \\\"1\\\") {\\n        getCheckImg();\\n      }\\n    });\\n    onUnmounted(() => {\\n      window.removeEventListener(\\\"keyup\\\", onEnterUp);\\n    });\\n    return (_ctx, _cache) => {\\n      const _component_van_icon = _resolveComponent(\\\"van-icon\\\");\\n      const _component_AdBanner = _resolveComponent(\\\"AdBanner\\\");\\n      return _openBlock(), _createElementBlock(\\n        _Fragment,\\n        null,\\n        [\\n          _createElementVNode(\\\"div\\\", _hoisted_1, [\\n            _createElementVNode(\\\"div\\\", _hoisted_2, [\\n              (_openBlock(true), _createElementBlock(\\n                _Fragment,\\n                null,\\n                _renderList(inputFormList.value, (item, index) => {\\n                  return _withDirectives((_openBlock(), _createElementBlock(\\\"div\\\", {\\n                    key: item.key,\\n                    class: \\\"input-content relative z-[1]\\\"\\n                  }, [\\n                    _createElementVNode(\\\"div\\\", _hoisted_3, [\\n                      _createElementVNode(\\\"div\\\", _hoisted_4, [\\n                        _createElementVNode(\\n                          \\\"i\\\",\\n                          {\\n                            class: _normalizeClass([\\\"block\\\", item.icon])\\n                          },\\n                          null,\\n                          2\\n                          /* CLASS */\\n                        ),\\n                        item.key == \\\"mobile\\\" ? (_openBlock(), _createElementBlock(\\\"span\\\", {\\n                          key: 0,\\n                          onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$router.replace(\\\"/country\\\")),\\n                          class: \\\"text-[24px] flex_s mx-[13px]\\\"\\n                        }, [\\n                          _createElementVNode(\\\"img\\\", {\\n                            class: \\\"w-[40px] mr-[15px]\\\",\\n                            src: _unref(requireImg)(\\\"common/\\\" + country_code.value + \\\".png\\\"),\\n                            alt: \\\"\\\"\\n                          }, null, 8, _hoisted_5),\\n                          _createTextVNode(\\n                            \\\" \\\" + _toDisplayString(phone_code.value) + \\\" \\\",\\n                            1\\n                            /* TEXT */\\n                          ),\\n                          _createVNode(_component_van_icon, {\\n                            class: \\\"ml-[15px]\\\",\\n                            size: \\\"15px\\\",\\n                            name: \\\"arrow-down\\\"\\n                          }),\\n                          _hoisted_6\\n                        ])) : _createCommentVNode(\\\"v-if\\\", true),\\n                        _createElementVNode(\\\"input\\\", {\\n                          class: \\\"!text-[29px] w-[260px]\\\",\\n                          type: item.type,\\n                          placeholder: item.placeholder,\\n                          pattern: item.pattern,\\n                          onChange: item.onChange\\n                        }, null, 40, _hoisted_7),\\n                        item.key.toLowerCase().includes(\\\"password\\\") ? (_openBlock(), _createElementBlock(\\\"i\\\", {\\n                          key: 1,\\n                          class: _normalizeClass(item.type === \\\"password\\\" ? \\\"eye-close\\\" : \\\"eye-open\\\"),\\n                          onClick: ($event) => togglePasswordStatus(index)\\n                        }, null, 10, _hoisted_8)) : _createCommentVNode(\\\"v-if\\\", true),\\n                        captchaImg.value && index === 2 ? (_openBlock(), _createElementBlock(\\\"img\\\", {\\n                          key: 2,\\n                          src: captchaImg.value,\\n                          onClick: getCheckImg\\n                        }, null, 8, _hoisted_9)) : _createCommentVNode(\\\"v-if\\\", true)\\n                      ]),\\n                      _createCommentVNode(' <div className=\\\"error !text-[24px]\\\">{{ item.error }}</div> ')\\n                    ])\\n                  ])), [\\n                    [_vShow, index === 2 && isOpenRecaptcha.value.v === \\\"1\\\" || index !== 2]\\n                  ]);\\n                }),\\n                128\\n                /* KEYED_FRAGMENT */\\n              )),\\n              _createElementVNode(\\\"div\\\", _hoisted_10, [\\n                _createElementVNode(\\n                  \\\"span\\\",\\n                  {\\n                    class: \\\"px-[20px]\\\",\\n                    onTouchstart: gopath\\n                  },\\n                  \\\" \\u5FD8\\u8BB0\\u5BC6\\u7801 \\\",\\n                  32\\n                  /* NEED_HYDRATION */\\n                )\\n              ])\\n            ])\\n          ]),\\n          _createCommentVNode(\\\" \\u5E7F\\u544A\\u4F4D \\\"),\\n          _createVNode(_component_AdBanner, { slider: \\\"\\\" }),\\n          _createVNode(FooterView, {\\n            \\\"btn-name\\\": \\\"\\u767B\\u5F55\\\",\\n            onClick: onLogin\\n          })\\n        ],\\n        64\\n        /* STABLE_FRAGMENT */\\n      );\\n    };\\n  }\\n});\\n\"],\n  \"mappings\": \"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\",\n  \"names\": []\n}\n"
    },
    {
      "name": "vite:define",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1714699771679,
      "end": 1714699771679,
      "order": "normal"
    },
    {
      "name": "unplugin-auto-import",
      "start": 1714699771679,
      "end": 1714699771680,
      "order": "post"
    },
    {
      "name": "unplugin-vue-components",
      "result": "/* unplugin-vue-components disabled */import __unplugin_components_1 from '/Users/afeng/Desktop/work/gdpayh5-web/src/components/Ad/AdBanner.vue';\nimport { Icon as __unplugin_components_0 } from 'vant/es';import 'vant/es/icon/style/index';\n\"use strict\";\nimport { defineComponent as _defineComponent } from \"vue\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-52a59ab5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" };\nconst _hoisted_2 = { class: \"content-view\" };\nconst _hoisted_3 = { class: \"input-content-view\" };\nconst _hoisted_4 = { class: \"input-view flex items-center\" };\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\n  \"span\",\n  { class: \"text-[#ccc] pl-[15px]\" },\n  \"|\",\n  -1\n  /* HOISTED */\n));\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" };\nimport { checkImgApi } from \"@/apis/auth\";\nimport FooterView from \"@/components/Auth/FooterView.vue\";\nimport { useAuthStore } from \"@/store/modules/auth\";\nimport { useEntryStore } from \"@/store/modules/entry\";\nimport { requireImg } from \"@/utils/tools\";\nimport { storeToRefs } from \"pinia\";\nimport { showFailToast } from \"vant\";\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { inputChange } from \"./tools\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"Login\",\n  setup(__props) {\n    const country_code = ref(\"CN\");\n    const phone_code = ref(\"+86\");\n    const route = useRoute();\n    const query = route.query;\n    if (!!query) {\n      country_code.value = query.country_code || \"CN\";\n      phone_code.value = \"+\" + (query.phone_code || \"86\");\n    }\n    const authStore = useAuthStore();\n    const { userInfo, Websocket } = storeToRefs(authStore);\n    const { mobile: _mobile = \"\", pass = \"\" } = userInfo;\n    const mobile = reactive({\n      value: _mobile,\n      error: \"\",\n      // type: 'number',\n      type: \"text\",\n      pattern: \"^[a-zA-Z0-9]{6,20}$\"\n    });\n    const password = reactive({\n      value: pass,\n      error: \"\",\n      type: \"password\",\n      pattern: \"[?!a-zA-Z0-9.]{6,16}$\"\n    });\n    const code = reactive({\n      value: \"\",\n      error: \"\",\n      type: \"text\",\n      pattern: \"^[0-9]{4}$\"\n    });\n    const mobileOnChange = (data) => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regAccount = /^[a-zA-Z0-9]{6,20}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !regAccount.test(isValue.value)) {\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(mobile)(data);\n    };\n    const passwordOnChange = (data) => {\n      const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g);\n      if (isValue) {\n        if (!reg.test(isValue.value)) {\n          data.push({\n            key: \"error\",\n            value: \"\\u5BC6\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\"\n          });\n        } else {\n          console.log(\"\\u5BC6\\u7801\\u901A\\u8FC7\");\n          data.push({\n            key: \"error\",\n            value: \"\"\n          });\n        }\n      }\n      inputChange(password)(data);\n    };\n    const codeOnChange = (data) => {\n      const reg = new RegExp(/^[0-9]{4}$/);\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !reg.test(isValue.value)) {\n        data.push({\n          key: \"error\",\n          value: \"\\u9A8C\\u8BC1\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\"\n        });\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(code)(data);\n    };\n    const entryStore = useEntryStore();\n    const { config, fingerprint } = storeToRefs(entryStore);\n    const isOpenRecaptcha = computed(() => {\n      var _a, _b, _c;\n      return ((_b = (_a = config.value.Web_Set_WebReg) == null ? void 0 : _a.is_open_recaptcha) == null ? void 0 : _b.v) ? (_c = config.value.Web_Set_WebReg) == null ? void 0 : _c.is_open_recaptcha : {\n        v: \"0\",\n        n: \"\",\n        id: \"\"\n      };\n    });\n    const inputFormList = ref([\n      {\n        key: \"mobile\",\n        placeholder: \"\\u624B\\u673A\\u8D26\\u53F7\",\n        typeKey: \"mobile\",\n        icon: \"mobile\",\n        onChange: (e) => mobileOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(mobile)\n      },\n      {\n        key: \"password\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u767B\\u5F55\\u5BC6\\u7801\",\n        typeKey: \"psw\",\n        icon: \"lock\",\n        onChange: (e) => passwordOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(password)\n      },\n      {\n        key: \"code\",\n        placeholder: \"\\u56FE\\u5F62\\u9A8C\\u8BC1\\u7801\",\n        typeKey: \"code\",\n        onChange: (e) => codeOnChange([{ key: \"value\", value: e.target.value }]),\n        icon: \"code\",\n        ...toRefs(code)\n      }\n    ]);\n    const togglePasswordStatus = (index) => {\n      inputFormList.value[index].type = inputFormList.value[index].type === \"password\" ? \"text\" : \"password\";\n    };\n    const { getFingerprint } = entryStore;\n    getFingerprint();\n    if (!!!localStorage.getItem(\"fingerprint\"))\n      localStorage.setItem(\"fingerprint\", fingerprint.value);\n    const { getLoginApi } = authStore;\n    const router = useRouter();\n    const loginAccount = computed(() => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regLikeMobile = /^\\d{6,20}$/;\n      const _mobile2 = mobile.value.includes(phone_code.value) ? mobile.value : phone_code.value + mobile.value;\n      const _account = mobile.value;\n      if (regLikeMobile.test(mobile.value)) {\n        return {\n          mobile: _mobile2\n        };\n      }\n      return {\n        account: _account\n      };\n    });\n    const onLogin = async () => {\n      if (!mobile.value)\n        return showFailToast(\"\\u8D26\\u53F7\\u4E0D\\u80FD\\u4E3A\\u7A7A\");\n      if (!password.value)\n        return showFailToast(\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\");\n      if (mobile.error)\n        return showFailToast(mobile.error);\n      if (password.error)\n        return showFailToast(password.error);\n      const search = new URLSearchParams(window.location.search);\n      const vtoken = search.get(\"vtoken\") || \"\";\n      const deviceid = search.get(\"deviceid\") || \"\";\n      const params = {\n        mobile: loginAccount.value.mobile,\n        username: loginAccount.value.account,\n        pass: password.value,\n        deviceid: localStorage.getItem(\"fingerprint\") || fingerprint.value,\n        imgid: fingerprint.value,\n        imgtype: \"login\",\n        web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n        imgcode: code.value\n      };\n      try {\n        await getLoginApi(params).then((data) => {\n          if (!!!data || !!!data.token)\n            return getCheckImg();\n          Websocket.value.start(data.token);\n          Websocket.value.reconnect();\n          let gopath2 = sessionStorage.getItem(\"gopath\");\n          if (!!gopath2) {\n            sessionStorage.setItem(\"gopath\", \"\");\n            return router.push(gopath2);\n          }\n          router.push(\"/\");\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const captchaImg = ref(\"\");\n    const getCheckImg = async () => {\n      try {\n        const res = await checkImgApi({\n          imgid: fingerprint.value,\n          imgtype: \"login\"\n        });\n        const url = window.URL.createObjectURL(new Blob([res], { type: \"image/png\" }));\n        captchaImg.value = url;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const gopath = () => {\n      router.push(\"/auth/forgetPasw\");\n    };\n    const onEnterUp = (e) => {\n      if ([\"Enter\", \"NumpadEnter\"].includes(e.code)) {\n        onLogin();\n      }\n    };\n    watch(isOpenRecaptcha, (e) => {\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onMounted(() => {\n      window.addEventListener(\"keyup\", onEnterUp);\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"keyup\", onEnterUp);\n    });\n    return (_ctx, _cache) => {\n      const _component_van_icon = __unplugin_components_0;\n      const _component_AdBanner = __unplugin_components_1;\n      return _openBlock(), _createElementBlock(\n        _Fragment,\n        null,\n        [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              (_openBlock(true), _createElementBlock(\n                _Fragment,\n                null,\n                _renderList(inputFormList.value, (item, index) => {\n                  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n                    key: item.key,\n                    class: \"input-content relative z-[1]\"\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\n                          \"i\",\n                          {\n                            class: _normalizeClass([\"block\", item.icon])\n                          },\n                          null,\n                          2\n                          /* CLASS */\n                        ),\n                        item.key == \"mobile\" ? (_openBlock(), _createElementBlock(\"span\", {\n                          key: 0,\n                          onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$router.replace(\"/country\")),\n                          class: \"text-[24px] flex_s mx-[13px]\"\n                        }, [\n                          _createElementVNode(\"img\", {\n                            class: \"w-[40px] mr-[15px]\",\n                            src: _unref(requireImg)(\"common/\" + country_code.value + \".png\"),\n                            alt: \"\"\n                          }, null, 8, _hoisted_5),\n                          _createTextVNode(\n                            \" \" + _toDisplayString(phone_code.value) + \" \",\n                            1\n                            /* TEXT */\n                          ),\n                          _createVNode(_component_van_icon, {\n                            class: \"ml-[15px]\",\n                            size: \"15px\",\n                            name: \"arrow-down\"\n                          }),\n                          _hoisted_6\n                        ])) : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"input\", {\n                          class: \"!text-[29px] w-[260px]\",\n                          type: item.type,\n                          placeholder: item.placeholder,\n                          pattern: item.pattern,\n                          onChange: item.onChange\n                        }, null, 40, _hoisted_7),\n                        item.key.toLowerCase().includes(\"password\") ? (_openBlock(), _createElementBlock(\"i\", {\n                          key: 1,\n                          class: _normalizeClass(item.type === \"password\" ? \"eye-close\" : \"eye-open\"),\n                          onClick: ($event) => togglePasswordStatus(index)\n                        }, null, 10, _hoisted_8)) : _createCommentVNode(\"v-if\", true),\n                        captchaImg.value && index === 2 ? (_openBlock(), _createElementBlock(\"img\", {\n                          key: 2,\n                          src: captchaImg.value,\n                          onClick: getCheckImg\n                        }, null, 8, _hoisted_9)) : _createCommentVNode(\"v-if\", true)\n                      ]),\n                      _createCommentVNode(' <div className=\"error !text-[24px]\">{{ item.error }}</div> ')\n                    ])\n                  ])), [\n                    [_vShow, index === 2 && isOpenRecaptcha.value.v === \"1\" || index !== 2]\n                  ]);\n                }),\n                128\n                /* KEYED_FRAGMENT */\n              )),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\n                  \"span\",\n                  {\n                    class: \"px-[20px]\",\n                    onTouchstart: gopath\n                  },\n                  \" \\u5FD8\\u8BB0\\u5BC6\\u7801 \",\n                  32\n                  /* NEED_HYDRATION */\n                )\n              ])\n            ])\n          ]),\n          _createCommentVNode(\" \\u5E7F\\u544A\\u4F4D \"),\n          _createVNode(_component_AdBanner, { slider: \"\" }),\n          _createVNode(FooterView, {\n            \"btn-name\": \"\\u767B\\u5F55\",\n            onClick: onLogin\n          })\n        ],\n        64\n        /* STABLE_FRAGMENT */\n      );\n    };\n  }\n});\n",
      "start": 1714699771680,
      "end": 1714699771681,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          "/Users/afeng/Desktop/work/gdpayh5-web/src/pages/Auth/Login.vue?vue&type=script&setup=true&lang.ts"
        ],
        "sourcesContent": [
          "\"use strict\";\nimport { defineComponent as _defineComponent } from \"vue\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = (n) => (_pushScopeId(\"data-v-52a59ab5\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = { class: \"login-container mb-[70px]\" };\nconst _hoisted_2 = { class: \"content-view\" };\nconst _hoisted_3 = { class: \"input-content-view\" };\nconst _hoisted_4 = { class: \"input-view flex items-center\" };\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = /* @__PURE__ */ _withScopeId(() => /* @__PURE__ */ _createElementVNode(\n  \"span\",\n  { class: \"text-[#ccc] pl-[15px]\" },\n  \"|\",\n  -1\n  /* HOISTED */\n));\nconst _hoisted_7 = [\"type\", \"placeholder\", \"pattern\", \"onChange\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"src\"];\nconst _hoisted_10 = { class: \"text-[#ccc] text-[28px] mt-[-15px] text-right mr-[3px] relative z-[100] bg-[#fff]\" };\nimport { checkImgApi } from \"@/apis/auth\";\nimport FooterView from \"@/components/Auth/FooterView.vue\";\nimport { useAuthStore } from \"@/store/modules/auth\";\nimport { useEntryStore } from \"@/store/modules/entry\";\nimport { requireImg } from \"@/utils/tools\";\nimport { storeToRefs } from \"pinia\";\nimport { showFailToast } from \"vant\";\nimport { computed, onMounted, onUnmounted, reactive, ref, toRefs, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { inputChange } from \"./tools\";\nexport default /* @__PURE__ */ _defineComponent({\n  __name: \"Login\",\n  setup(__props) {\n    const country_code = ref(\"CN\");\n    const phone_code = ref(\"+86\");\n    const route = useRoute();\n    const query = route.query;\n    if (!!query) {\n      country_code.value = query.country_code || \"CN\";\n      phone_code.value = \"+\" + (query.phone_code || \"86\");\n    }\n    const authStore = useAuthStore();\n    const { userInfo, Websocket } = storeToRefs(authStore);\n    const { mobile: _mobile = \"\", pass = \"\" } = userInfo;\n    const mobile = reactive({\n      value: _mobile,\n      error: \"\",\n      // type: 'number',\n      type: \"text\",\n      pattern: \"^[a-zA-Z0-9]{6,20}$\"\n    });\n    const password = reactive({\n      value: pass,\n      error: \"\",\n      type: \"password\",\n      pattern: \"[?!a-zA-Z0-9.]{6,16}$\"\n    });\n    const code = reactive({\n      value: \"\",\n      error: \"\",\n      type: \"text\",\n      pattern: \"^[0-9]{4}$\"\n    });\n    const mobileOnChange = (data) => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regAccount = /^[a-zA-Z0-9]{6,20}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !regAccount.test(isValue.value)) {\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(mobile)(data);\n    };\n    const passwordOnChange = (data) => {\n      const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~-]{6,18}$/;\n      const isValue = data.find((item) => item.key === \"value\");\n      const reg1 = new RegExp(/(.*[a-zA-Z]+.*[0-9]+)|(.*[0-9]+.*[a-zA-Z]+)/g);\n      if (isValue) {\n        if (!reg.test(isValue.value)) {\n          data.push({\n            key: \"error\",\n            value: \"\\u5BC6\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\"\n          });\n        } else {\n          console.log(\"\\u5BC6\\u7801\\u901A\\u8FC7\");\n          data.push({\n            key: \"error\",\n            value: \"\"\n          });\n        }\n      }\n      inputChange(password)(data);\n    };\n    const codeOnChange = (data) => {\n      const reg = new RegExp(/^[0-9]{4}$/);\n      const isValue = data.find((item) => item.key === \"value\");\n      if (isValue && !reg.test(isValue.value)) {\n        data.push({\n          key: \"error\",\n          value: \"\\u9A8C\\u8BC1\\u7801\\u683C\\u5F0F\\u4E0D\\u6B63\\u786E\"\n        });\n      } else {\n        data.push({\n          key: \"error\",\n          value: \"\"\n        });\n      }\n      inputChange(code)(data);\n    };\n    const entryStore = useEntryStore();\n    const { config, fingerprint } = storeToRefs(entryStore);\n    const isOpenRecaptcha = computed(() => {\n      var _a, _b, _c;\n      return ((_b = (_a = config.value.Web_Set_WebReg) == null ? void 0 : _a.is_open_recaptcha) == null ? void 0 : _b.v) ? (_c = config.value.Web_Set_WebReg) == null ? void 0 : _c.is_open_recaptcha : {\n        v: \"0\",\n        n: \"\",\n        id: \"\"\n      };\n    });\n    const inputFormList = ref([\n      {\n        key: \"mobile\",\n        placeholder: \"\\u624B\\u673A\\u8D26\\u53F7\",\n        typeKey: \"mobile\",\n        icon: \"mobile\",\n        onChange: (e) => mobileOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(mobile)\n      },\n      {\n        key: \"password\",\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u767B\\u5F55\\u5BC6\\u7801\",\n        typeKey: \"psw\",\n        icon: \"lock\",\n        onChange: (e) => passwordOnChange([{ key: \"value\", value: e.target.value }]),\n        ...toRefs(password)\n      },\n      {\n        key: \"code\",\n        placeholder: \"\\u56FE\\u5F62\\u9A8C\\u8BC1\\u7801\",\n        typeKey: \"code\",\n        onChange: (e) => codeOnChange([{ key: \"value\", value: e.target.value }]),\n        icon: \"code\",\n        ...toRefs(code)\n      }\n    ]);\n    const togglePasswordStatus = (index) => {\n      inputFormList.value[index].type = inputFormList.value[index].type === \"password\" ? \"text\" : \"password\";\n    };\n    const { getFingerprint } = entryStore;\n    getFingerprint();\n    if (!!!localStorage.getItem(\"fingerprint\"))\n      localStorage.setItem(\"fingerprint\", fingerprint.value);\n    const { getLoginApi } = authStore;\n    const router = useRouter();\n    const loginAccount = computed(() => {\n      const regCN = /^1[3456789]\\d{9,10}$/;\n      const regTW = /^9[0-9]{8,9}$/;\n      const regLikeMobile = /^\\d{6,20}$/;\n      const _mobile2 = mobile.value.includes(phone_code.value) ? mobile.value : phone_code.value + mobile.value;\n      const _account = mobile.value;\n      if (regLikeMobile.test(mobile.value)) {\n        return {\n          mobile: _mobile2\n        };\n      }\n      return {\n        account: _account\n      };\n    });\n    const onLogin = async () => {\n      if (!mobile.value)\n        return showFailToast(\"\\u8D26\\u53F7\\u4E0D\\u80FD\\u4E3A\\u7A7A\");\n      if (!password.value)\n        return showFailToast(\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\");\n      if (mobile.error)\n        return showFailToast(mobile.error);\n      if (password.error)\n        return showFailToast(password.error);\n      const search = new URLSearchParams(window.location.search);\n      const vtoken = search.get(\"vtoken\") || \"\";\n      const deviceid = search.get(\"deviceid\") || \"\";\n      const params = {\n        mobile: loginAccount.value.mobile,\n        username: loginAccount.value.account,\n        pass: password.value,\n        deviceid: localStorage.getItem(\"fingerprint\") || fingerprint.value,\n        imgid: fingerprint.value,\n        imgtype: \"login\",\n        web_login_url: !vtoken && !deviceid ? window.location.origin : null,\n        imgcode: code.value\n      };\n      try {\n        await getLoginApi(params).then((data) => {\n          if (!!!data || !!!data.token)\n            return getCheckImg();\n          Websocket.value.start(data.token);\n          Websocket.value.reconnect();\n          let gopath2 = sessionStorage.getItem(\"gopath\");\n          if (!!gopath2) {\n            sessionStorage.setItem(\"gopath\", \"\");\n            return router.push(gopath2);\n          }\n          router.push(\"/\");\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const captchaImg = ref(\"\");\n    const getCheckImg = async () => {\n      try {\n        const res = await checkImgApi({\n          imgid: fingerprint.value,\n          imgtype: \"login\"\n        });\n        const url = window.URL.createObjectURL(new Blob([res], { type: \"image/png\" }));\n        captchaImg.value = url;\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    const gopath = () => {\n      router.push(\"/auth/forgetPasw\");\n    };\n    const onEnterUp = (e) => {\n      if ([\"Enter\", \"NumpadEnter\"].includes(e.code)) {\n        onLogin();\n      }\n    };\n    watch(isOpenRecaptcha, (e) => {\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onMounted(() => {\n      window.addEventListener(\"keyup\", onEnterUp);\n      if (isOpenRecaptcha.value.v === \"1\") {\n        getCheckImg();\n      }\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"keyup\", onEnterUp);\n    });\n    return (_ctx, _cache) => {\n      const _component_van_icon = _resolveComponent(\"van-icon\");\n      const _component_AdBanner = _resolveComponent(\"AdBanner\");\n      return _openBlock(), _createElementBlock(\n        _Fragment,\n        null,\n        [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              (_openBlock(true), _createElementBlock(\n                _Fragment,\n                null,\n                _renderList(inputFormList.value, (item, index) => {\n                  return _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n                    key: item.key,\n                    class: \"input-content relative z-[1]\"\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\n                          \"i\",\n                          {\n                            class: _normalizeClass([\"block\", item.icon])\n                          },\n                          null,\n                          2\n                          /* CLASS */\n                        ),\n                        item.key == \"mobile\" ? (_openBlock(), _createElementBlock(\"span\", {\n                          key: 0,\n                          onClick: _cache[0] || (_cache[0] = ($event) => _ctx.$router.replace(\"/country\")),\n                          class: \"text-[24px] flex_s mx-[13px]\"\n                        }, [\n                          _createElementVNode(\"img\", {\n                            class: \"w-[40px] mr-[15px]\",\n                            src: _unref(requireImg)(\"common/\" + country_code.value + \".png\"),\n                            alt: \"\"\n                          }, null, 8, _hoisted_5),\n                          _createTextVNode(\n                            \" \" + _toDisplayString(phone_code.value) + \" \",\n                            1\n                            /* TEXT */\n                          ),\n                          _createVNode(_component_van_icon, {\n                            class: \"ml-[15px]\",\n                            size: \"15px\",\n                            name: \"arrow-down\"\n                          }),\n                          _hoisted_6\n                        ])) : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"input\", {\n                          class: \"!text-[29px] w-[260px]\",\n                          type: item.type,\n                          placeholder: item.placeholder,\n                          pattern: item.pattern,\n                          onChange: item.onChange\n                        }, null, 40, _hoisted_7),\n                        item.key.toLowerCase().includes(\"password\") ? (_openBlock(), _createElementBlock(\"i\", {\n                          key: 1,\n                          class: _normalizeClass(item.type === \"password\" ? \"eye-close\" : \"eye-open\"),\n                          onClick: ($event) => togglePasswordStatus(index)\n                        }, null, 10, _hoisted_8)) : _createCommentVNode(\"v-if\", true),\n                        captchaImg.value && index === 2 ? (_openBlock(), _createElementBlock(\"img\", {\n                          key: 2,\n                          src: captchaImg.value,\n                          onClick: getCheckImg\n                        }, null, 8, _hoisted_9)) : _createCommentVNode(\"v-if\", true)\n                      ]),\n                      _createCommentVNode(' <div className=\"error !text-[24px]\">{{ item.error }}</div> ')\n                    ])\n                  ])), [\n                    [_vShow, index === 2 && isOpenRecaptcha.value.v === \"1\" || index !== 2]\n                  ]);\n                }),\n                128\n                /* KEYED_FRAGMENT */\n              )),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\n                  \"span\",\n                  {\n                    class: \"px-[20px]\",\n                    onTouchstart: gopath\n                  },\n                  \" \\u5FD8\\u8BB0\\u5BC6\\u7801 \",\n                  32\n                  /* NEED_HYDRATION */\n                )\n              ])\n            ])\n          ]),\n          _createCommentVNode(\" \\u5E7F\\u544A\\u4F4D \"),\n          _createVNode(_component_AdBanner, { slider: \"\" }),\n          _createVNode(FooterView, {\n            \"btn-name\": \"\\u767B\\u5F55\",\n            onClick: onLogin\n          })\n        ],\n        64\n        /* STABLE_FRAGMENT */\n      );\n    };\n  }\n});\n"
        ],
        "names": [],
        "mappings": ";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uBAA6B;AAC/D,kCAAkC,uBAA6B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;"
      }
    },
    {
      "name": "vite:style-import",
      "start": 1714699771681,
      "end": 1714699771681,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1714699771681,
      "end": 1714699771681,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1714699771681,
      "end": 1714699771681,
      "order": "normal"
    }
  ]
}
